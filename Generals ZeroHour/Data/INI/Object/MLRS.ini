;===================================================================================
;-------------------------------------------------
Object SupW_AmericaHammerhead

  ; *** ART Parameters ***
  SelectPortrait = hammerhead_L                       ;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹[  OBJECT: ]¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
  ButtonImage = hammerhead

  UpgradeCameo1 = Upgrade_AmericaBattleDrone
  UpgradeCameo2 = Upgrade_AmericaScoutDrone

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    RecoilSettleSpeed    = 6

    ExtraPublicBone = Turret01

    DefaultConditionState
      Model                           = HHeadArty
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ConditionState    = REALLYDAMAGED
      Model                           = HHeadArty_d
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ConditionState                    = RUBBLE
      Model                           = HHeadArty_d1
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ConditionState                    = USING_WEAPON_B
      Model                           = HHeadArty
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ConditionState    = REALLYDAMAGED USING_WEAPON_B
      Model                           = HHeadArty_d
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ConditionState                    = USING_WEAPON_B RUBBLE
      Model                           = HHeadArty_d
      Turret = Turret01
      WeaponFireFXBone = PRIMARY TurretMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY TurretFX
      WeaponLaunchBone = PRIMARY TurretMS
      TurretPitch                     = TurretMS
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = HHeadArty.HHeadArty
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_B ;Very long shot delay -- possibly moving
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    ;***
    ConditionState    = REALLYDAMAGED MOVING
      Model           = HHeadArty_d
      Animation       = HHeadArty_d.HHeadArty_d
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_B ;Very long shot delay -- possibly moving


    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = HHeadArty.HHeadArty
      AnimationMode   = MANUAL
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_B ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = HHeadArty_d
      Animation       = HHeadArty_d.HHeadArty_d
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_B ;Very long shot delay

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = HHeadArty.HHeadArty
      AnimationMode   = MANUAL
    End

    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_B ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED PACKING
      Model           = HHeadArty_d
      Animation       = HHeadArty_d.HHeadArty_d
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_B ;Very long shot delay

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = HHeadArty.HHeadArty
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK   ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED FIRING_A
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED RELOADING_A
    AliasConditionState = DEPLOYED MOVING
    AliasConditionState = DEPLOYED FIRING_B
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED RELOADING_B

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = HHeadArty_d
      Animation       = HHeadArty_d.HHeadArty_d
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK  ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_B
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_B
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_B

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 2.0
    TreadDriveSpeedFraction = 0.3
    TreadPivotSpeedFraction = 0.6
    OkToChangeModelColor = Yes
  End

  DisplayName   = OBJECT:Hammerhead
  Side          = America ;[AmericaSuperWeaponGeneral]*
  EditorSorting = VEHICLE
;---------------------------------
  TransportSlotCount = 0 ;10
;---------------------------------
  WeaponSet
    Conditions = None
   ;-----------------------------------------------------------------------------------------
    Weapon = PRIMARY HammerheadGun ;AttackRange = 600.0 ;[2000.0]* ; ClipReloadTime = 30000
   ;-----------------------------------------------------------------------------------------
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions = None
    Armor = TankArmor ;[Adv.TankArmor]*
    DamageFX = TankDamageFX
  End
  BuildCost = 10000 ;8000 ;7000 ;5000
  BuildTime = 60.0  ;55.0  ;50.0
  VisionRange         = 450.0 ;600.0 ;200.0
  ShroudClearingRange = 450   ;600   ;500
  Prerequisites
    Object = AmericaWarFactory
    Object = AmericaStrategyCenter
    Science = SCIENCE_TrojanTank
    Science = SCIENCE_Rank4
;;;;Science = SCIENCE_Hammerhead ;;;;;;;;;;;;
  End
  ExperienceValue = 100 200 300 400
  ExperienceRequired = 0 300 600 1200
  IsTrainable = Yes
  CrusherLevel = 2
  CrushableLevel = 2
 ;--------------------------
  MaxSimultaneousOfType = 1
 ;--------------------------
  CommandSet = HammerheadCommandSet


  ; *** AUDIO Parameters ***
  VoiceSelect           = PenetratorTankVoiceSelect
  VoiceMove             = PenetratorTankVoiceMove
  VoiceAttack           = PenetratorTankVoiceAttack
  VoiceGuard            = PenetratorTankVoiceMove
 ;--------------------------------------------------
  SoundMoveStart        = OverlordTankMoveStart
  SoundMoveStartDamaged = OverlordTankMoveStart
 ;--------------------------------------------------
  UnitSpecificSounds
   ;-----------------------------------------------------------------------------------------------
    TurretMoveStart = NoSound
    TurretMoveLoop  = ParticleTankCannonTurretMoveLoop ;<==========[Îçâó÷êà ïîâîðîòà áàøíè/îðóäèÿ]
   ;-----------------------------------------------------------------------------------------------
    VoiceCreate     = PenetratorTankVoiceCreate
    VoiceEnter      = PenetratorTankVoiceMove
    SoundEject      = PilotSoundEject
    VoiceEject      = PilotVoiceEject
    VoiceCrush      = MicrowaveTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE HUGE_VEHICLE FS_SUPERWEAPON
 ;--------------------------------------------------
  Body = ActiveBody ModuleTag_02
    MaxHealth     = 1000.0;1500.0 ;300.0
    InitialHealth = 1000.0;1500.0 ;300.0
    ;---------------------------------------
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200.0;1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DeployStyleAIUpdate ModuleTag_03
    Turret
      TurretTurnRate        = 90
      TurretPitchRate       = 90
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = Yes
      RecenterTime          = 111         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = No
    PackTime = 111
    UnpackTime = 111
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL HHLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass                 = 50.0
  End

  Behavior = ObjectCreationUpgrade ModuleTag_2343250
    UpgradeObject = SupW_OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_99
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone
  End
  Behavior = ProductionUpdate ModuleTag_07
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_08
    TriggeredBy   = Upgrade_AmericaAdvancedTraining
    AddXPScalar   = 1.0 ;Increases experience gained by an additional 100%
  End

  ; Turret fly off death
  Behavior = SlowDeathBehavior ModuleTag_10
    ProbabilityModifier  = 50
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_GenericTankDeathEffect
    OCL = MIDPOINT OCL_HammerheadDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
    OCL = FINAL    OCL_CrusaderTurret
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_11
    ProbabilityModifier  = 50
    DestructionDelay  = 2000
    DestructionDelayVariance  = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_HammerheadDeathEffect
    FX  = FINAL    FX_GenericTankDeathExplosion
  End

  Behavior                 = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior                    = CreateCrateDie ModuleTag_CratesChange
   CrateData             = SalvageCrateData
   ;CrateData             = EliteTankCrateData
   ;CrateData             = HeroicTankCrateData
  End

  Behavior = EjectPilotDie ModuleTag_17
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
    ExemptStatus = HIJACKED
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_264 ; allows use of command button hunt script with this unit.
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry               = BOX
  GeometryMajorRadius    = 25.0
  GeometryMinorRadius    = 20.0
  GeometryHeight         = 20.0
  GeometryIsSmall        = Yes
  Scale = 1.12;[1.2]*
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length


End

;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;===================================[ MLRS ]=============================================
;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹¹
;todo: missile lid fragment particle sys, launch smoke sys, launch and ignition fx
;tread anim speed and bouncing duds


;Objects to do:

;Submunitions:

;M85bomb    ;with ribbon particle effect
;M85dud     ;dud on ground

;M74bomb    ;round
;M74dud     ;dud on ground

;p3iBATinitial ;initial launched from missile projectile object
;P3iBAT        ;glide bomb vehicle

;Missiles:

;ATACMS_Unitary      ;unitary warhead
;ATACMS_BAT          ;becomes the BAT launcher
;ATACMS_BATdispenser ;launches BAT submunitions
;ATACMS_Sub          ;M74 Submunition version, becomes the submunition launcher
;ATACMS_Subdispenser ;launches M74 submunitions

;M30missile        ;submunitions version
;M30DPICMdispenser ;launches M85 submunitions
;XM31missile       ;unitary warhead

;Vehicle:
;AmericaVehcileMLRS


;====================================================[ MLRS ]==================================
Object AmericaVehicleMLRS

  ; *** ART Parameters ***
  SelectPortrait         = SAM270
  ButtonImage            = SAM270_s
  
  UpgradeCameo1 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo2 = Upgrade_AmericaScoutDrone
  UpgradeCameo3 = Upgrade_AmericaBattleDrone
  UpgradeCameo4 = Upgrade_AmericaHellfireDrone
;;UpgradeCameo5 = Upgrade_GLAWorkerShoes
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A PREATTACK_B FIRING_B BETWEEN_FIRING_SHOTS_B RELOADING_B PREATTACK_C FIRING_C BETWEEN_FIRING_SHOTS_C RELOADING_C

    DefaultConditionState
      Model            = avm270
      Turret           = TURRET
      TurretPitch      = TURRETEL ;not used, deploy animation fixes it at 55 degrees pitch up
      WeaponFireFXBone = PRIMARY   WeaponA
      WeaponLaunchBone = PRIMARY   WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
      WeaponFireFXBone = TERTIARY  WeaponA
      WeaponLaunchBone = TERTIARY  WeaponA
    End

    ConditionState     = DAMAGED
      Model            = AVM270_d
    End

    ConditionState     = REALLYDAMAGED
      Model            = AVM270_d
    End

    ConditionState    = RUBBLE
      Model           = AVM270_d
      HideSubObject   = None
      ShowSubObject   = TURRET
      ParticleSysBone = Smoke01 FireFactionSmall
      ParticleSysBone = Smoke02 FireSmallContinuous
      ParticleSysBone = Smoke03 SmokeFactionSmall
      ParticleSysBone = Smoke04 TankSmoke
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 3.0 ;amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:MLRS
  Side               = America
  EditorSorting      = VEHICLE
 ;-------------------------------
  TransportSlotCount = 3 ;8   ;how many "slots" we take in a transport (0 == not transportable)
;---------------------------------------------------
  BuildCost = 3500 ;8000 ;[4500]*
  BuildTime = 30.0 ;60.0 ;[32.0]* ;in seconds
;---------------------------------------------------
  Prerequisites
    Object = AmericaWarFactory
    Object = AmericaStrategyCenter
    Science = SCIENCE_TrojanTank
    Science = SCIENCE_Rank2
    ;;;;Science = SCIENCE_AMERICABOSS
  End
;-------------------------------------
  MaxSimultaneousOfType = 6 ;8 ;[3]*
;-------------------------------------------
  VisionRange         = 400.0 ;450.0 ;600.0
  ShroudClearingRange = 400   ;450   ;600
;-------------------------------------------
  ExperienceValue = 50 100 200 400     ;Experience point value at each level
  ExperienceRequired = 0 400 800 2000  ;Experience points needed to gain each level
  IsTrainable = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
;================================================================================================================================================
  WeaponSet
    Conditions = None
    Weapon            = PRIMARY   ATACMSunitaryWeapon                                 ;AttackRange = 400.0 ;600.0 ;[700]* ;ClipReloadTime = 8048
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
   ;----------------------------------------------------------------------------------
    Weapon            = SECONDARY MLRSClusterRocketWeapon400 ;ATACMSsubmunitionWeapon ;AttackRange = 400.0 ;600.0 ;[700]* ;ClipReloadTime = 10000 ;8048
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
   ;----------------------------------------------------------------------------------
   ;Weapon            = TERTIARY  ATACMSsubmunitionWeapon    ;ATACMSBATWeapon         ;AttackRange = 600.0 ;[700]* ;ClipReloadTime = 8048
   ;AutoChooseSources = TERTIARY  FROM_SCRIPT FROM_AI
   ;----------------------------------------------------------------------------------
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
;================================================================================================================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;WeaponSet
;;  Conditions = None ;PLAYER_UPGRADE 
;;  Weapon = PRIMARY   MLRSunitaryWeapon
;;  Weapon = SECONDARY MLRSClusterRocketWeapon
;;  AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
;;  AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
;;  ShareWeaponReloadTime = Yes
;;  WeaponLockSharedAcrossSets = Yes
;;End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;---------------------------------------------------------------------------------
  ArmorSet
    Conditions = None
    Armor      = TankArmor ;[TruckArmor]*
    DamageFX   = TankDamageFX
  End
;---------------------------------------------------------------------------------
  CommandSet = AmericaVehicleMLRSCommandSetUpgraded ;AmericaVehicleMLRSCommandSet
;---------------------------------------------------------------------------------

  ; *** AUDIO Parameters ***
  VoiceSelect = MLRSVoiceSelect
  VoiceMove = MLRSVoiceMove
  VoiceGuard = MLRSVoiceGuard
  VoiceAttack = MLRSVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit

  UnitSpecificSounds
    VoiceCreate = MLRSVoiceCreate
   ;------------------------------------------------------------------------------------------------------
    TurretMoveStart = NoSound
    TurretMoveLoop  = SupW_LosatTurretMoveLoop ;OverlordTankTurretMoveLoop ;TurretMoveLoopLoud ;<========[Îçâó÷êà ïîâîðîòà îðóäèÿ]
   ;------------------------------------------------------------------------------------------------------
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = MLRSVoiceCreate
    VoiceBombard = MLRSVoiceAttack
   ;Deploy   = NukeCannonDeploy
   ;Undeploy = NukeCannonUnDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE DONT_AUTO_CRUSH_INFANTRY CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE HUGE_VEHICLE SCORE SALVAGER PARACHUTABLE
;--------------------------------------------------
  Body = ActiveBody ModuleTag_02
    MaxHealth     = 500.0 ;1600.0 ;240.0 ;[180.0]*
    InitialHealth = 500.0 ;1600.0 ;240.0 ;[180.0]*
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360 ;400 ;[480]*
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  ; Behavior = DeployStyleAIUpdate ModuleTag_03
    ; Turret
      ; TurretTurnRate        = 80
      ; TurretPitchRate       = 80
      ; FirePitch             = 55  ;max is 56 for hydraulic jack arm to not come out
      ; AllowsPitch           = Yes
      ; RecenterTime          = 5000  ; how long to wait during idle before recentering
      ; ControlledWeaponSlots = PRIMARY SECONDARY ;TERTIARY
      ; NaturalTurretAngle    = 0
      ; InitiallyDisabled     = Yes
    ; End
    ; AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
    ; PackTime = 2000
    ; UnpackTime = 2000
    ; TurretsFunctionOnlyWhenDeployed = Yes
    ; TurretsMustCenterBeforePacking = Yes
    ; ManualDeployAnimations = No ;Yes
  ; End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;======================================================================================================
;----------------[ÇÀÌÅÍÀ íà Êîä AI îò LOSAT-à (ñ íåêîòîðûìè ïîïðàâêàìè)]-----------------------------
   Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate  = 100;[45]* ;<=======[Ñêîðîñòü ïîâîðîòà îðóäèÿ]  ; turn rate, in degrees per sec
      TurretPitchRate = 50;[35]*
      FirePitch = 55;[45]*  ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY ;TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End

  Locomotor = SET_NORMAL BattleMasterLocomotor ;TomahawkLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = ProductionUpdate ModuleTag_24
    MaxQueueEntries = 3; So you can't build multiple upgrades in the same frame
  End

  Behavior = ObjectCreationUpgrade ModuleTag_234325
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End

  Behavior = ProductionUpdate ModuleTag_09
    ;MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_10
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;Behavior = CommandSetUpgrade ModuleTag_11
;;  CommandSet = AmericaVehicleMLRSCommandSetUpgraded
;;  TriggeredBy = Upgrade_GLAWorkerShoes
;;End
;;Behavior = WeaponSetUpgrade ModuleTag_ATACMS
;;  TriggeredBy = Upgrade_GLAWorkerShoes
;;End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED
    SinkDelay        = 2000
    SinkRate         = 1.25     ; in Dist/Sec
    DestructionDelay = 1500
    DestructionDelayVariance = 200
    FX  = INITIAL  FX_DragonNapalmSpill
    FX =  MIDPOINT FX_OverlordExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    SinkDelay        = 3000
    SinkRate         = 1.25     ; in Dist/Sec
    DestructionDelay = 15000
    DestructionDelayVariance = 200
    FX  = INITIAL  FX_CarCrush
    FX =  MIDPOINT FX_OverlordExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior = EjectPilotDie ModuleTag_15
    DeathTypes = ALL
    ExemptStatus = HIJACKED
    VeterancyLevels = ALL -REGULAR ;only vet+ gives pilot
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
  End
  
  Behavior = TransitionDamageFX ModuleTag_16
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = LockWeaponCreate ModuleTag_18
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Geometry = BOX
  GeometryMajorRadius = 39.2
  GeometryMinorRadius = 28.54
  GeometryHeight      = 25.1
  GeometryIsSmall     = Yes
  Scale = 1.22;1.2;[1.25]*
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End

;------------------------------------------------------------------------------
;XM31 unitary missile
;------------------------------------------------------------------------------

Object XM31missile ;GMLRS rocket with unitary warhead

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = M30_m
      Animation = M30_m.M30_m ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 M30ExhaustTrail ;needed if using dumb proj behav since it wont use weapon.ini exhaust system
    End

    ConditionState = DAMAGED
      Model = M30_md
      Animation = M30_md.M30_md ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
    End

    ConditionState = REALLYDAMAGED
      Model = M30_me
      Animation = M30_me.M30_me ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  VisionRange = 150.0
  ShroudClearingRange = 100
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DumbProjectileBehavior ModuleTag_03
    MaxLifespan                     = 20000
    OrientToFlightPath              = Yes
    FirstHeight                     = 180
    SecondHeight                    = 280
    FirstPercentIndent              = 20% ;30% ;20 90 for inferno cannon
    SecondPercentIndent             = 90% ;70%
    DetonateCallsKill               = Yes
    GarrisonHitKillRequiredKindOf   = INFANTRY
    GarrisonHitKillForbiddenKindOf  = NONE
    GarrisonHitKillCount            = 10
    GarrisonHitKillFX               = FX_MortarGarrisonBuildingHit
    FlightPathAdjustDistPerSecond   = 70 ;speed of target it can track, 120 combat bike ;90 rocket buggy and technical; 60 humvee
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = No ;Yes
  End

; ---- begin Projectile death behaviors
  Behavior = SlowDeathBehavior DeathModuleTag_01
    DeathTypes = NONE +NORMAL +DETONATED
    DestructionDelay = 70
    OCL    = INITIAL  OCL_MLRSrocketDisintegrate
    Weapon = MIDPOINT MLRSFlameWeapon
    Weapon = FINAL    MLRSunitaryAPblast
  End

  Behavior = InstantDeathBehavior DeathModuleTag_02
    DeathTypes = ALL -NORMAL -DETONATED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_MLRSrocketDisintegrate
  End
; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.6
  GeometryMinorRadius = 0.84
  GeometryHeight      = 0.84
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;M30 missile dispensing M85 DPICM
;------------------------------------------------------------------------------

Object M30missile ;GMLRS rocket fired from M270 vehicle

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = M30_m
      Animation = M30_m.M30_m ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 M30ExhaustTrail ;needed if using dumb proj behav since it wont use weapon.ini exhaust system
    End

    ConditionState = DAMAGED
      Model = M30_md
      Animation = M30_md.M30_md ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
    End

    ConditionState = REALLYDAMAGED
      Model = M30_me
      Animation = M30_me.M30_me ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  VisionRange = 150.0
  ShroudClearingRange = 100
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DumbProjectileBehavior ModuleTag_03
    MaxLifespan                     = 20000
    OrientToFlightPath              = Yes
    FirstHeight                     = 180
    SecondHeight                    = 280
    FirstPercentIndent              = 20% ;30% ;20 90 for inferno cannon
    SecondPercentIndent             = 90% ;70%
    DetonateCallsKill               = Yes
    FlightPathAdjustDistPerSecond   = 70 ;speed of target it can track, 120 combat bike ;90 rocket buggy and technical; 60 humvee
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = No ;Yes
  End

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 100.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 800
  End

; ---- begin Projectile death behaviors
  Behavior = InstantDeathBehavior DeathModuleTag_01
    DeathTypes = ALL -EXPLODED -LASERED
    FX = FX_ClusterBombOpen
  End
  Behavior = CreateObjectDie DeathModuleTag_03
    DeathTypes = ALL -EXPLODED -LASERED
    CreationList = OCL_M30DPICMdispenser
    TransferPreviousHealth = Yes
  End

  Behavior = InstantDeathBehavior DeathModuleTag_02
    DeathTypes = NONE +EXPLODED +LASERED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_MLRSrocketDisintegrate
  End
; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.6
  GeometryMinorRadius = 0.84
  GeometryHeight      = 0.84
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------

Locomotor M30DPICMdispenserLocomotor
  Surfaces = AIR
  Speed = 150
  MinSpeed = 120
  Acceleration = 225
  Braking = 0
  TurnRate = 0            ; in degrees  /sec
  MaxThrustAngle = 0      ; in degrees (NOT degrees/sec)
  AllowAirborneMotiveForce = Yes
  Appearance = THRUST
  PreferredHeight = -1
  ;PreferredHeightDamping = 0.6
  ;AirborneTargetingHeight = 30
End

;------------------------------------------

Object M30DPICMdispenser ;this fires the weapon that scatters the DPICM

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = PRIMARY

    DefaultConditionState
      Model = M30_mLnch
      Animation = M30_mLnch.M30_mLnch ;spin stabalizing animation
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      ;WeaponHideShowBone = PRIMARY WeaponA
    End

    ConditionState = DAMAGED
      Model = M30_mLnchD
      Animation = M30_mLnchD.M30_mLnchD ;spin stabalizing animation
      AnimationMode = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = M30_mLnchE
      Animation = M30_mLnchE.M30_mLnchE ;spin stabalizing animation
      AnimationMode = LOOP
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY M85bombletScatterWeapon
  End


  VisionRange = 180.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE CAN_ATTACK SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End
  Locomotor = SET_NORMAL M30DPICMdispenserLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = Yes
  End

  Behavior = FireWeaponUpdate ModuleTag_06
    Weapon = M85bombletScatterWeapon
  End

  Behavior = LifetimeUpdate ModuleTag_07
    MinLifetime = 170
    MaxLifetime = 170
  End

; ---- begin Projectile death behaviors

  Behavior = InstantDeathBehavior DeathModuleTag_01
    DeathTypes = ALL
    OCL = OCL_M30DPICMdispenserDisintegrate ;makes duds
  End

; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.6
  GeometryMinorRadius = 0.84
  GeometryHeight      = 0.84
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;----------------------------------------------------------------------------------------
;M85 DPICM bombs
;----------------------------------------------------------------------------------------

Armor CEMdudArmor ;less vulnerable to flame, but can be killed by ambulance
  Armor = DEFAULT           100%
  Armor = SMALL_ARMS        50%
  Armor = GATTLING          40%
  Armor = COMANCHE_VULCAN   50%
  Armor = RADIATION         0%
  Armor = MICROWAVE         20%
  Armor = SNIPER            0%
  Armor = POISON            10%
  Armor = HAZARD_CLEANUP    10%
  Armor = FLAME             10%
  Armor = MELEE             0%
  Armor = LASER             0%
  Armor = INFANTRY_MISSILE  30%
  Armor = PARTICLE_BEAM     25%
  Armor = KILL_PILOT        0%
  Armor = SURRENDER         0%
  Armor = AURORA_BOMB       50%
  Armor = LAND_MINE         0%
  Armor = EXPLOSION         80%
  Armor = SUBDUAL_MISSILE   0%
  Armor = SUBDUAL_VEHICLE   0%
  Armor = SUBDUAL_BUILDING  100%
End

;----------------------------------------------------------------------------------------

Object M85bomb

  ; *** ART Parameters ***
  SelectPortrait = M85bombs
  ButtonImage    = M85bombs

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = Upgrade_AmericaBunkerBusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = m77bomb
      ParticleSysBone = RIBBON DPICMribbon
    End
  End

  ; ***DESIGN parameters ***
  DisplayName    = OBJECT:UXO
  EditorSorting  = SYSTEM

  Side = AmericaSuperWeaponGeneral

  VisionRange = 0.0
  ShroudClearingRange = 50

  ArmorSet
    Conditions = None
    Armor      = ProjectileArmor
    DamageFX   = None
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD PROJECTILE SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 200.0
    InitialHealth = 200.0
  End

; ---- begin Projectile death behaviors

  Behavior = SlowDeathBehavior ModuleTag_Detonate
    DeathTypes = NONE +DETONATED +NORMAL +BURNED +CRUSHED ;we detonated normally.
    DestructionDelay = 70
    FX     = INITIAL  FX_TomahawkSubmunition
    Weapon = INITIAL  M85AntiUnitBlast
    Weapon = MIDPOINT M85AntiStructureBlast
    Weapon = FINAL    MLRSFlameWeapon ;set trees afire
  End

  Behavior = InstantDeathBehavior ModuleTag_ShotDown
    DeathTypes = ALL -DETONATED -NORMAL -BURNED -CRUSHED
    FX  = FX_GenericMissileDeath
  End

; ---- end Projectile death behaviors

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
    CenterOfMassOffset = 2
    ShockResistance = 0.90
    AllowBouncing = Yes
    KillWhenRestingOnGround = Yes
  End

  ;Behavior = AIUpdateInterface ModuleTag_07
  ;End
  ;Locomotor = SET_NORMAL None

  Behavior = DumbProjectileBehavior ModuleTag_07
    FirstHeight = -20
    SecondHeight = -30
    FirstPercentIndent = 30%
    SecondPercentIndent = 70%
    FlightPathAdjustDistPerSecond = 0

    DetonateCallsKill              = Yes
    GarrisonHitKillRequiredKindOf  = INFANTRY
    GarrisonHitKillForbiddenKindOf = NONE
    GarrisonHitKillCount           = 2
    GarrisonHitKillFX              = FX_MortarGarrisonBuildingHit
  End

  Behavior = HeightDieUpdate ModuleTag_09
    TargetHeight = 3.0
    TargetHeightIncludesStructures = Yes
    OnlyWhenMovingDown = Yes
    InitialDelay = 200
  End

  Geometry = SPHERE                      ;Collision geometry
  GeometryMajorRadius = 1.0              ;Collision major radius
  GeometryMinorRadius = 1.0              ;Collision minor radius
  GeometryHeight = 1.0                   ;Height for geometry
  GeometryIsSmall = Yes                  ;Is small geometry
  Shadow = SHADOW_DECAL
  ShadowSizeX = 5
  ShadowSizeY = 5
  ShadowTexture = ShadowI

End

;------------------------------------------------------------------------------

;dud submunitions which explode randomly after some time or work like mines

Object M85dud

  ; *** ART Parameters ***
  SelectPortrait = M85bombs
  ButtonImage    = M85bombs

  ;UpgradeCameo1 = Upgrade_GLAAPRockets
  ;UpgradeCameo2 = Upgrade_AmericaBunkerBusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = m77bomb
      ParticleSysBone = RIBBON DPICMribbon
    End
  End

  ; ***DESIGN parameters ***
  DisplayName    = OBJECT:UXO
  EditorSorting  = SYSTEM

  Side = AmericaSuperWeaponGeneral

  BuildCost = 200

  ArmorSet
    Conditions = None
    Armor      = CEMdudArmor
    DamageFX   = DefaultDamageFX
  End

  VisionRange  = 100.0
  ShroudClearingRange = 100.0
  ExperienceValue     = 50 50 50 50
  CrushableLevel = 0

  WeaponSet
    ;The weapon set is used to determine detonation mode
    Conditions = None
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End

  ;CommandSet = None

  ; *** AUDIO Parameters ***
  VoiceSelect          = BombTickTimed
  SoundOnDamaged       = VehicleImpactLight
  SoundOnReallyDamaged = VehicleImpactHeavy


  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR ;LOCAL_UNIT_ONLY
  KindOf = PRELOAD DEMOTRAP SELECTABLE CLEANUP_HAZARD SALVAGER IGNORED_IN_GUI NO_SELECT

  Body  = ActiveBody ModuleTag_02
    MaxHealth     = 100.0
    InitialHealth = 100.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthUpdate ModuleTag_03
    InnateStealth      = Yes
    StealthDelay       = 500 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    ;FriendlyOpacityMax = 50.0%
    ;PulseFrequency     = 10000   ; msec
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 40.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE CLEANUP_HAZARD INERT
    AutoDetonationWithFriendsInvolved = Yes
    DetonateWhenKilled        = Yes
  End

  Behavior = PhysicsBehavior ModuleTag_Mass
    Mass          = 5.0
    AllowBouncing = Yes
    AllowCollideForce = Yes
    CenterOfMassOffset = 2
    ShockResistance = 0.90
    ForwardFriction = 1.5
    LateralFriction = 1.0
    AerodynamicFriction = 0.15
  End
  Behavior = LifetimeUpdate ModuleTag_Delay
    MinLifetime = 21000   ; min lifetime in msec
    MaxLifetime = 120000  ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    ExemptStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes   = ALL -POISONED_GAMMA ;not by ambulance - i modified it's weapon to cause this death
    DestructionDelay = 50

    FX     = INITIAL  FX_MLRSdudInitiation
    Weapon = INITIAL  MLRSFlameWeapon
    Weapon = MIDPOINT M85AntiUnitBlast
    FX     = MIDPOINT FX_TomahawkSubmunition
    Weapon = FINAL    M85AntiStructureBlast

    FlingForce          = 5
    FlingForceVariance  = 0
    FlingPitch          = 90
    FlingPitchVariance  = 5
  End

  Behavior = InstantDeathBehavior ModuleTag_06
    ExemptStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes = NONE +POISONED_GAMMA
    FX = WeaponFX_DozerMineDisarming
  End

  Behavior = InstantDeathBehavior ModuleTag_07
    ;jammed by avenger
    RequiredStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes = ALL
    FX = WeaponFX_DozerMineDisarming
  End

  Geometry = SPHERE          ;Collision geometry
  GeometryMajorRadius = 2.0  ;Collision major radius
  GeometryMinorRadius = 2.0  ;Collision minor radius
  GeometryHeight = 2.0       ;Height for geometry
  GeometryIsSmall = Yes      ;Is small geometry

  ;Shadow = SHADOW_DECAL ;no shadow - harder to see
  ;ShadowSizeX = 5
  ;ShadowSizeY = 3
  ;ShadowTexture = ShadowI

End

;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
;M74 bombs for ATACMS block 1
;------------------------------------------------------------------------------

Object M74bomb

  ; *** ART Parameters ***
  SelectPortrait = M74bombs_L
  ButtonImage    = M74bombs_L

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = Upgrade_AmericaBunkerBusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = M74bomb
      ParticleSysBone = None ClusterBombletContrail
    End
  End

  ; ***DESIGN parameters ***
  DisplayName    = OBJECT:UXO
  EditorSorting  = SYSTEM

  Side = AmericaSuperWeaponGeneral

  VisionRange = 0.0
  ShroudClearingRange = 50

  ArmorSet
    Conditions = None
    Armor      = ProjectileArmor
    DamageFX   = None
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD PROJECTILE SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 100.0
    InitialHealth = 100.0
  End

; ---- begin Projectile death behaviors

  Behavior = SlowDeathBehavior ModuleTag_Detonate
    DeathTypes = NONE +DETONATED +NORMAL +BURNED +CRUSHED ;we detonated normally.
    DestructionDelay = 50
    FX     = INITIAL  FX_TomahawkSubmunition
    Weapon = INITIAL  M74BlastWeapon
    Weapon = FINAL    MLRSFlameWeapon ;set trees afire
  End

  Behavior = InstantDeathBehavior ModuleTag_ShotDown
    DeathTypes = ALL -DETONATED -NORMAL -BURNED -CRUSHED
    FX  = FX_GenericMissileDeath
  End

; ---- end Projectile death behaviors

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
    CenterOfMassOffset = 2
    ShockResistance = 0.90
    AllowBouncing = Yes
    KillWhenRestingOnGround = Yes
  End

  ;Behavior = AIUpdateInterface ModuleTag_07
  ;End
  ;Locomotor = SET_NORMAL None

  Behavior = DumbProjectileBehavior ModuleTag_07
    FirstHeight = -20
    SecondHeight = -30
    FirstPercentIndent = 30%
    SecondPercentIndent = 70%
    FlightPathAdjustDistPerSecond = 0

    DetonateCallsKill              = Yes
    GarrisonHitKillRequiredKindOf  = INFANTRY
    GarrisonHitKillForbiddenKindOf = NONE
    GarrisonHitKillCount           = 2
    GarrisonHitKillFX              = FX_MortarGarrisonBuildingHit
  End

  Behavior = HeightDieUpdate ModuleTag_09
    TargetHeight = 3.0
    TargetHeightIncludesStructures = Yes
    OnlyWhenMovingDown = Yes
    InitialDelay = 200
  End

  Geometry = SPHERE                      ;Collision geometry
  GeometryMajorRadius = 0.8              ;Collision major radius
  GeometryMinorRadius = 0.8              ;Collision minor radius
  GeometryHeight = 0.8                   ;Height for geometry
  GeometryIsSmall = Yes                  ;Is small geometry
  Shadow = SHADOW_DECAL
  ShadowSizeX = 5
  ShadowSizeY = 5
  ShadowTexture = ShadowI

End

;------------------------------------------------------------------------------

;dud submunitions which explode randomly after some time or work like mines

Object M74dud

  ; *** ART Parameters ***
  SelectPortrait = M74bombs_L
  ButtonImage    = M74bombs_L

  ;UpgradeCameo1 = Upgrade_GLAAPRockets
  ;UpgradeCameo2 = Upgrade_AmericaBunkerBusters

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = M74bomb
      ;ParticleSysBone = None ClusterBombletContrail
    End
  End

  ; ***DESIGN parameters ***
  DisplayName    = OBJECT:UXO
  EditorSorting  = SYSTEM

  Side = AmericaSuperWeaponGeneral

  BuildCost = 200

  ArmorSet
    Conditions = None
    Armor      = CEMdudArmor
    DamageFX   = DefaultDamageFX
  End

  VisionRange  = 100.0
  ShroudClearingRange = 100.0
  ExperienceValue     = 50 50 50 50
  CrushableLevel = 0

  WeaponSet
    ;The weapon set is used to determine detonation mode
    Conditions = None
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End

  ;CommandSet = None

  ; *** AUDIO Parameters ***
  VoiceSelect          = BombTickTimed
  SoundOnDamaged       = VehicleImpactLight
  SoundOnReallyDamaged = VehicleImpactHeavy


  ; *** ENGINEERING Parameters ***
  RadarPriority = NOT_ON_RADAR ;LOCAL_UNIT_ONLY
  KindOf = PRELOAD DEMOTRAP SELECTABLE CLEANUP_HAZARD SALVAGER IGNORED_IN_GUI NO_SELECT

  Body  = ActiveBody ModuleTag_02
    MaxHealth     = 100.0
    InitialHealth = 100.0
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthUpdate ModuleTag_03
    InnateStealth      = Yes
    StealthDelay       = 500 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    ;FriendlyOpacityMax = 50.0%
    ;PulseFrequency     = 10000   ; msec
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 40.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE CLEANUP_HAZARD INERT
    AutoDetonationWithFriendsInvolved = Yes
    DetonateWhenKilled        = Yes
  End

  Behavior = PhysicsBehavior ModuleTag_Mass
    Mass          = 5.0
    AllowBouncing = Yes
    AllowCollideForce = Yes
    CenterOfMassOffset = 2
    ShockResistance = 1.00
    ForwardFriction = 3.0
    LateralFriction = 2.5
    AerodynamicFriction = 0.80
  End

  Behavior = LifetimeUpdate ModuleTag_Delay
    MinLifetime = 21000   ; min lifetime in msec
    MaxLifetime = 120000  ; max lifetime in msec
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    ExemptStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes   = ALL -POISONED_GAMMA ;not by ambulance - i modified it's weapon to cause this death
    DestructionDelay = 50

    FX     = INITIAL  FX_MLRSdudInitiation
    FX     = MIDPOINT FX_TomahawkSubmunition
    Weapon = MIDPOINT M74BlastWeapon
    Weapon = FINAL    MLRSFlameWeapon

    FlingForce          = 5
    FlingForceVariance  = 0
    FlingPitch          = 90
    FlingPitchVariance  = 5
  End

  Behavior = InstantDeathBehavior ModuleTag_06
    ExemptStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes = NONE +POISONED_GAMMA
    FX = WeaponFX_DozerMineDisarming
  End

  Behavior = InstantDeathBehavior ModuleTag_07
    ;jammed by avenger
    RequiredStatus = UNDER_CONSTRUCTION FAERIE_FIRE
    DeathTypes = ALL
    FX = WeaponFX_DozerMineDisarming
  End

  Geometry = SPHERE          ;Collision geometry
  GeometryMajorRadius = 2.0  ;Collision major radius
  GeometryMinorRadius = 2.0  ;Collision minor radius
  GeometryHeight = 2.0       ;Height for geometry
  GeometryIsSmall = Yes      ;Is small geometry

  ;Shadow = SHADOW_DECAL ;no shadow - harder to see
  ;ShadowSizeX = 5
  ;ShadowSizeY = 3
  ;ShadowTexture = ShadowI

End

;------------------------------------------------------------------------------

;------------------------------------------------------------------------------
;ATACMS unitary missile
;------------------------------------------------------------------------------

Object ATACMS_Unitary ;ATACMS with unitary warhead

  SelectPortrait = ATACMS
  ButtonImage    = ATACMS

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = ATACMS_m
      ParticleSysBone = Engine01 ATACMSExhaust ;needed if using dumb proj behav since it wont use weapon.ini exhaust system
    End

    ConditionState = DAMAGED
      Model = ATACMS_mD
      ParticleSysBone = Engine01 JetBlackTrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = ATACMS_mE
      ParticleSysBone = Engine01 JetSmoke
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = None JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  VisionRange = 180.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
; KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE SALVAGER ;EMP_HARDENED
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE SALVAGER ;[ÏÐÈÌÅ×ÀÍÈÅ: Ýòîò òèï ðàêåò íå êîíòðèöà ëàçåðíûìè îòðàæàòåëÿìè]

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DumbProjectileBehavior ModuleTag_03
    MaxLifespan                     = 20000
    OrientToFlightPath              = Yes
    FirstHeight                     = 200
    SecondHeight                    = 400
    FirstPercentIndent              = 20% ;30% ;20 90 for inferno cannon
    SecondPercentIndent             = 98% ;70%
    DetonateCallsKill               = Yes
    GarrisonHitKillRequiredKindOf   = INFANTRY
    GarrisonHitKillForbiddenKindOf  = NONE
    GarrisonHitKillCount            = 10
    GarrisonHitKillFX               = FX_MortarGarrisonBuildingHit
    FlightPathAdjustDistPerSecond   = 70 ;speed of target it can track, 120 combat bike ;90 rocket buggy and technical; 60 humvee
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = No ;Yes
  End

; ---- begin Projectile death behaviors
  Behavior = SlowDeathBehavior DeathModuleTag_01
    DeathTypes = NONE +NORMAL +DETONATED
    DestructionDelay = 70
    OCL    = INITIAL  OCL_ATACMSDisintegrate
    Weapon = MIDPOINT MLRSFlameWeapon
    OCL    = FINAL    OCL_FireFieldSmall
    Weapon = FINAL    SneakAttackShockwaveWeaponSmall
  End

  Behavior = InstantDeathBehavior DeathModuleTag_02
    DeathTypes = ALL -NORMAL -DETONATED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_ATACMSDisintegrate
  End
; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.73
  GeometryMinorRadius = 1.71
  GeometryHeight      = 1.71
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;ATACMS missile dispensing M74 bombs
;------------------------------------------------------------------------------

Object ATACMS_Sub ;ATACMS rocket fired from M270 vehicle, submunition version

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = ATACMS_m
      ParticleSysBone = Engine01 ATACMSExhaust ;needed if using dumb proj behav since it wont use weapon.ini exhaust system
    End

    ConditionState = DAMAGED
      Model = ATACMS_mD
      ParticleSysBone = Engine01 JetBlackTrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = ATACMS_mE
      ParticleSysBone = Engine01 JetSmoke
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = None JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  VisionRange = 180.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
; KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE SALVAGER ;EMP_HARDENED
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE SALVAGER ;[ÏÐÈÌÅ×ÀÍÈÅ: Ýòîò òèï ðàêåò íå êîíòðèöà ëàçåðíûìè îòðàæàòåëÿìè]
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DumbProjectileBehavior ModuleTag_03
    MaxLifespan                     = 20000
    OrientToFlightPath              = Yes
    FirstHeight                     = 200
    SecondHeight                    = 400
    FirstPercentIndent              = 20% ;30% ;20 90 for inferno cannon
    SecondPercentIndent             = 98% ;70%
    DetonateCallsKill               = Yes
    FlightPathAdjustDistPerSecond   = 70 ;speed of target it can track, 120 combat bike ;90 rocket buggy and technical; 60 humvee
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = No ;Yes
  End

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 150.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 1000
  End

; ---- begin Projectile death behaviors
  Behavior = InstantDeathBehavior DeathModuleTag_01
    DeathTypes = ALL -EXPLODED -LASERED
    FX = FX_ClusterBombOpen
  End
  Behavior = CreateObjectDie DeathModuleTag_03
    DeathTypes = ALL -EXPLODED -LASERED
    CreationList = OCL_ATACMS_Subdispenser
    TransferPreviousHealth = Yes
  End

  Behavior = InstantDeathBehavior DeathModuleTag_02
    DeathTypes = NONE +EXPLODED +LASERED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_ATACMSDisintegrate
  End
; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.73
  GeometryMinorRadius = 1.71
  GeometryHeight      = 1.71
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------

Object ATACMS_Subdispenser ;this fires the weapon that scatters the M74 bombs

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = ATACMS_Lnch
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState = DAMAGED
      Model = ATACMS_LnchD
      ParticleSysBone = Engine01 JetBlackTrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = ATACMS_LnchE
      ParticleSysBone = Engine01 JetSmoke
    End

    ConditionState = RUBBLE
      Model = ATACMS_LnchE
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY M74bombletScatterWeapon
  End

  VisionRange = 200.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE CAN_ATTACK SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End
  Locomotor = SET_NORMAL M30DPICMdispenserLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = Yes
  End

  Behavior = FireWeaponUpdate ModuleTag_06
    Weapon = M74bombletScatterWeapon
  End

  Behavior = LifetimeUpdate ModuleTag_07
    MinLifetime = 400
    MaxLifetime = 400
  End

; ---- begin Projectile death behaviors

  Behavior = InstantDeathBehavior DeathModuleTag_01
    DeathTypes = ALL
    OCL = OCL_ATACMS_SubdispenserDisintegrate ;makes duds
  End

; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.73
  GeometryMinorRadius = 1.71
  GeometryHeight      = 1.71
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;P3iBAT  glide bomb vehicle
;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

Locomotor P3iBATParachuteLocomotor
  Surfaces = AIR
  Speed = 60
  SpeedDamaged = 100       ; in dist/sec
  MinSpeed = 60            ; in dist/sec
  TurnRate = 180           ; in degrees/sec
  TurnRateDamaged = 150    ; in degrees/sec
  Acceleration = 200        ; in dist/(sec^2)
  AccelerationDamaged = 160 ; in dist/(sec^2)
  Lift = 120                ; in dist/(sec^2)
  LiftDamaged = 80          ; in dist/(sec^2)
  Braking = 30              ; in dist/(sec^2)
  MinTurnSpeed = 90         ; in dist/sec
  PreferredHeight = -1      ; nonzero, so we go as low as possible
  PreferredHeightDamping = 0.7 ; so that we gradually adjust our height
  SpeedLimitZ = 5          ; max speed we want to try to fall
  AllowAirborneMotiveForce = Yes
  ZAxisBehavior = SURFACE_RELATIVE_HEIGHT
  CirclingRadius = -150 ; the radius at which we circle when we are trying to maintain position.
                        ; (pos = clockwise, neg = ccw, 0 = calc smallest possible radius given our speed, turning, etc)
  Appearance = WINGS

  PitchInDirectionOfZVelFactor  = 1.0    ;  how much to pitch according to our z-vel. 0=none, 1=lots (0=default)
  PitchStiffness                = 0.5    ;  stiffness of the "springs" in the suspension forward & back.
  RollStiffness                 = 0.4    ;  stiffness of the "springs" in the suspension side to side.
  PitchDamping                  = 0.9    ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  RollDamping                   = 0.8    ;  How fast it damps.  0=perfect spring, bounces forever.  1=glued to terrain.
  ForwardVelocityPitchFactor    = 0      ;  How much velocity will cause the front to lift/dip
  LateralVelocityRollFactor     = 0.2    ;  How much cornering will cause the chassis to roll.
  Apply2DFrictionWhenAirborne   = Yes
  AirborneTargetingHeight       = 30
  LocomotorWorksWhenDead        = No

  CloseEnoughDist   = 10
  CloseEnoughDist3D = Yes
  AirborneTargetingHeight = 30
End

;------------------------------------------------------------------------------
Locomotor P3iBATBombLocomotor
  Surfaces = AIR
  Speed = 65              ; in dist/sec
  MinSpeed = 60            ; in dist/sec. (THRUST items must have nonzero minspeeds!)
  Acceleration = 150       ; in dist/(sec^2)
  Braking = 0              ; in dist/(sec^2)
  TurnRate = 540           ; in degrees/sec
  MaxThrustAngle = 45      ; in degrees (NOT degrees/sec)
  AllowAirborneMotiveForce = Yes
  Appearance = THRUST
  CloseEnoughDist3D = Yes   ; This allows the parachute to fly over the target and come back
  AirborneTargetingHeight = 30
End

;------------------------------------------------------------------------------

Object P3iBATbomb

  SelectPortrait = P3iBAT
  ButtonImage    = P3iBAT

  ; *** ART Parameters ***
  UpgradeCameo1 = Upgrade_AmericaCountermeasures

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = P3iBAT ;subobject WINGS to be hidden during launch
      ParticleSysBone = ENGINE01 JetContrailThin
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = DAMAGED
      Model = P3iBAT_d
      ParticleSysBone = Engine01 JetBlackTrailThin
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = P3iBAT_e
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ParticleSysBone = HOUSECOLOR02 LiveWireSparks02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = RUBBLE
      Model = P3iBAT_e
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ParticleSysBone = HOUSECOLOR02 JetExplosionTrailDebris
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM

  TransportSlotCount = 1

  ArmorSet
    Conditions    = None
    Armor         = SpectreGunshipArmor
    DamageFX      = None
  End

  ArmorSet
    Conditions    = PLAYER_UPGRADE
    Armor         = CountermeasuresSpectreGunshipArmor
    DamageFX      = None
  End

  WeaponSet
    Conditions = None
    Weapon            = PRIMARY   P3iBATseekerWeapon
    Weapon            = SECONDARY P3iBATTargetDesignator
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    AutoChooseSources = SECONDARY FROM_PLAYER FROM_SCRIPT FROM_AI
  End

  VisionRange = 200.0
  ShroudClearingRange = 300
  ExperienceValue = 10 10 10 10

  CommandSet = ChinaJetMIGCommandSet

  ; *** AUDIO Parameters ***
  SoundFallingFromPlane = HumveeExit ;DaisyCutterWeapon
  VoiceAttack           = SentryDroneVoiceMove ;ComancheMissileWeapon
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  SoundMoveStart        = BattleDroneVoiceCreate
  SoundMoveStartDamaged = BattleDroneVoiceCreate
  ;SoundMoveLoop         = MigAmbientLoop
  UnitSpecificSounds
    VoiceCreate         = RangerFlashBangWeapon ;SentryDroneVoiceSelect
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = SentryDroneVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  EnterGuard = Yes
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE AIRCRAFT EMP_HARDENED SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150.0
    InitialHealth   = 150.0
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass                  = 500.0 ;75.0
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    VehicleCrashesIntoBuildingWeaponTemplate = SuicideWeapon
    VehicleCrashesIntoNonBuildingWeaponTemplate = SuicideWeapon
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = Yes
  End

  Behavior = JetAIUpdate ModuleTag_05
    MinHeight                     = 4 ;dies at this height
    NeedsRunway                   = No
    KeepsParkingSpaceWhenAirborne = No
    AttackLocomotorType        = SET_SUPERSONIC
    AttackLocomotorPersistTime = 100
    ReturnForAmmoLocomotorType = SET_NORMAL
    ;ReturnToBaseIdleTime       = 8000 ;circle for 8 sec then return to origin

    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      MinPhysicalPitch = -80
      AllowsPitch      = Yes
      ControlledWeaponSlots = SECONDARY ;PRIMARY
    End

    AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End
  Locomotor = SET_NORMAL     P3iBATParachuteLocomotor
  Locomotor = SET_SUPERSONIC P3iBATBombLocomotor

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 3.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 250
  End

  Behavior = LifetimeUpdate ModuleTag_07
    MinLifetime = 20000
    MaxLifetime = 25000
  End

; ---- begin Projectile death behaviors

  Behavior = SlowDeathBehavior DeathModuleTag_01
    DeathTypes = NONE +SUICIDED +NORMAL ;normal when it crashes into ground
    DestructionDelay = 70
    Weapon  = INITIAL BATwarheadWeapon
    OCL     = FINAL   OCL_FireFieldUpgradedSmall ;OCL_FireFieldSmall
    Weapon  = FINAL   M85AntiStructureBlast
  End

  Behavior                          = JetSlowDeathBehavior DeathModuleTag_02
    DeathTypes = ALL -SUICIDED -NORMAL ;shot down
    FXOnGroundDeath                 = FX_AmericaScoutDroneExplode
    OCLOnGroundDeath                = OCL_AmericaScoutDroneExplode
    DestructionDelay                = 5000 ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 96% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.05
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MIGDamageTransition
    ;DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    ;FXSecondary                     = FX_JetDeathSecondary
    ;OCLSecondary                    = OCL_RaptorDeathSecondary
    FXHitGround                     = FX_DamageSmallTankStruck
    ;OCLHitGround                    = OCL_RaptorDeathHitGround
    DelayFinalBlowUpFromHitGround   = 35 ;in milliseconds
    FXFinalBlowUp                   = FX_AmericaScoutDroneExplode
    OCLFinalBlowUp                  = OCL_AmericaScoutDroneExplode
  End

; ---- end Projectile death behaviors

  Behavior = ArmorUpgrade ModuleTag_Armor
    TriggeredBy = Upgrade_AmericaCountermeasures Upgrade_ChinaAircraftArmor
  End

  Geometry = Box
  GeometryMajorRadius = 3.64
  GeometryMinorRadius = 1.3
  GeometryHeight      = 1.3
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

Object P3iBATprojectile ;initially launched projectile version

  SelectPortrait = P3iBAT
  ButtonImage    = P3iBAT

  ; *** ART Parameters ***
  ;UpgradeCameo1 = Upgrade_AmericaCountermeasures

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = P3iBAT
      HideSubObject   = WINGS
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = DAMAGED
      Model = P3iBAT_d
      HideSubObject   = WINGS
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = P3iBAT_e
      HideSubObject   = WINGS
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ParticleSysBone = HOUSECOLOR02 LiveWireSparks02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

    ConditionState = RUBBLE
      Model = P3iBAT_e
      HideSubObject   = WINGS
      ParticleSysBone = Engine01 JetEngineDamagedSmoke
      ParticleSysBone = HOUSECOLOR02 JetExplosionTrailDebris
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM

  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = ProjectileArmor
    DamageFX   = None
  End

  VisionRange = 200.0
  ShroudClearingRange = 300
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  SoundFallingFromPlane = HumveeExit ;DaisyCutterWeapon
  VoiceAttack           = SentryDroneVoiceMove ;ComancheMissileWeapon
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  SoundMoveStart        = BattleDroneVoiceCreate
  SoundMoveStartDamaged = BattleDroneVoiceCreate
  ;SoundMoveLoop         = MigAmbientLoop
  UnitSpecificSounds
    VoiceCreate         = RangerFlashBangWeapon ;SentryDroneVoiceSelect
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = SentryDroneVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150.0
    InitialHealth   = 150.0
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = PhysicsBehavior ModuleTag_04
    Mass                  = 500.0 ;75.0
    AerodynamicFriction   = 0.1 ; this is now friction-per-sec
    ForwardFriction       = 0.1
    CenterOfMassOffset    = 2   ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    VehicleCrashesIntoBuildingWeaponTemplate = SuicideWeapon
    VehicleCrashesIntoNonBuildingWeaponTemplate = SuicideWeapon
    KillWhenRestingOnGround = Yes
  End

  Behavior = MissileAIUpdate ModuleTag_AIup
    TryToFollowTarget = No
    InitialVelocity   = 125
    IgnitionDelay     = 40
    FuelLifetime      = 700
    DetonateOnNoFuel  = Yes
    DetonateCallsKill = Yes
    DistanceToTravelBeforeTurning = 5
    DistanceToTargetBeforeDiving  = 10
  End
  Locomotor = SET_NORMAL B52Locomotor

; ---- begin Projectile death behaviors

  Behavior = DestroyDie DeathModuleTag_01
    DeathTypes = ALL -EXPLODED -LASERED
  End
  Behavior = CreateObjectDie DeathModuleTag_02
    DeathTypes = ALL -EXPLODED -LASERED
    CreationList = OCL_P3iBATbomb
    TransferPreviousHealth = Yes
  End

  Behavior = InstantDeathBehavior DeathModuleTag_03
    DeathTypes = NONE +EXPLODED +LASERED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_GenericMissileDisintegrate
  End

; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 3.64
  GeometryMinorRadius = 1.3
  GeometryHeight      = 1.3
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------

Object ATACMS_BATdispenser  ;this fires the weapon that scatters the BAT bombs

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = ATACMS_Lnch
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
    End

    ConditionState = DAMAGED
      Model = ATACMS_LnchD
      ParticleSysBone = Engine01 JetBlackTrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = ATACMS_LnchE
      ParticleSysBone = Engine01 JetSmoke
    End

    ConditionState = RUBBLE
      Model = ATACMS_LnchE
      ParticleSysBone = Engine01 JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY BATScatterWeapon
  End

  VisionRange = 200.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE CAN_ATTACK SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400.0
    InitialHealth   = 400.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
  End
  Locomotor = SET_NORMAL None ;M30DPICMdispenserLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = Yes
  End

  Behavior = FireWeaponUpdate ModuleTag_06
    Weapon = BATScatterWeapon
  End

  Behavior = LifetimeUpdate ModuleTag_07
    MinLifetime = 800
    MaxLifetime = 800
  End

; ---- begin Projectile death behaviors

  Behavior = SlowDeathBehavior DeathModuleTag_01
    DeathTypes = ALL
    SinkDelay        = 4000
    SinkRate         = 0.5   ;in Dist/Sec
    DestructionDelay = 8000
    FlingForce          = 70
    FlingForceVariance  = 20
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End

; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.73
  GeometryMinorRadius = 1.71
  GeometryHeight      = 1.71
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;ATACMS missile dispensing BAT bombs
;------------------------------------------------------------------------------

Object ATACMS_BAT ;ATACMS rocket fired from M270 vehicle, submunition version

  SelectPortrait = XM31rkt
  ButtonImage    = XM31rkt

  ;UpgradeCameo1 = 
  ;UpgradeCameo2 = 

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = ATACMS_m
      ParticleSysBone = Engine01 ATACMSExhaust ;needed if using dumb proj behav since it wont use weapon.ini exhaust system
    End

    ConditionState = DAMAGED
      Model = ATACMS_mD
      ParticleSysBone = Engine01 JetBlackTrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = ATACMS_mE
      ParticleSysBone = Engine01 JetSmoke
    End

    ConditionState = RUBBLE
      Model = M30_md3_tail
      ParticleSysBone = None JetExplosionTrailDebris
    End

  End

  ; ***DESIGN parameters ***
  DisplayName     = OBJECT:Missile
  Side            = AmericaSuperWeaponGeneral
  EditorSorting   = SYSTEM
  TransportSlotCount = 1

  ArmorSet
    Conditions = None
    Armor      = BallisticMissileArmor
    DamageFX   = None
  End

  VisionRange = 180.0
  ShroudClearingRange = 200
  ExperienceValue = 10 10 10 10

  ; *** AUDIO Parameters ***
  ;SoundFallingFromPlane = DaisyCutterWeapon
  ;SoundMoveLoop = MigAmbientLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority = LOCAL_UNIT_ONLY ;not on enemy radar
  KindOf = PRELOAD CAN_CAST_REFLECTIONS PROJECTILE BALLISTIC_MISSILE SALVAGER ;EMP_HARDENED

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 400.0
    InitialHealth   = 400.0
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = DumbProjectileBehavior ModuleTag_03
    MaxLifespan                     = 20000
    OrientToFlightPath              = Yes
    FirstHeight                     = 200
    SecondHeight                    = 400
    FirstPercentIndent              = 20% ;30% ;20 90 for inferno cannon
    SecondPercentIndent             = 98% ;70%
    DetonateCallsKill               = Yes
    FlightPathAdjustDistPerSecond   = 70 ;speed of target it can track, 120 combat bike ;90 rocket buggy and technical; 60 humvee
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass                  = 500.0 ;75.0
    ShockResistance       = 0.8
    AerodynamicFriction   = 0.2  ; this is now friction-per-sec
    CenterOfMassOffset    = 2    ; Default of 0 means nothing tips as it falls.  Positive tips forward, negative tips back
    AllowBouncing = Yes
    AllowCollideForce = Yes
    KillWhenRestingOnGround = No ;Yes
  End

  Behavior = HeightDieUpdate ModuleTag_06
    TargetHeight = 150.0
    TargetHeightIncludesStructures = No
    OnlyWhenMovingDown = Yes
    InitialDelay = 1000
  End

; ---- begin Projectile death behaviors
  Behavior = InstantDeathBehavior DeathModuleTag_01
    DeathTypes = ALL -EXPLODED -LASERED
    FX = FX_ClusterBombOpen
  End
  Behavior = CreateObjectDie DeathModuleTag_03
    DeathTypes = ALL -EXPLODED -LASERED
    CreationList = OCL_ATACMS_BATdispenser
    TransferPreviousHealth = Yes
  End

  Behavior = InstantDeathBehavior DeathModuleTag_02
    DeathTypes = NONE +EXPLODED +LASERED ;ie shot down
    FX  = FX_GenericMissileDeath
    OCL = OCL_ATACMSDisintegrate
  End
; ---- end Projectile death behaviors

  Geometry = Box
  GeometryMajorRadius = 10.73
  GeometryMinorRadius = 1.71
  GeometryHeight      = 1.71
  GeometryIsSmall     = Yes
  Shadow      = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------

Object CINE_AmericaVehcileMLRS ;starts with ATACMS

  ; *** ART Parameters ***
  SelectPortrait = MLRS_L
  ButtonImage    = MLRS
  
  UpgradeCameo1 = Upgrade_AmericaScoutDrone
  UpgradeCameo2 = Upgrade_AmericaBattleDrone
  UpgradeCameo3 = Upgrade_AmericaHellfireDrone
  UpgradeCameo4 = Upgrade_AmericaAdvancedTraining
  UpgradeCameo5 = Upgrade_ATACMS
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A PREATTACK_B FIRING_B BETWEEN_FIRING_SHOTS_B RELOADING_B PREATTACK_C FIRING_C BETWEEN_FIRING_SHOTS_C RELOADING_C

    DefaultConditionState
      Model            = AVM270
      Turret           = TURRET
      TurretPitch      = TURRETEL ;not used, deploy animation fixes it at 55 degrees pitch up
      WeaponFireFXBone = PRIMARY   Muzzle
      WeaponLaunchBone = PRIMARY   WeaponA
      WeaponFireFXBone = SECONDARY Muzzle
      WeaponLaunchBone = SECONDARY WeaponA
      WeaponFireFXBone = TERTIARY  Muzzle
      WeaponLaunchBone = TERTIARY  WeaponA
    End

    ConditionState     = DAMAGED
      Model            = AVM270_d
    End

    ConditionState     = REALLYDAMAGED
      Model            = AVM270_e
    End

    ConditionState    = RUBBLE
      Model           = AVM270_e
      HideSubObject   = None
      ShowSubObject   = TURRET
      ParticleSysBone = Smoke01 FireFactionSmall
      ParticleSysBone = Smoke02 FireSmallContinuous
      ParticleSysBone = Smoke03 SmokeFactionSmall
      ParticleSysBone = Smoke04 TankSmoke
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 3.0 ;amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:MLRS
  Side = AmericaSuperWeaponGeneral

  EditorSorting   = VEHICLE
  TransportSlotCount = 5   ;how many "slots" we take in a transport (0 == not transportable)

  BuildCost       = 1800
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 600
  ShroudClearingRange = 600

  Prerequisites
    Object = SupW_AmericaStrategyCenter AmericaStrategyCenter ;Lazr_AmericaStrategyCenter
  End

  ExperienceValue = 50 100 200 400     ;Experience point value at each level
  ExperienceRequired = 0 400 600 1000  ;Experience points needed to gain each level
  IsTrainable = Yes
  CrusherLevel    = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel  = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  
  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY   ATACMSunitaryWeapon 
    Weapon = SECONDARY ATACMSsubmunitionWeapon
    Weapon = TERTIARY  ATACMSBATWeapon
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    AutoChooseSources = TERTIARY  FROM_SCRIPT FROM_AI
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  CommandSet = AmericaVehicleMLRSCommandSetUpgraded

  ; *** AUDIO Parameters ***
  VoiceSelect = MLRSVoiceSelect
  VoiceMove = MLRSVoiceMove
  VoiceGuard = MLRSVoiceCreate
  VoiceAttack = MLRSVoiceAttack
  SoundMoveStart = BattleMasterTankMoveStart
  SoundMoveStartDamaged = BattleMasterTankMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    VoiceCreate = MLRSVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoopLoud
    SoundEject = PilotSoundEject
    VoiceEject = PilotVoiceEject
    VoiceCrush = TomahawkVoiceCrush
    VoiceEnter = MLRSVoiceCreate
    VoiceBombard = MLRSVoiceAttack
    Deploy   = NukeCannonDeploy
    Undeploy = NukeCannonUnDeploy
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE DONT_AUTO_CRUSH_INFANTRY CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE HUGE_VEHICLE SCORE SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = ProductionUpdate ModuleTag_24
    MaxQueueEntries = 3; So you can't build multiple upgrades in the same frame
  End

  Behavior = DeployStyleAIUpdate ModuleTag_03
    Turret
      TurretTurnRate        = 80
      TurretPitchRate       = 80
      FirePitch             = 55  ;max is 56 for hydraulic jack arm to not come out
      AllowsPitch           = Yes
      RecenterTime          = 5000  ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
    PackTime = 2000
    UnpackTime = 2000
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = No ;Yes
  End
  Locomotor = SET_NORMAL BattleMasterLocomotor ;TomahawkLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

;  Behavior = TransportContain  ModuleTag_05
;    PassengersAllowedToFire = Yes
;    Slots                   = 3
;    HealthRegen%PerSec      = 10
;    DamagePercentToUnits    = 100%
;    BurnedDeathToUnits      = Yes
;    AllowInsideKindOf       = INFANTRY
;    ExitDelay               = 250
;    NumberOfExitPaths       = 2
;    GoAggressiveOnExit      = Yes
;    ScatterNearbyOnExit     = No
;  End

  Behavior = ObjectCreationUpgrade ModuleTag_234325
    UpgradeObject = OCL_AmericanBattleDrone
    TriggeredBy   = Upgrade_AmericaBattleDrone
    ConflictsWith = Upgrade_AmericaScoutDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_07
    UpgradeObject = OCL_AmericanScoutDrone
    TriggeredBy   = Upgrade_AmericaScoutDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaHellfireDrone
  End
  Behavior = ObjectCreationUpgrade ModuleTag_08
    UpgradeObject = OCL_AmericanHellfireDrone
    TriggeredBy   = Upgrade_AmericaHellfireDrone
    ConflictsWith = Upgrade_AmericaBattleDrone Upgrade_AmericaScoutDrone
  End

  Behavior = ProductionUpdate ModuleTag_09
    ;MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ExperienceScalarUpgrade ModuleTag_10
    TriggeredBy = Upgrade_AmericaAdvancedTraining
    AddXPScalar = 1.0 ;Increases experience gained by an additional 100%
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    DeathTypes = ALL -CRUSHED -SPLATTED
    SinkDelay        = 3000
    SinkRate         = 1.25     ; in Dist/Sec
    DestructionDelay = 15000
    DestructionDelayVariance = 200
    FX  = INITIAL  FX_DragonNapalmSpill
    FX =  MIDPOINT FX_OverlordExplosionOneFinal
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    SinkDelay        = 3000
    SinkRate         = 1.25     ; in Dist/Sec
    DestructionDelay = 15000
    DestructionDelayVariance = 200
    FX  = INITIAL  FX_CarCrush
    FX =  MIDPOINT FX_OverlordExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
  End

  Behavior = EjectPilotDie ModuleTag_15
    DeathTypes = ALL
    ExemptStatus = HIJACKED
    VeterancyLevels = ALL -REGULAR ;only vet+ gives pilot
    GroundCreationList = OCL_EjectPilotOnGround
    AirCreationList = OCL_EjectPilotViaParachute
  End
  
  Behavior = TransitionDamageFX ModuleTag_16
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = LockWeaponCreate ModuleTag_18
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Geometry = BOX
  GeometryMajorRadius = 19.2
  GeometryMinorRadius = 8.54
  GeometryHeight      = 15.1
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End
