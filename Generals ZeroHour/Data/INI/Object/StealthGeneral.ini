;-------------------------------------------------------------------------------------------------------------------------------
Object Slth_GLA_HeavyTankT-72Reb ;Slth_GLAVehicleBattleBus ;ВСЕГО ТРИ МОДЕЛИ: UVT-72 и UVT-72_d + модель крушения: UVT-72_d1

  ; *** ART Parameters ***

  SelectPortrait         = SUT-72Reb_L
  ButtonImage            = SUT-72Reb
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle
  
  Draw = W3DTankDraw ModuleTag_01

    ProjectileBoneFeedbackEnabledSlots = TERTIARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
    DefaultConditionState
      Model               = UVT-72
      Turret              = Turret
      WeaponFireFXBone    = PRIMARY MUZZLEFX01
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MUZZLEFX01
      WeaponLaunchBone    = PRIMARY MUZZLE01

      WeaponFireFXBone    = SECONDARY MUZZLE02
      ;WeaponRecoilBone    = SECONDARY TURRET
      WeaponMuzzleFlash   = SECONDARY MUZZLEFX02
      ;WeaponLaunchBone    = SECONDARY MuzzleFX

      WeaponFireFXBone = TERTIARY WEAPONA
      WeaponLaunchBone = TERTIARY WEAPONA

      HideSubObject = ARMOR WEAPONARock02 WEAPONARock01 WEAPONARock03
    End
    ConditionState       = REALLYDAMAGED
      Model              = UVT-72_d
    End
    ConditionState       = RUBBLE
      Model              = UVT-72_d
    End

; ------------ With big turret  
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE ; one or two crates is a turret switch
      ShowSubObject = ARMOR ;WEAPONARock02
      HideSubObject = WEAPONARock01 WEAPONARock02 WEAPONARock03
    End
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO ; one or two crates is a turret switch
      ShowSubObject = ARMOR ;WEAPONARock02 WEAPONARock02
      HideSubObject = WEAPONARock01 WEAPONARock02 WEAPONARock03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVT-72_d
      ShowSubObject = ARMOR
      HideSubObject = WEAPONARock01 WEAPONARock02 WEAPONARock03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED

; ---------- With missile
    ConditionState = WEAPONSET_PLAYER_UPGRADE
      ShowSubObject = WEAPONARock01
      HideSubObject = WEAPONARock02 WEAPONARock03 ;ARMOR
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVT-72_d
      ShowSubObject = WEAPONARock01
      HideSubObject = WEAPONARock02 WEAPONARock03 ;ARMOR
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

; ---------- With missile and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = WEAPONARock01 WEAPONARock02 ;ARMOR
      HideSubObject = WEAPONARock03 
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVT-72_d
      ShowSubObject = WEAPONARock01 WEAPONARock02 ;ARMOR
      HideSubObject = WEAPONARock03 
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

; ---------- With two missiles and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVT-72_d
      WeaponFireFXBone = TERTIARY WEAPONARock
      WeaponLaunchBone = TERTIARY WEAPONARock
    End

    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
    OkToChangeModelColor = Yes
  End


  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:T-72Reb
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 6;4                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange     = 125
  ShroudClearingRange = 300
;---------------------------
  BuildCost = 2500
  BuildTime = 25.0
;---------------------------------
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
;-----------------------------------------
  ExperienceValue    = 100 100 200 300   ;Experience point value at each level
  ExperienceRequired = 0 200 300 600     ;Experience points needed to gain each level
  IsTrainable        = Yes               ;Can gain experience
  CrusherLevel       = 2                 ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2                 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLATankMarauderCommandSet ;GLATankT-90CommandSet
;==========================================================================================
  WeaponSet
    Conditions = None
    Weapon           = PRIMARY  T-80TankGun    ;CameleonMachineGun ;TankMachinegun
    Weapon           = SECONDARY T-80MachineGun ;M1A1TankGun
    PreferredAgainst = SECONDARY INFANTRY
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon           = PRIMARY  T-80TankGunPlusOne    ;CameleonMachineGun ;TankMachinegun
    Weapon           = SECONDARY T-80MachineGunPlusOne ;M1A1TankGun
    PreferredAgainst = SECONDARY INFANTRY
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon           = PRIMARY  T-80TankGunPlusTwo    ;CameleonMachineGun ;TankMachinegun
    Weapon           = SECONDARY T-80MachineGunPlusTwo ;M1A1TankGun
    PreferredAgainst = SECONDARY INFANTRY
  End
;==========================================================================================
  ArmorSet
    Conditions = None
    Armor      = TankArmor
    DamageFX   = TankDamageFX
  End


  ; *** AUDIO Parameters ***
  VoiceSelect = SandKingTankVoiceSelect
  VoiceMove = SandKingTankVoiceMove
  VoiceGuard = SandKingTankVoiceMove
  VoiceAttack = SandKingTankVoiceAttack
  SoundMoveStart = MarauderTankMoveStart
  SoundMoveStartDamaged = MarauderTankMoveStart
 ;-----------------------------
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
 ;-----------------------------
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = SandKingTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceSalvage = SandKingTankVoiceSalvage
    VoiceCrush = SandKingTankVoiceCrush
    VoiceEnter = SandKingTankVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 950.0
    InitialHealth   = 950.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 860
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
;=======================================================================
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 180 ;[60]* ;[Угловая скорость вращения башенки/угловая скорость вращения,в степенях всекунду]
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
;=======================================================================
  Locomotor = SET_NORMAL MarauderLocomotor ;ScorpionLocomotor
;=======================================================================
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
;=======================================================================
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 10
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
;=======================================================================
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 25;50;[25]*
    DestructionDelay = 200;2000;[200]*
    DestructionDelayVariance = 100;300;[100]*
    FX  = INITIAL  FX_CrusaderCatchFire ;<======================[ВПИЛ-ТЕСТ]
    OCL = FINAL    OCL_T-72TankDeathEffect ;<===================[МОДЕЛЬ КРУШЕНИЯ в Object DeadT-72Hulk]№№№№№№№№№№ UVT-72_d1 (3)
    FX  = FINAL    FX_BattleMasterExplosionOneFinal ;<==========[Этого добра полно и в 9.0-9.1]
  End
;============================================================================================
  Behavior = WeaponSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAScorpionRocket
  End
;---------------------------------------------------
  Behavior = CreateCrateDie ModuleTag_08
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = TransitionDamageFX ModuleTag_12
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000       ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3      ; taking this much damage...
    AflameDamageDelay = 500     ; this often.
  End
;--------------------------------------------------------;№№№№№№№№
  Behavior = StealthUpgrade ModuleTag_SUALMJ1 ;_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;-------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUALMJ2 ;_10
    StealthDelay               = 2500 ; msec
    StealthForbiddenConditions = MOVING ATTACKING USING_ABILITY TAKING_DAMAGE ;[НЕВИДИМ КОГДА НЕ ДВИГАЕТСЯ И НЕ СТРЕЛЯЕТ]
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;--------------------------------------------------------;№№№№№№№№
  Behavior = ProductionUpdate ModuleTag_000
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Geometry = BOX
  GeometryMajorRadius = 20.0 ;[16.0]*
  GeometryMinorRadius = 12.0 ;[11.0]*
  GeometryHeight      = 10.5 ;[10.0]*
  GeometryIsSmall = Yes
  Scale = 1.12;[1.1]*
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length


End

;------------------------------------------------------------------------------
Object Slth_GLATankMedium

  ; *** ART Parameters ***
  SelectPortrait         = СреднийТанк
  ButtonImage            = СреднийТанк

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle
  UpgradeCameo3 = Upgrade_GLAAPRockets
  ;UpgradeCameo4 = Demo_Upgrade_SuicideBomb
  ;UpgradeCameo5 = Upgrade_GLAScorpionRocket

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

; ------------ Normal
    DefaultConditionState
      Model = UVScorpion
      Turret = Turret01 ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ; note, order-dependent: we must hide/show Missile AFTER we hide/show MissileRack!
      ShowSubObject = Turret01 MissileRack Barrel01 Barrel02
      HideSubObject = Turret02 Barrel03 Barrel04 Barrel05 MissileRack02 WeaponA02 WeaponA03; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = UVScorpion_d
    End
    AliasConditionState = RUBBLE

; ---------- With missile
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVScorpion
      Turret = Turret02 ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ShowSubObject = MissileRack Barrel03 Turret02 Barrel04 Barrel05
      HideSubObject = MissileRack02 Turret01 Barrel01 Barrel02 WeaponA02 WeaponA03; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVScorpion_d
      Turret = Turret02 ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ShowSubObject = MissileRack Barrel03 Turret02 Barrel04 Barrel05
      HideSubObject = MissileRack02 Turret01 Barrel01 Barrel02 WeaponA02 WeaponA03; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVScorpion
      Turret = Turret02 ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ShowSubObject = MissileRack MissileRack02 WeaponA02 WeaponA03 Turret02 Barrel03 Barrel04 Barrel05
      HideSubObject = Turret01 Barrel01 Barrel02; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVScorpion_d
      Turret = Turret02 ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ShowSubObject = MissileRack MissileRack02 WeaponA02 WeaponA03 Turret02 Barrel03 Barrel04 Barrel05
      HideSubObject = Turret01 Barrel01 Barrel02; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = SECONDARY WeaponA
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:MediumTank
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY MediumTankGun
    Weapon = SECONDARY REDScorpionMissileWeapon
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY MediumTankGunPlusOne
    Weapon = SECONDARY REDScorpionMissileWeapon
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY NONE
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY MediumTankGunPlusOne
    Weapon = SECONDARY REDScorpionMissileWeapon2
    Weapon = TERTIARY TerroristSuicideNotARealWeapon
    AutoChooseSources = TERTIARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1200
  BuildTime       = 15.0 ;[12.0]*  ;in seconds
  VisionRange     = 125
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
  ExperienceValue = 60 60 120 200    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLATankMediumCommandSet; GLATankMarauderCommandSet 

  ; *** AUDIO Parameters ***
  VoiceSelect = ScorpionTankVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceAttack = ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = ScorpionTankVoiceMove
 ;-----------------------------
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
 ;-----------------------------
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = ScorpionTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = ScorpionTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 510.0
    InitialHealth   = 510.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 740
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 100
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY ;SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL MediumLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 5
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_0116
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_MediumTankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

   Behavior = TransportContain ModuleTag_16
    Slots = 2
    AllowInsideKindOf   = INFANTRY
    DamagePercentToUnits = 10%
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
   End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +SUICIDED +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TerroristExplode
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = StealthUpgrade ModuleTag_SUALMJ1
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;---------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUALMJ2
    StealthDelay               = 2500 ; msec
    StealthForbiddenConditions = MOVING ATTACKING USING_ABILITY TAKING_DAMAGE ;[НЕВИДИМ КОГДА НЕ ДВИГАЕТСЯ И НЕ СТРЕЛЯЕТ]
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = ProductionUpdate ModuleTag_000
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End
  
  ; Behavior = FireWeaponWhenDeadBehavior ModuleTag_George
    ; DeathWeapon   = Demo_SuicideDynamitePackPlusFire
    ; StartsActive  = No
    ; TriggeredBy   = Demo_Upgrade_SuicideBomb
    ; DeathTypes = ALL
  ; End;

  ; Behavior = FireWeaponWhenDeadBehavior ModuleTag_Bob
    ; DeathWeapon   = Demo_SuicideDynamitePackPlusFire
    ; StartsActive  = No
    ; TriggeredBy   = Demo_Upgrade_SuicideBomb
    ; DeathTypes = NONE
  ; End

  ; Behavior = CommandSetUpgrade ModuleTag_19
    ; CommandSet = GLATankMediumCommandSetUpgrade
    ; TriggeredBy = Demo_Upgrade_SuicideBomb
  ; End

  Geometry = BOX
  GeometryMajorRadius = 17.5
  GeometryMinorRadius = 10.0
  GeometryHeight = 5.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  Scale       = 1.1
End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleSpyDrone

  ; *** ART Parameters ***
  SelectPortrait         = GLAScout
  ButtonImage            = GLAScout
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVSDron
      Animation                       = UVSDron.UVSDron
      AnimationMode                   = LOOP
    End

    ConditionState = REALLYDAMAGED
      Model = UVSDron_d
      Animation                       = UVSDron_d.UVSDron_d
      AnimationMode                   = LOOP
    End
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GLAVehicleSpyDrone
  EditorSorting       = VEHICLE
  Side                = GLAStealthGeneral ;Militia ;GLA
  TransportSlotCount  = 0      ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange         = 400.0 
  ShroudClearingRange = 600 ;[500]*
  ArmorSet
    Conditions = None
    Armor      = AttackDroneArmor
    DamageFX   = None
  End
  Prerequisites
    Object = Slth_GLAAirfield ;MilitiaAirfield
    Object = Slth_GLAPalace   ;MilitiaResistanceHQ ;;GLAPalace
  End
  BuildCost = 2000 ;[300]*
  BuildTime = 25.0 ;[5.0]*  ;in seconds
 ;---------------------------
  MaxSimultaneousOfType = 2
 ;---------------------------
  EnergyProduction = -2
 ;---------------------------
  ExperienceValue    = 35 35 35 35     ; Experience point value at each level
  ExperienceRequired = 500 500 500 500 ; Experience points needed to gain each level
  IsTrainable        = Yes             ; Can gain experience
  CommandSet = DroneGLACommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = SentryDroneVoiceSelect
  VoiceMove             = SentryDroneVoiceMove
  VoiceGuard            = SentryDroneVoiceMove
  VoiceAttack           = SentryDroneVoiceMove
  SoundMoveStart        = SentryDroneMoveStart
  SoundMoveStartDamaged = NoSound
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = HellfireDroneVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NoSound
    VoiceEnter          = NoSound
    Deploy              = NoSound
    Undeploy            = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS SELECTABLE VEHICLE SCORE AIRCRAFT PRODUCED_AT_HELIPAD POWERED HARVESTER
;[HARVESTER - перевод:"Комбайн,уборочная машина"-код для отделения юнита от боевых юнитов.
;Если нажать Q и W - то выделятся все боевые юниты на карта кроме тех у кого имеется код HARVESTER]

  Body = ActiveBody ModuleTag_04
    MaxHealth     = 150.0
    InitialHealth = 150.0
  End
  Behavior = JetAIUpdate ModuleTag_06
    MinHeight                     = 5
    NeedsRunway                   = No
    KeepsParkingSpaceWhenAirborne = No
    AutoAcquireEnemiesWhenIdle    = Yes
    Turret
      TurretTurnRate = 0      ; this "turret" does not turn
      TurretPitchRate = 0     ; nor does it pitch
      ControlledWeaponSlots = PRIMARY 
    End
  End

  Locomotor = SET_PANIC SpectreSpyDroneLocomotor
  Locomotor = SET_NORMAL SpectreSpyDroneOrbitLocomotor

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList = OCL_AmericaBattleDroneExplode
  End
  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End
  Behavior = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX = FX_AmericaBattleDroneExplode
  End
  Behavior = PhysicsBehavior ModuleTag_22
    Mass = 80.0
    KillWhenRestingOnGround = No
    AllowBouncing = No
  End
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000     ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3    ; taking this much damage...
    AflameDamageDelay = 500   ; this often.
  End
  Behavior = AutoHealBehavior ModuleTag_1200
    HealingAmount = 2
    HealingDelay  = 1000 ; msec
    TriggeredBy   = Upgrade_GLAJunkRepair
  End
;-----------------------------------------------------------------------
;  Behavior = StealthDetectorUpdate ModuleTag_0400
;    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
;    ;DetectionRange = ??? ;Dustin, enable this for independant balancing!
;    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
;    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;  End
;-----------------------------------------------------------------------
;  Behavior = GrantUpgradeCreate ModuleTag_1000
;    UpgradeToGrant = Upgrade_GLACamouflage
;  End
;-----------------------------------------------------------------------
  Behavior = StealthUpdate ModuleTag_0700
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;-----------------------------------------------------------------------

  Geometry = CYLINDER
  GeometryMajorRadius = 5
  GeometryMinorRadius = 5
  GeometryHeight = 10.0     
  GeometryIsSmall = Yes 
  Scale = 1.05
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End

;============================[Переделан в Дюнный Багги невидимка]=============================
Object Slth_GLATankScorpion ;[На основе: MilitiaVehicleDuneBuggy]*

  ; *** ART Parameters ***
  SelectPortrait         = SMDunBgy_L
  ButtonImage            = SMDunBgy

  UpgradeCameo1 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = MVBuggy
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED
      Model = MVBuggy_D
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Muzzle
    End

    ConditionState = RUBBLE
      Model = None;MVBuggy_D
      ;WeaponMuzzleFlash = PRIMARY MuzzleFX
      ;WeaponFireFXBone = PRIMARY Muzzle
    End

    TrackMarks = EXTireTrack.tga

    Dust                        = RocketBuggyDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire03
    RightFrontTireBone          = Tire04
    LeftRearTireBone            = Tire01
    RightRearTireBone           = Tire02
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:DuneBuggy
  Side               = GLAStealthGeneral ;[Militia]*
  EditorSorting      = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY DuneBuggyWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End
  BuildCost = 450 ;[PR9.0 - 9.1.1: 400]*
  BuildTime = 5.0 ;[в 9.1.7 - 9.1.19+Fix2 было: 7.0]* ;[PR9.0 - 9.1.1: 6.5]** ;in seconds
  VisionRange     = 180.0
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer ;;MilitiaWarFactory
  End
  ExperienceValue       = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired    = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAVehicleRocketBuggyCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = DuneBuggyVoiceSelect
  VoiceMove = RocketBuggyVoiceMove
  VoiceAttack = RocketBuggyVoiceAttack
  SoundMoveStart = RocketBuggyMoveStart
  SoundMoveStartDamaged = RocketBuggyMoveStart
  VoiceGuard = RocketBuggyVoiceMove
 ;----------------------------------
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
 ;----------------------------------
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = DuneBuggyVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceCrush      = RocketBuggyVoiceCrush
    VoiceEnter = RocketBuggyVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180.0
    InitialHealth   = 180.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
;    Turret
;      TurretTurnRate = 90
;      ControlledWeaponSlots = PRIMARY
;    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL DuneBuggyLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

; The pop up AirDeath
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RocketBuggyAirDeathStart
  End
;-----------------------------------------------------------------------------
  Behavior = StealthUpdate ModuleTag_06
    StealthDelay                = 2500 ;[PR9.0/PR9.1.1: 2000]* ;msec
    StealthForbiddenConditions  = ATTACKING
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyJarmenKellDetected
    OwnDetectionEvaEvent        = OwnJarmenKellDetected
  End
;-----------------------------------------------------------------------------
  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5
  GeometryIsSmall = Yes

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;----------------------------------------------------------------------------------
Object Slth_GLAHole

  ; *** ART Parameters ***
  SelectPortrait           = SUHole_L
  ButtonImage              = SUHole_L

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = UBHole
    End
    ConditionState = DAMAGED
      Model = UBHole_D
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState = REALLYDAMAGED
      Model = UBHole_E
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Fire01 GLAPowerPlantFlame
      ParticleSysBone = Fire02 GLAPowerPlantFlame
      ParticleSysBone = Fire03 GLAPowerPlantFlame
    End
  End
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = UBHole_A1
      Animation = UBHole_A1.UBHole_A1
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED CONSTRUCTION_COMPLETE
      Model = UBHole_A1D
      Animation = UBHole_A1D.UBHole_A1D
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED
      Model = UBHole_A1D
    End
    ConditionState = REALLYDAMAGED
      Model = NONE
    End
  End
     
  PlacementViewAngle       = -135

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:GLAHole
  Side              = GLAStealthGeneral
  EditorSorting     = SYSTEM
  Prerequisites
    Object = Slth_GLACommandCenter
  End
  BuildCost         = 100
  BuildTime         = 5.0           ; in seconds
  EnergyProduction  = 0
  VisionRange       = 50.0           ; Shroud clearing distance
  ShroudClearingRange = 50
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REBUILD_HOLE CAN_SEE_THROUGH_STRUCTURE IMMUNE_TO_CAPTURE SCORE_DESTROY MP_COUNT_FOR_VICTORY
  Body              = StructureBody ModuleTag_03
    ; To set the health for a particular hole, edit the entry in the object
    ; that will leave the hole behind (edit the RebuildHoleExposeDie entry)
    MaxHealth       = 9999999.9  ;bigger than anything realistic we use
    InitialHealth   = 9999999.9  ;bigger than anything realistic we use
  End
  Behavior                    = RebuildHoleBehavior ModuleTag_04
    WorkerObjectName          = GLAInfantryWorkerHole
    WorkerRespawnDelay        = 21000 ;in milliseconds
    HoleHealthRegen%PerSecond = 0.5%    ;regen this % of HoleMaxHealth per second
  End 
  
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureSmallDeath
  End
  
  
  
  Geometry            = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight      = 5.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End






;------------------------------------------------------------------------------
;GLA Command Center
Object Slth_GLACommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS.UBCmdHQS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQS_D
      Animation          = UBCmdHQS_D.UBCmdHQS_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQS_E
      Animation          = UBCmdHQS_E.UBCmdHQS_E
      AnimationMode      = LOOP
    End    
    ConditionState         = GARRISONED
      Model                = UBCmdHQSE
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE.UBCmdHQSE
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQSE_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_D.UBCmdHQSE_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQSE_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_E.UBCmdHQSE_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQS_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_N.UBCmdHQS_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQS_DN
      Animation          = UBCmdHQS_DN.UBCmdHQS_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQS_EN
      Animation          = UBCmdHQS_EN.UBCmdHQS_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQSE_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_N.UBCmdHQSE_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQSE_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_DN.UBCmdHQSE_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQSE_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_EN.UBCmdHQSE_EN
      AnimationMode        = LOOP
    End
    
        ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQS_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_S.UBCmdHQS_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQS_DS
      Animation          = UBCmdHQS_DS.UBCmdHQS_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQS_ES
      Animation          = UBCmdHQS_ES.UBCmdHQS_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQSE_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_S.UBCmdHQSE_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQSE_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_DS.UBCmdHQSE_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQSE_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_ES.UBCmdHQSE_ES
      AnimationMode        = LOOP
    End
    
    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQS_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_NS.UBCmdHQS_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQS_DNS
      Animation          = UBCmdHQS_DNS.UBCmdHQS_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQS_ENS
      Animation          = UBCmdHQS_ENS.UBCmdHQS_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQSE_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_NS.UBCmdHQSE_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQSE_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_DNS.UBCmdHQSE_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQSE_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQSE_ENS.UBCmdHQSE_ENS
      AnimationMode        = LOOP
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQS
      Animation          = UBCmdHQS.UBCmdHQS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQS_D
      Animation          = UBCmdHQS_D.UBCmdHQS_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQS_E
      Animation          = UBCmdHQS_E.UBCmdHQS_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQS_N
      Animation          = UBCmdHQS_N.UBCmdHQS_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQS_DN
      Animation          = UBCmdHQS_DN.UBCmdHQS_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQS_EN
      Animation          = UBCmdHQS_EN.UBCmdHQS_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQS_S
      Animation          = UBCmdHQS_S.UBCmdHQS_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQS_DS
      Animation          = UBCmdHQS_DS.UBCmdHQS_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQS_ES
      Animation          = UBCmdHQS_ES.UBCmdHQS_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQS_NS
      Animation          = UBCmdHQS_NS.UBCmdHQS_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQS_DNS
      Animation          = UBCmdHQS_DNS.UBCmdHQS_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQS_ENS
      Animation          = UBCmdHQS_ENS.UBCmdHQS_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  PlacementViewAngle = -135

  ; ------------ construction done flashing lights ----------
;  Draw = W3DModelDraw
;    DefaultConditionState
;      Model           = None
;    End
;    ConditionState    = SOLD
;      Model           = NONE
;    End    
;    ConditionState    = CONSTRUCTION_COMPLETE
;      Model           = ABWarFact_A2
;      Animation       = ABWarFact_A2.ABWarFact_A2
;      AnimationMode   = LOOP
;      Flags           = START_FRAME_FIRST
;    End  
;  End
    
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBComCtrC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBComCtrC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBComCtrC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBComCtrC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBComCtrC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBComCtrC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
 ;------------------------------------------------
  BuildCost        = 2000
  RefundValue      = 10  ;Цена за продажу здания
 ;------------------------------------------------
  BuildTime        = 45.0       ;in seconds
 ;------------------------------------------------
  EnergyProduction    = 0  ;Command center should be free
  CommandSet          = Slth_GLACommandCenterCommandSet
  VisionRange         = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
  ArmorSet
    Conditions        = None
    Armor             = StructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmorTough
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level
 ;-----------------------------
  MaxSimultaneousOfType = 1 ;2 ;№№№№№№№№№№№
 ;-----------------------------

  ; *** AUDIO Parameters ***
  VoiceSelect         = CommandCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE COMMANDCENTER CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 12000.0 ;8000.0 ;5000.0 ;№№№№№№№№№№№
    InitialHealth     = 12000.0 ;8000.0 ;5000.0 ;№№№№№№№№№№№

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = PreorderCreate ModuleTag_PreorderCreate
  End
;=============================================[ТРИ ТЕГА РАДАРА: Теперь спутниковую мини-карту видно стразу со старта игры]=========================
  Behavior = GrantUpgradeCreate ModuleTag_UAR1
    UpgradeToGrant = Upgrade_AmericaRadar
    ExemptStatus   = UNDER_CONSTRUCTION
  End
 ;--------------------------------------------
  Behavior = RadarUpgrade ModuleTag_UAR2
    TriggeredBy = Upgrade_AmericaRadar                   ;[Радар не будет отключён из-за дефицита энергопотребления]№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
    DisableProof  = Yes ; Won't be disabled by power low ;<========[ТЕСТ: Добавил сюда эту строку кода взятую у GLA-шного Радарного фургона]№№№№№№№
  End
 ;--------------------------------------------
  Behavior = RadarUpdate ModuleTag_UAR3
    RadarExtendTime = 4000 ;[Время задержки распространения радара в мсекундах]
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = DefaultProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X: 25.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 65.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;Behavior = RebuildHoleExposeDie ModuleTag_07;;;;
;;;;HoleName = Slth_GLAHoleCommandCenter;;;;;;;;;;
;;;;HoleMaxHealth = 500.0;;;;;;;;;;;;;;;;;;;;;;;;;
;;End;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = DestroyDie ModuleTag_08
    ;nothing
  End  
  Behavior = CreateObjectDie ModuleTag_09
    CreationList = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_StructureMediumDeath
  End

  Behavior           = OCLSpecialPower ModuleTag_11
    SpecialPowerTemplate = SuperweaponRebelAmbush
    UpgradeOCL           = SCIENCE_RebelAmbush3 Slth_SUPERWEAPON_RebelAmbush3
    UpgradeOCL           = SCIENCE_RebelAmbush2 Slth_SUPERWEAPON_RebelAmbush2
    OCL                  = Slth_SUPERWEAPON_RebelAmbush1
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior           = OCLSpecialPower ModuleTag_1751;<=========[Переделан в скилл "Засада Аль-Каиды" (SCIENCE_Rank5)]
    SpecialPowerTemplate = SuperweaponAngryMobAmbush    
    OCL                  = Slth_SUPERWEAPON_AngryMobAmbush
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior           = OCLSpecialPower ModuleTag_261
    SpecialPowerTemplate = SuperweaponTerrorPlane
    OCL                  = SUPERWEAPON_TerrorPlane
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior           = OCLSpecialPower ModuleTag_23
    SpecialPowerTemplate = SuperweaponSubCell
    OCL                  = SUPERWEAPON_SubCell
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End

  Behavior           = OCLSpecialPower ModuleTag_23_2
    SpecialPowerTemplate = SuperweaponFakeCell
    OCL                  = SUPERWEAPON_FakeUnits2
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End
;===============[Засада конвоя (Два китайских грузовика с ЭМИ и ядерной боеголовками)]===================================
  Behavior           = OCLSpecialPower ModuleTag_18
    SpecialPowerTemplate = SuperweaponConvoyAmbush
    OCL                  = SUPERWEAPON_ConvoyAmbush
    CreateLocation       = CREATE_AT_LOCATION
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End

  Behavior           = OCLSpecialPower ModuleTag_13
    SpecialPowerTemplate = SuperweaponAnthraxBomb
    OCL                  = SUPERWEAPON_AnthraxBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End
  Behavior           = OCLSpecialPower ModuleTag_14
    SpecialPowerTemplate = Early_SuperweaponEmergencyRepair
    UpgradeOCL           = Early_SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = Early_SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponSneakAttack
    OCL                  = OCL_CreateSneakAttackTunnelStart
    ReferenceObject      = GLASneakAttackTunnelNetwork ;So we know what the final product is for script placement calculations
    CreateLocation       = CREATE_AT_LOCATION
  End
;=======================================================================
  Behavior           = OCLSpecialPower ModuleTag_22
    SpecialPowerTemplate = Slth_SuperweaponGPSScrambler
    OCL                  = SUPERWEAPON_GPSScrambler
    CreateLocation       = CREATE_AT_LOCATION
  ;;UpgradeOCL = Slth_SCIENCE_GPSScrambler3 SUPERWEAPON_GPSScrambler3
  ;;UpgradeOCL = Slth_SCIENCE_GPSScrambler2 SUPERWEAPON_GPSScrambler2
  End
;=======================================================================
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = CashBountyPower ModuleTag_15
    SpecialPowerTemplate    = SpecialAbilityCashBounty1
    Bounty                  = 10% ;[ 5% ]*
  End
  Behavior = CashBountyPower ModuleTag_16
    SpecialPowerTemplate    = SpecialAbilityCashBounty2
    Bounty                  = 20% ;[ 10% ]*
  End
  Behavior = CashBountyPower ModuleTag_17
    SpecialPowerTemplate    = SpecialAbilityCashBounty3
    Bounty                  = 20%
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
 
  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_24
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

  

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleCommandCenter Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBCmdHQ_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED RUBBLE
      Model                = UBCmdHQ_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
  End
  Draw = W3DModelDraw ModuleTag_0357
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = UBHole_A1
      Animation = UBHole_A1.UBHole_A1
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED CONSTRUCTION_COMPLETE
      Model = UBHole_A1D
      Animation = UBHole_A1D.UBHole_A1D
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED
      Model = UBHole_A1D
    End
    ConditionState = REALLYDAMAGED
      Model = NONE
    End
  End
End

;------------------------------------------------------------------------------
Object Slth_GLAPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = GlaPowerPlan_L
  ButtonImage            = GlaPowerPlan

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  ;day
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState    = NONE
      Model           = UBPwrPlant
      Animation       = UBPwrPlant.UBPwrPlant
      AnimationMode   = LOOP
      ;ParticleSysBone = Smoke01 SteamVent
      ;ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = DAMAGED
      Model           = UBPwrPlant_D
      Animation       = UBPwrPlant_D.UBPwrPlant_D
      AnimationMode   = LOOP
      ;ParticleSysBone = Smoke01 SteamLarge
      ;ParticleSysBone = Smoke02 SteamMedium
      ;ParticleSysBone = Smoke03 SmolderingSmoke
      ;ParticleSysBone = Smoke04 SmolderingSmoke
      ;ParticleSysBone = Smoke05 SmolderingSmoke
      ;ParticleSysBone = Smoke06 FireFactionLarge
      ;ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBPwrPlant_E
      Animation       = UBPwrPlant_E.UBPwrPlant_E
      AnimationMode   = LOOP
      ;ParticleSysBone = Smoke01 SteamVent
      ;ParticleSysBone = Smoke02 SteamVent
      ;ParticleSysBone = Smoke03 SmolderingSmoke
      ;ParticleSysBone = Smoke04 SmolderingSmoke
      ;ParticleSysBone = Smoke05 SmolderingSmoke
      ;ParticleSysBone = Smoke06 SmolderingSmoke
      ;ParticleSysBone = Fire01  SmolderingFire
      ;ParticleSysBone = Fire02  SmolderingFire
      ;ParticleSysBone = Spark01 SparksLarge
      ;ParticleSysBone = Spark02 SparksMedium
      ;ParticleSysBone = Spark03 SparksSmall
      ;ParticleSysBone = Spark04 LiveWireSparks
    End

      ;night
    ConditionState    = NIGHT
      Model           = UBPwrPlant_N
      Animation       = UBPwrPlant_N.UBPwrPlant_N
      AnimationMode   = LOOP
    End
    ConditionState    = NIGHT DAMAGED
      Model           = UBPwrPlant_DN
      Animation       = UBPwrPlant_DN.UBPwrPlant_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBPwrPlant_EN
      Animation       = UBPwrPlant_EN.UBPwrPlant_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks
      ParticleSysBone = Spark03 LiveWireSparks
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPwrPlant
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPwrPlant_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPwrPlant_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPwrPlant_N
      Animation          = UBPwrPlant_N.UBPwrPlant_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPwrPlant_DN
      Animation          = UBPwrPlant_DN.UBPwrPlant_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPwrPlant_EN
      Animation          = UBPwrPlant_EN.UBPwrPlant_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    ;**************************************************************************************************************************

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_020001
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03000001
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPwrPlant_A6
      Animation       = UBPwrPlant_A6.UBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GLAPowerPlant
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1200 ;800
  BuildTime           = 15.0 ;8.0           ; in seconds
;------------------------------
  EnergyProduction    = 8 ;10
 ;;EnergyBonus       = 10
;------------------------------
  VisionRange         = 200.0          ; Shroud clearing distance
  ShroudClearingRange = 200
  Prerequisites
    Object = Slth_GLAPalace ;Slth_GLABlackMarket
   ;;;Science = SCIENCE_PwrPlant
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Slth_GLAPowerPlantCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = NuclearReactorSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_POWER MP_COUNT_FOR_VICTORY

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    InitialHealth     = 1500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_09
    HoleName      = Slth_GLAHolePowerPlant
    HoleMaxHealth = 500.0
  End

;  Behavior = PowerPlantUpgrade ModuleTag_06
;    TriggeredBy = Upgrade_GLAAdv.PowerSupply
;  End

  Behavior                 = DestroyDie ModuleTag_07
    ;nothing
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;=========================================================================
  Behavior = StealthUpdate ModuleStealth_12
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_24
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = CreateObjectDie ModuleTag_08
    CreationList = OCL_GLAPowerPlantDeathFinal
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing, but is required if we have any Object-level Upgrades!
  End
  Behavior = PowerPlantUpdate ModuleTag_11
    RodsExtendTime = 1
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = SlowDeathBehavior ModuleTag_16
    ExemptStatus = UNDER_CONSTRUCTION
;    FX = INITIAL FX_GLAPowerPlantDeathStart
;    FX = FINAL   FX_GLAPowerPlantDeathFinal
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 34.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHolePowerPlant Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBHole_D
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
  End
  Draw = W3DModelDraw ModuleTag_03456
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = UBHole_A1
      Animation = UBHole_A1.UBHole_A1
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED CONSTRUCTION_COMPLETE
      Model = UBHole_A1D
      Animation = UBHole_A1D.UBHole_A1D
      AnimationMode = ONCE
      Flags = START_FRAME_FIRST
    End
    ConditionState = DAMAGED
      Model = UBHole_A1D
    End
    ConditionState = REALLYDAMAGED
      Model = NONE
    End
  End
End

;------------------------------------------------------------------------------
;Fake GLA Command Center
Object Slth_FakeGLACommandCenter

  ; *** ART Parameters ***
  SelectPortrait         = SUHeadquarters_L
  ButtonImage            = SUHeadquarters

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  ; ----- The actual command center
  Draw                   = W3DModelDraw ModuleTag_01
     
    OkToChangeModelColor = Yes
    
    ; day
    ConditionState       = NONE
      Model              = UBCmdHQS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS.UBCmdHQS
      AnimationMode      = LOOP
    End
    
    ConditionState       = DAMAGED
      Model              = UBCmdHQS_D
      Animation          = UBCmdHQS_D.UBCmdHQS_D
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = UBCmdHQS_E
      Animation          = UBCmdHQS_E.UBCmdHQS_E
      AnimationMode      = LOOP
    End    
    ConditionState         = GARRISONED
      Model                = UBCmdHQEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG.UBCmdHQEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBCmdHQEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_D.UBCmdHQEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBCmdHQEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_E.UBCmdHQEG_E
      AnimationMode        = LOOP
    End

    ; night    
    ConditionState       = NIGHT
      Model              = UBCmdHQS_N
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_N.UBCmdHQS_N
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT
      Model              = UBCmdHQS_DN
      Animation          = UBCmdHQS_DN.UBCmdHQS_DN
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = UBCmdHQS_EN
      Animation          = UBCmdHQS_EN.UBCmdHQS_EN
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBCmdHQEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_N.UBCmdHQEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DN.UBCmdHQEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBCmdHQEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_EN.UBCmdHQEG_EN
      AnimationMode        = LOOP
    End
    
        ; day snow
    ConditionState       = SNOW
      Model              = UBCmdHQS_S
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_S.UBCmdHQS_S
      AnimationMode      = LOOP
    End   
    ConditionState       = DAMAGED SNOW
      Model              = UBCmdHQS_DS
      Animation          = UBCmdHQS_DS.UBCmdHQS_DS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = UBCmdHQS_ES
      Animation          = UBCmdHQS_ES.UBCmdHQS_ES
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBCmdHQEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_S.UBCmdHQEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DS.UBCmdHQEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBCmdHQEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ES.UBCmdHQEG_ES
      AnimationMode        = LOOP
    End
    
    ; night snow
    ConditionState       = NIGHT SNOW
      Model              = UBCmdHQS_NS
      ParticleSysBone    = Smoke01 SteamVent
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire01 SmolderingSmoke
      Animation          = UBCmdHQS_NS.UBCmdHQS_NS
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBCmdHQS_DNS
      Animation          = UBCmdHQS_DNS.UBCmdHQS_DNS
      AnimationMode      = LOOP
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = UBCmdHQS_ENS
      Animation          = UBCmdHQS_ENS.UBCmdHQS_ENS
      AnimationMode      = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_NS.UBCmdHQEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_DNS.UBCmdHQEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBCmdHQEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBCmdHQEG_ENS.UBCmdHQEG_ENS
      AnimationMode        = LOOP
    End


        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBCmdHQS
      Animation          = UBCmdHQS.UBCmdHQS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBCmdHQS_D
      Animation          = UBCmdHQS_D.UBCmdHQS_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBCmdHQS_E
      Animation          = UBCmdHQS_E.UBCmdHQS_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBCmdHQS_N
      Animation          = UBCmdHQS_N.UBCmdHQS_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBCmdHQS_DN
      Animation          = UBCmdHQS_DN.UBCmdHQS_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBCmdHQS_EN
      Animation          = UBCmdHQS_EN.UBCmdHQS_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBCmdHQS_S
      Animation          = UBCmdHQS_S.UBCmdHQS_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBCmdHQS_DS
      Animation          = UBCmdHQS_DS.UBCmdHQS_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBCmdHQS_ES
      Animation          = UBCmdHQS_ES.UBCmdHQS_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBCmdHQS_NS
      Animation          = UBCmdHQS_NS.UBCmdHQS_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBCmdHQS_DNS
      Animation          = UBCmdHQS_DNS.UBCmdHQS_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBCmdHQS_ENS
      Animation          = UBCmdHQS_ENS.UBCmdHQS_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  PlacementViewAngle = -135

  ; ------------ construction done flashing lights ----------
;  Draw = W3DModelDraw
;    DefaultConditionState
;      Model           = None
;    End
;    ConditionState    = SOLD
;      Model           = NONE
;    End    
;    ConditionState    = CONSTRUCTION_COMPLETE
;      Model           = ABWarFact_A2
;      Animation       = ABWarFact_A2.ABWarFact_A2
;      AnimationMode   = LOOP
;      Flags           = START_FRAME_FIRST
;    End  
;  End
    
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A4
      Animation       = UBCmdHQ_A4.UBCmdHQ_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4N
      Animation       = UBCmdHQ_A4N.UBCmdHQ_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A4S
      Animation       = UBCmdHQ_A4S.UBCmdHQ_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A4SN
      Animation       = UBCmdHQ_A4SN.UBCmdHQ_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBCmdHQ_A6
      Animation       = UBCmdHQ_A6.UBCmdHQ_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6N
      Animation       = UBCmdHQ_A6N.UBCmdHQ_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBCmdHQ_A6S
      Animation       = UBCmdHQ_A6S.UBCmdHQ_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBCmdHQ_A6SN
      Animation       = UBCmdHQ_A6SN.UBCmdHQ_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBComCtrC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBComCtrC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBComCtrC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBComCtrC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBComCtrC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBComCtrC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CommandCenter
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = Slth_GLACommandCenter
  End
  BuildCost           = 100
  BuildTime           = 30.0           ; in seconds
  EnergyProduction    = 0  ;Command center should be free
 ;--------------------------
  MaxSimultaneousOfType = 1
 ;--------------------------
  CommandSet          = Slth_FakeGLACommandCenterCommandSet
  VisionRange         = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions = None
    Armor      = StructureArmorTough
    DamageFX   = StructureDamageFXNoShake
  End
  ExperienceValue = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = CommandCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 1250.0
    InitialHealth     = 1250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = PreorderCreate ModuleTag_PreorderCreate
  End

  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End
  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = No
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;Behavior = RebuildHoleExposeDie ModuleTag_07;;;;
;;;;HoleName = Slth_GLAHoleCommandCenter;;;;;;;;;;
;;;;HoleMaxHealth = 500.0;;;;;;;;;;;;;;;;;;;;;;;;;
;;End;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = CreateObjectDie ModuleTag_09
    CreationList = OCL_LargeStructureDebris
  End
  Behavior = FXListDie ModuleTag_10
    DeathFX = FX_StructureMediumDeath
  End

  Behavior = SlowDeathBehavior ModuleTag_11
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_12
    ReplaceObject = Slth_GLACommandCenter
    TriggeredBy = Upgrade_BecomeRealGLACommandCenter
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_15
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 65.0
  GeometryMinorRadius = 65.0
  GeometryHeight      = 54.0
  FactoryExitWidth    = 25 
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 165
  ShadowSizeY = 145
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object Slth_GLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBBmrktC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBBmrktC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBBmrktC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBBmrktC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBBmrktC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBBmrktC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = Slth_GLAPalace
  End
 ;-----------------------------------------------
  BuildCost           = 4500 ;[5000]*
  BuildTime           = 35.0 ;[30.0]* ;in seconds
 ;-----------------------------------------------
  ;;;EnergyProduction = -4
  CommandSet          = Slth_GLABlackMarketCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
 ;--------------------------
  MaxSimultaneousOfType = 3
 ;--------------------------
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = BlackMarketSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BLACK_MARKET
  Body = StructureBody ModuleTag_04
    MaxHealth         = 2200.0 ;[в патчах с 9.1.1 по 9.1.18 было: 2500.0] ;[в 9.1.0 было: 2000.0]*
    InitialHealth     = 2200.0 ;[в патчах с 9.1.1 по 9.1.18 было: 2500.0] ;[в 9.1.0 было: 2000.0]*

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = AutoDepositUpdate ModuleTag_05
    DepositTiming       = 2000 ;[1000 = 1секунда] ; in milliseconds
    DepositAmount       = 150  ;СУММА ДЕНЕГ (в PR 9.0 было: 500 !!)]  ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0    ; no initial bonus
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = ProductionUpdate ModuleTag_06
    ; nothing
  End

  Behavior                 = DestroyDie ModuleTag_07
    ;nothing
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;Behavior = RebuildHoleExposeDie ModuleTag_08;;;;
;;;;HoleName = GLAHoleBlackMarket;;;;;;;;;;;;;;;;;
;;;;HoleMaxHealth = 500.0;;;;;;;;;;;;;;;;;;;;;;;;;
;;End;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior                 = CreateObjectDie ModuleTag_09
    CreationList      = OCL_ABPowerPlantExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathFX           = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleBlackMarket Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBBlackMkt_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED RUBBLE
      Model                = UBBlackMkt_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
  End
End

;------------------------------------------------------------------------------
Object Slth_FakeGLABlackMarket

  ; *** ART Parameters ***
  SelectPortrait         = SUBlackMarket_L
  ButtonImage            = SUBlackMarket

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState    = NONE
      Model           = UBBlackMkt
      Animation       = UBBlackMkt.UBBlackMkt
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED
      Model           = UBBlackMkt_D
      Animation       = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBBlackMkt_E
      Animation       = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED
      Model                = UBBlkMktEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG.UBBlkMktEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBlkMktEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_D.UBBlkMktEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBlkMktEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_E.UBBlkMktEG_E
      AnimationMode        = LOOP
    End

    ; day snow
    ConditionState    = SNOW
      Model           = UBBlackMkt_S
      Animation       = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED SNOW
      Model           = UBBlackMkt_DS
      Animation       = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBBlackMkt_ES
      Animation       = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBlkMktEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_S.UBBlkMktEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DS.UBBlkMktEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBlkMktEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ES.UBBlkMktEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT 
      Model           = UBBlackMkt_N
      Animation       = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBBlackMkt_DN
      Animation       = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBBlackMkt_EN
      Animation       = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBlkMktEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_N.UBBlkMktEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DN.UBBlkMktEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBlkMktEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_EN.UBBlkMktEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBBlackMkt_NS
      Animation       = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke      
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBBlackMkt_DNS
      Animation       = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBBlackMkt_ENS
      Animation       = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_NS.UBBlkMktEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_DNS.UBBlkMktEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBlkMktEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBlkMktEG_ENS.UBBlkMktEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBlackMkt
      Animation          = UBBlackMkt.UBBlackMkt
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBlackMkt_D
      Animation          = UBBlackMkt_D.UBBlackMkt_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBlackMkt_E
      Animation          = UBBlackMkt_E.UBBlackMkt_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBlackMkt_N
      Animation          = UBBlackMkt_N.UBBlackMkt_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBlackMkt_DN
      Animation          = UBBlackMkt_DN.UBBlackMkt_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBlackMkt_EN
      Animation          = UBBlackMkt_EN.UBBlackMkt_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBlackMkt_S
      Animation          = UBBlackMkt_S.UBBlackMkt_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBlackMkt_DS
      Animation          = UBBlackMkt_DS.UBBlackMkt_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ES
      Animation          = UBBlackMkt_ES.UBBlackMkt_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBlackMkt_NS
      Animation          = UBBlackMkt_NS.UBBlackMkt_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBlackMkt_DNS
      Animation          = UBBlackMkt_DNS.UBBlackMkt_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBlackMkt_ENS
      Animation          = UBBlackMkt_ENS.UBBlackMkt_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End  

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT

    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End   
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End   
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End 
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A4
      Animation       = UBBlackMkt_A4.UBBlackMkt_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4N
      Animation       = UBBlackMkt_A4N.UBBlackMkt_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A4S
      Animation       = UBBlackMkt_A4S.UBBlackMkt_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A4SN
      Animation       = UBBlackMkt_A4SN.UBBlackMkt_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End 
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBlackMkt_A6
      Animation       = UBBlackMkt_A6.UBBlackMkt_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6N
      Animation       = UBBlackMkt_A6N.UBBlackMkt_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBlackMkt_A6S
      Animation       = UBBlackMkt_A6S.UBBlackMkt_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBlackMkt_A6SN
      Animation       = UBBlackMkt_A6SN.UBBlackMkt_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBBmrktC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBBmrktC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBBmrktC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBBmrktC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBBmrktC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBBmrktC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackMarket
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = Slth_GLAPalace
  End
  BuildCost           = 100
  BuildTime           = 20.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = Slth_FakeGLABlackMarketCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = BlackMarketSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 125.0
    InitialHealth     = 125.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_05
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ProductionUpdate ModuleTag_06
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_08
    ReplaceObject = Slth_GLABlackMarket
    TriggeredBy = Upgrade_BecomeRealGLABlackMarket
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior                 = CreateObjectDie ModuleTag_09
    CreationList      = OCL_ABPowerPlantExplode
  End
  Behavior                 = FXListDie ModuleTag_10
    DeathFX           = FX_StructureSmallDeath
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = AutoDepositUpdate ModuleTag_FakeMoney
    DepositTiming       = 2000   ; in milliseconds
    DepositAmount       = 20   ; cash amount to deposit every DepositTiming
    InitialCaptureBonus = 0  ; no initial bonus
    ActualMoney = No ; Display only so I look like a BlackMarket
  End

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 35.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 108
  ShadowSizeY = 96
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object Slth_GLAScudStorm

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  SelectPortrait         = SUScudStorm_L
  ButtonImage            = SUScudStorm
  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    ; day
    ConditionState = NONE ; lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY Trans_ATTACKING ; from lying around to straight up
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B

    TransitionState = Trans_ATTACKING Trans_READY ; empty arms going underground, coming up with presents for bad people
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ; day
    ConditionState = DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED Trans_ATTACKING_DAMAGED
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED Trans_READY_DAMAGED
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED Trans_ATTACKING_REALLYDAMAGED
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED Trans_READY_REALLYDAMAGED
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

        ;-------------------------------------------------------------------------------------------------------------------------
        ;  SNOW
    ConditionState =  SNOW ; from underground to lying around
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_SNOW Trans_ATTACKING_SNOW
      Model         = UBScudStrm_A1S
      Animation     = UBScudStrm_A1S.UBScudStrm_A1S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING  SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2S
      Animation     = UBScudStrm_A2S.UBScudStrm_A2S
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B  SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B  SNOW

    TransitionState = Trans_ATTACKING_SNOW Trans_READY_SNOW ; empty arms going underground
      Model         = UBScudStrm_A3S
      Animation     = UBScudStrm_A3S.UBScudStrm_A3S
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED  SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED  SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED  SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_SNOW Trans_ATTACKING_DAMAGED_SNOW
      Model         = UBScudStrm_DA1
      Animation     = UBScudStrm_DA1.UBScudStrm_DA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED SNOW
      Model         = UBScudStrm_DA2
      Animation     = UBScudStrm_DA2.UBScudStrm_DA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_SNOW Trans_READY_DAMAGED_SNOW
      Model         = UBScudStrm_DA3
      Animation     = UBScudStrm_DA3.UBScudStrm_DA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------

    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_SNOW Trans_ATTACKING_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA1
      Animation     = UBScudStrm_EA1.UBScudStrm_EA1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE SNOW
      Model         = UBScudStrm_EA2
      Animation     = UBScudStrm_EA2.UBScudStrm_EA2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_SNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_SNOW Trans_READY_REALLYDAMAGED_SNOW
      Model         = UBScudStrm_EA3
      Animation     = UBScudStrm_EA3.UBScudStrm_EA3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT
    ConditionState = NIGHT ; from underground to lying around
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHT Trans_ATTACKING_NIGHT
      Model         = UBScudStrm_A1
      Animation     = UBScudStrm_A1.UBScudStrm_A1
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT  ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2
      Animation     = UBScudStrm_A2.UBScudStrm_A2
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT

    TransitionState = Trans_ATTACKING_NIGHT Trans_READY_NIGHT ; empty arms going underground
      Model         = UBScudStrm_A3
      Animation     = UBScudStrm_A3.UBScudStrm_A3
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHT Trans_ATTACKING_DAMAGED_NIGHT
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHT Trans_READY_DAMAGED_NIGHT
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------

    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHT Trans_ATTACKING_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHT

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHT Trans_READY_REALLYDAMAGED_NIGHT
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

        ;-------------------------------------------------------------------------------------------------------------------------
        ; NIGHT SNOW
    ConditionState = NIGHT SNOW ; from underground to lying around
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_NIGHTSNOW Trans_ATTACKING_NIGHTSNOW
      Model         = UBScudStrm_A1NS
      Animation     = UBScudStrm_A1NS.UBScudStrm_A1NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING NIGHT SNOW ; Projectile feedback code selectively hiding missiles as they shoot
      Model         = UBScudStrm_A2NS
      Animation     = UBScudStrm_A2NS.UBScudStrm_A2NS
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT SNOW

    TransitionState = Trans_ATTACKING_NIGHTSNOW Trans_READY_NIGHTSNOW ; empty arms going underground
      Model         = UBScudStrm_A3NS
      Animation     = UBScudStrm_A3NS.UBScudStrm_A3NS
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBScudStrm
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
      Model              = UBScudStrm_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
      Model              = UBScudStrm_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ;-------------------------------------------------------------------------------------------------------------------------
    ConditionState = DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_DAMAGED_NIGHTSNOW Trans_ATTACKING_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA1N
      Animation     = UBScudStrm_DA1N.UBScudStrm_DA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End

    ConditionState = ATTACKING DAMAGED NIGHT SNOW
      Model         = UBScudStrm_DA2N
      Animation     = UBScudStrm_DA2N.UBScudStrm_DA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_DAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT DAMAGED SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT DAMAGED SNOW

    TransitionState = Trans_ATTACKING_DAMAGED_NIGHTSNOW Trans_READY_DAMAGED_NIGHTSNOW
      Model         = UBScudStrm_DA3N
      Animation     = UBScudStrm_DA3N.UBScudStrm_DA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End

    ;-------------------------------------------------------------------------------------------------------------------------

    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      ShowSubObject = WeaponA01 WeaponA02 WeaponA03 WeaponA04 WeaponA05 WeaponA06 WeaponA07 WeaponA08 WeaponA09
      TransitionKey = Trans_READY_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium
    End

    TransitionState = Trans_READY_REALLYDAMAGED_NIGHTSNOW Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA1N
      Animation     = UBScudStrm_EA1N.UBScudStrm_EA1N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      WeaponLaunchBone = SECONDARY WeaponA

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End


    ConditionState = ATTACKING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = UBScudStrm_EA2N
      Animation     = UBScudStrm_EA2N.UBScudStrm_EA2N
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
      WeaponLaunchBone = SECONDARY WeaponA
      TransitionKey = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW

      ParticleSysBone      = SteamM01 SteamLarge
      ParticleSysBone      = SteamS01 SteamMedium

      ParticleSysBone      = FXBone01 ScudStormBuildingGoo
      ParticleSysBone      = FXBone02 ScudStormBuildingGoo
      ParticleSysBone      = FXBone03 ScudStormBuildingGoo
    End
    AliasConditionState = ATTACKING FIRING_B NIGHT REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = ATTACKING BETWEEN_FIRING_SHOTS_B NIGHT REALLYDAMAGED RUBBLE SNOW

    TransitionState = Trans_ATTACKING_REALLYDAMAGED_NIGHTSNOW Trans_READY_REALLYDAMAGED_NIGHTSNOW
      Model         = UBScudStrm_EA3N
      Animation     = UBScudStrm_EA3N.UBScudStrm_EA3N
      AnimationMode = ONCE
      Flags         = MAINTAIN_FRAME_ACROSS_STATES2

      ParticleSysBone      = SteamM01 SteamVent
      ParticleSysBone      = SteamS01 SteamVent
    End


    ConditionState       = SOLD
      Model              = NONE
    End
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------
    ;-------------------------------------------------------------------------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes

    ConditionState = None
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = MANUAL
      Flags         = START_FRAME_FIRST
    End

    ConditionState       = SOLD
      Model              = NONE
    End
    ConditionState       = SOLD SNOW
       Model             = NONE
    End
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End

    ConditionState = PREATTACK_A ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ConditionState = ATTACKING
      Model         = UBScudStrm_A5
      Animation     = UBScudStrm_A5.UBScudStrm_A5
      AnimationMode = LOOP
      Flags         = START_FRAME_FIRST
    End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState =  DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = MANUAL
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = PREATTACK_A ATTACKING DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = ATTACKING DAMAGED
    ;  Model         = UBScudStrm_DA5
    ;  Animation     = UBScudStrm_DA5.UBScudStrm_DA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState =  REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = MANUAL
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = PREATTACK_A ATTACKING REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

    ;These assets are missing (KM: removed to get rid of assert)
    ;ConditionState = ATTACKING REALLYDAMAGED
    ;  Model         = UBScudStrm_EA5
    ;  Animation     = UBScudStrm_EA5.UBScudStrm_EA5
    ;  AnimationMode = LOOP
    ;  Flags         = START_FRAME_FIRST
    ;End

  End

  Draw = W3DModelDraw ModuleTag_03
    OkToChangeModelColor = Yes

    ConditionState = None
      Model         = UBScudStrm_A6
      Animation     = UBScudStrm_A6.UBScudStrm_A6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState =  DAMAGED
      Model         = UBScudStrm_DA6
      Animation     = UBScudStrm_DA6.UBScudStrm_DA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EA6
      Animation     = UBScudStrm_EA6.UBScudStrm_EA6
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBScudStrm_A6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED

      Model              = UBScudStrm_DA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model              = UBScudStrm_EA6
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = SOLD
      Model              = NONE
    End
    ConditionState       = SOLD SNOW
       Model             = NONE
    End
    ConditionState       = SOLD NIGHT
       Model             = NONE
    End
    ConditionState       = SOLD NIGHT SNOW
       Model             = NONE
    End

  End

  Draw = W3DModelDraw ModuleTag_04
    OkToChangeModelColor = Yes

    ConditionState = None
      Model         = UBScudStrm_F
      Animation     = UBScudStrm_F.UBScudStrm_F
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState =  DAMAGED
      Model         = UBScudStrm_DF
      Animation     = UBScudStrm_DF.UBScudStrm_DF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState =  REALLYDAMAGED RUBBLE
      Model         = UBScudStrm_EF
      Animation     = UBScudStrm_EF.UBScudStrm_EF
      AnimationMode = LOOP
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState       = SOLD
      Model              = NONE
    End
    AliasConditionState       = SOLD DAMAGED
    AliasConditionState       = SOLD REALLYDAMAGED
    AliasConditionState       = SOLD SNOW
    AliasConditionState       = SOLD DAMAGED SNOW
    AliasConditionState       = SOLD REALLYDAMAGED SNOW
    AliasConditionState       = SOLD NIGHT
    AliasConditionState       = SOLD DAMAGED NIGHT
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT
    AliasConditionState       = SOLD NIGHT SNOW
    AliasConditionState       = SOLD DAMAGED NIGHT SNOW
    AliasConditionState       = SOLD REALLYDAMAGED NIGHT SNOW
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AB
      Animation       = UBScudStrm_AB.UBScudStrm_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABN
      Animation       = UBScudStrm_ABN.UBScudStrm_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ABS
      Animation       = UBScudStrm_ABS.UBScudStrm_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ABSN
      Animation       = UBScudStrm_ABSN.UBScudStrm_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBScudStrm_AC
      Animation       = UBScudStrm_AC.UBScudStrm_AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACN
      Animation       = UBScudStrm_ACN.UBScudStrm_ACN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBScudStrm_ACS
      Animation       = UBScudStrm_ACS.UBScudStrm_ACS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBScudStrm_ACSN
      Animation       = UBScudStrm_ACSN.UBScudStrm_ACSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBScudStrmF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBScudStrmF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBScudStrmF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBScudStrmF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBScudStrmF_SD
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBScudStrmF_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBScudsC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBScudsC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBScudsC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBScudsC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBScudsC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBScudsC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End
  
  Draw = W3DModelDraw ModuleTag_NightLights01
    OkToChangeModelColor = Yes

  ;Day
    ConditionState = NONE
      Model = None
    End
    ConditionState = DAMAGED
      Model = None
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = None
    End   

    ;Night
    ConditionState = NIGHT
      Model = UBScudStrm_N
    End  
    ConditionState = NIGHT DAMAGED
      Model = UBScudStrm_ND
    End  
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model = UBScudStrm_NE
    End  

    ;Snow
    ConditionState = SNOW
      Model = None
    End
    ConditionState = DAMAGED SNOW
      Model = None
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = None
    End

    ;Snow Night
    ConditionState = SNOW NIGHT
      Model = UBScudStrm_N
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model = UBScudStrm_ND
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model = UBScudStrm_NE
    End

    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model = UBScudStrm_N
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model = UBScudStrm_ND
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model = UBScudStrm_NE
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model = None
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model = UBScudStrm_N
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model = UBScudStrm_ND
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model = UBScudStrm_NE
      Flags = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    
    
    ConditionState = AWAITING_CONSTRUCTION 
      Model = NONE
    End

    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION SNOW
    AliasConditionState = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState = SOLD 
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = SOLD NIGHT
    AliasConditionState = SOLD NIGHT DAMAGED
    AliasConditionState = SOLD NIGHT REALLYDAMAGED
    AliasConditionState = SOLD SNOW
    AliasConditionState = SOLD SNOW DAMAGED
    AliasConditionState = SOLD SNOW REALLYDAMAGED
    AliasConditionState = SOLD NIGHT SNOW
    AliasConditionState = SOLD NIGHT SNOW DAMAGED
    AliasConditionState = SOLD NIGHT SNOW REALLYDAMAGED
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScudStorm
  Side = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLAPalace
  End
  BuildCost        = 10000 ;12800 ;[5000]*
  BuildTime        = 65.0 ;[60.0]*   ; in seconds
  EnergyProduction = -15
  CommandSet       = Slth_GLAScudStormCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different. 
                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ScudStormPrimaryDummyWeapon
    AutoChooseSources = PRIMARY NONE
    Weapon = SECONDARY ScudStormWeapon
    AutoChooseSources = SECONDARY NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 400 400 400 400  ; Experience point value at each level
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudStormSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart = NoSound
    TurretMoveLoop = NoSound ;These aren't playing properly, will revisit (mp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY SCORE_CREATE FS_SUPERWEAPON POWERED
  Body            = StructureBody ModuleTag_07
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;Behavior = RebuildHoleExposeDie ModuleTag_08;;;;
;;;;HoleName = GLAHoleScudStorm;;;;;;;;;;;;;;;;;;;
;;;;HoleMaxHealth = 500.0;;;;;;;;;;;;;;;;;;;;;;;;;
;;End;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = AIUpdateInterface ModuleTag_09
  End

  Behavior    = OCLSpecialPower ModuleTag_10
    SpecialPowerTemplate = SuperweaponScudStorm
    OCL                  = SUPERWEAPON_ScudStorm
  End
  Behavior = SpecialPowerCreate ModuleTag_11
    ;nothing
  End

  Behavior = DestroyDie ModuleTag_12
    ;nothing
  End
  Behavior        = CreateObjectDie ModuleTag_13
    CreationList  = OCL_PoisonFieldMedium
    ExemptStatus  = UNDER_CONSTRUCTION
  End
  Behavior        = FXListDie ModuleTag_14
    DeathFX       = WeaponFX_BombTruckHighExplosiveBioBombDetonation
    ExemptStatus  = UNDER_CONSTRUCTION
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = RadiusDecalUpdate ModuleTag_17
    ; nothing
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior        = FXListDie ModuleTag_19
    DeathFX       = FX_BuildingDie
  End

;  Behavior = GrantUpgradeCreate ModuleTag_900
;    UpgradeToGrant = Upgrade_GLACamoNetting
;  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_21
    ; nothing
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_20
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 71.0
  GeometryMinorRadius = 67.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End



;------------------------------------------------------------------------------
;GLA Slth Trap

Object Slth_GLADemoTrap

  ; *** ART Parameters ***
  SelectPortrait         = SSHideBomb
  ButtonImage            = SSHideBomb
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model         = EXHideBomb
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED
    AliasConditionState = RUBBLE
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = EXHideBomb
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
    
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:DemoTrap ;[Заминированная бочка-ловушка]
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLAArmsDealer
  End
  BuildCost        = 400
  BuildTime        = 5.0           ; in seconds
; EnergyProduction = 0
  VisionRange     = 150.0           ; Shroud clearing distance
  ShroudClearingRange     = 150.0           ; Shroud clearing distance
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  WeaponSet
    ;The weapon set is used to determine detonation mode
    Conditions = None 
    Weapon = PRIMARY    DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    Weapon = TERTIARY   DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   NONE
    AutoChooseSources = SECONDARY NONE
    AutoChooseSources = TERTIARY  NONE
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DefaultDamageFX ; Too small for normal building FX, but if we do make dedicated one it should be silent
  End

  CommandSet = Slth_GLADemoTrapCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = UndergroundGeneratorSelect
  SoundOnDamaged        = NoSound
  SoundOnReallyDamaged  = NoSound
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE DEMOTRAP
  Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0   
    InitialHealth   = 100.0
  End

  Behavior = StealthUpdate ModuleTag_03
    StealthDelay = 0 ; msec
    StealthForbiddenConditions = NONE
    FriendlyOpacityMin = 100.0%
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = DemoTrapUpdate ModuleTag_04
    DefaultProximityMode      = Yes       ;If yes, defaults to proximity mode, otherwise defaults to manual.
    DetonationWeaponSlot      = PRIMARY   ;The slot the weapon is in when it detonates.
    ProximityModeWeaponSlot   = SECONDARY ;The slot proximity mode is determined by (bogus weapon)
    ManualModeWeaponSlot      = TERTIARY  ;The slot manual mode is determined by (bogus weapon)
    TriggerDetonationRange    = 40.0      ;Detonation range when in proximity mode (and must be on ground)
    IgnoreTargetTypes         = PROJECTILE UNATTACKABLE
    AutoDetonationWithFriendsInvolved = Yes ;GLA are low tech 
;    DetonationWeapon          = DemoTrapDetonationWeapon
    DetonateWhenKilled        = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_05
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 1000
    FX = INITIAL FX_GLADemoTrapWarning
    Weapon = FINAL DemoTrapDetonationWeapon
  End

  Behavior = FlammableUpdate ModuleTag_07
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = InstantDeathBehavior ModuleTag_08
    ; if we are under construction, use this death instead
    RequiredStatus = UNDER_CONSTRUCTION
    ; no effect
  End

  BuildCompletion = PLACED_BY_PLAYER
  
  Shadow          = SHADOW_VOLUME
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0
  GeometryHeight = 9    
  GeometryIsSmall = Yes 

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleDemoTrap Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
;Remove comments for this section and replace the model entries for the
;pristine, and damage/reallydamaged rubble around the GLA hole below
;  Draw                     = W3DModelDraw
;    OkToChangeModelColor   = Yes
;    ConditionState         = NONE
;      Model                = UBSupply_R
;    End
;    ConditionState         = DAMAGED REALLYDAMAGED
;      Model                = UBSupply_R
;    End
;  End
End

;-----------------------------------------------------------------------------
Object Slth_GLATunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait = SUTunnelST_L
  ButtonImage    = SUTunnelST

  ;;UpgradeCameo1 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
    
    DefaultConditionState
      Model             = UBUndTunn
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End

    AliasConditionState = USING_WEAPON_A

    ConditionState      = DAMAGED
      Model             = UBUndTunn_D
    End

    AliasConditionState = USING_WEAPON_A DAMAGED

    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBUndTunn_E
      ParticleSysBone   = Steam01 SteamVent
    End

    AliasConditionState = USING_WEAPON_A REALLYDAMAGED
    
    
    ConditionState      = SNOW
      Model             = UBUndTunn_S
    End

    AliasConditionState = USING_WEAPON_A SNOW

    ConditionState      = DAMAGED SNOW
      Model             = UBUndTunn_DS
    End

    AliasConditionState = USING_WEAPON_A DAMAGED SNOW

    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunn_ES
      ParticleSysBone   = Steam01 SteamVent
    End
    
    AliasConditionState = USING_WEAPON_A REALLYDAMAGED SNOW
    
    
    ConditionState      = NIGHT
      Model             = UBUndTunn_N
    End

    AliasConditionState = USING_WEAPON_A NIGHT

    ConditionState      = DAMAGED NIGHT
      Model             = UBUndTunn_DN
    End

    AliasConditionState = USING_WEAPON_A DAMAGED NIGHT

    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBUndTunn_EN
      ParticleSysBone   = Steam01 SteamVent
    End

    AliasConditionState = USING_WEAPON_A REALLYDAMAGED NIGHT
    
    
    ConditionState      = SNOW NIGHT
      Model             = UBUndTunn_NS
    End

    AliasConditionState = USING_WEAPON_A SNOW NIGHT

    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBUndTunn_DNS
    End

    AliasConditionState = USING_WEAPON_A DAMAGED SNOW NIGHT

    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBUndTunn_ENS
      ParticleSysBone   = Steam01 SteamVent
    End

    AliasConditionState = USING_WEAPON_A REALLYDAMAGED SNOW NIGHT

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBUndTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBUndTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBUndTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBUndTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBUndTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBUndTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBUndTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBUndTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBUndTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBUndTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBUndTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBUndTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
    AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT


    ConditionState    = PREATTACK_C
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4 ;90 frames in 5 s = speed factor 0.6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming
    End
    ConditionState    = PREATTACK_C NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_NIGHT
    End
    ConditionState    = PREATTACK_C SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_SNOW
    End
    ConditionState    = PREATTACK_C SNOW NIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_SNOWNIGHT
    End

    TransitionState   = Transforming DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End


    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End

    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_030
    AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    ConditionState    = PREATTACK_C
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6 ;121 frames but only 96 have movement = 0.64 spped factor for 5s
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = NIGHT PREATTACK_C
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = SNOW PREATTACK_C
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = SNOW NIGHT PREATTACK_C
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    TransitionState   = Transfr DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6  ;115 frames in 10 s = 0.383 speed factor
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End


    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBTnlNtC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBTnlNtC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBTnlNtC_D
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBTnlNtC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBTnlNtC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBTnlNtC_SD
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost        = 800
  RefundValue      = 100 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime        = 10.0           ; in seconds

  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    TunnelNetworkGun 
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY NONE
;    Weapon = TERTIARY  TransformerWeapon
;    AutoChooseSources = TERTIARY NONE
  End

  Behavior = LockWeaponCreate ModuleTag_Lock
    SlotToLock = PRIMARY
  End

  CommandSet = Slth_GLATunnelNetworkCommandSet
  ExperienceValue = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE AUTO_RALLYPOINT SALVAGER
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_13
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 150   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = AIUpdateInterface ModuleTag_16
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      MinPhysicalPitch = -30
      ControlledWeaponSlots = PRIMARY SECONDARY ;TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  ;Kris: Removed this module from because units exiting the container would extract information 
  ;from the wrong exit interface. And we don't appear to need it for the spawns because they
  ;use OpenContain instead.
  ;Behavior = DefaultProductionExitUpdate ModuleTag_06
  ;  UnitCreatePoint   = X:  5.0  Y:  0.0   Z:0.0
  ;  NaturalRallyPoint = X: 35.0  Y:  0.0   Z:0.0
  ;End

  Behavior            = SpawnBehavior ModuleTag_07
    SpawnNumber       = 2
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Slth_GLAInfantryTunnelDefender
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_09
    HoleName      = GLAHoleTunnelNetwork
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15

    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = StealthUpdate ModuleTag_17
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = GrantUpgradeCreate ModuleTag_18
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_19
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End


  Behavior = InstantDeathBehavior ModuleTag_1000
    DeathTypes = ALL -TOPPLED
    FX  = FX_StructureSmallDeath
    OCL = OCL_ABTunnelNetworkDebris
  End

  Behavior = ProductionUpdate ModuleTag_Prod
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

;  Behavior = CommandSetUpgrade ModuleTag_22
;    CommandSet = Demo_GLATunnelNetworkCommandSetUpgrade22
;    TriggeredBy = UpgradeMobileTunnelNetwork
;  End

  Behavior = ReplaceObjectUpgrade ModuleTag_800121
    ReplaceObject = Slth_GLAMobileTunnelNetwork
    TriggeredBy = UpgradeMobileTunnelNetwork
  End

;  Behavior = OverlordContain ModuleTag_OverlordContain
;    Slots                 = 1
;    DamagePercentToUnits  = 100%
;    AllowInsideKindOf     = PORTABLE_STRUCTURE
;    PassengersAllowedToFire = Yes
;    PayloadTemplateName        = MobileEfectTunnelNetwork
;    ExperienceSinkForRider = Yes ; I get the Exp for things my turret friend kills
;  End

  Behavior = ProductionUpdate ModuleTag_990
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ObjectCreationUpgrade ModuleTag_991
    UpgradeObject = OCL_GLATWR
    TriggeredBy   = Upgrade_ChinaOmegaBattleDrone
  End

  Behavior = GrantUpgradeCreate ModuleTag_992
    UpgradeToGrant           = Upgrade_ChinaOmegaBattleDrone
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------

Object TempTunnelNetwork ;holds tunnel contents while tunnel transforms between vehicle and structure

  ; *** ART Parameters ***

  ;UpgradeCameo4         = NONE
  ;UpgradeCameo5         = NONE

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model = PMOuthouse02
    End
  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:TunnelNetwork
  Side          = GLADemolitionGeneral
  EditorSorting = STRUCTURE

  EnergyProduction = 0
  VisionRange      = 0.0
  ShroudClearingRange = 0

  ArmorSet
    Conditions = None
    Armor      = InvulnerableArmor
    DamageFX   = DamageFX_Empty
  End

  CommandSet = GLASneakAttackTunnelCommandSet

  ExperienceValue  = 10 10 10 10  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  ; *** ENGINEERING Parameters ***
  RadarPriority   = NOT_ON_RADAR
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE AUTO_RALLYPOINT UNATTACKABLE

  Body            = StructureBody ModuleTag_02
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = TunnelContain ModuleTag_03
    TimeForFullHeal = 5000   ;(in milliseconds)
  End

  Behavior = LifetimeUpdate ModuleTag_04
    MinLifetime = 10100  ; min lifetime in msec
    MaxLifetime = 10100  ; max lifetime in msec
  End

  Behavior = DestroyDie ModuleTag_05
  End

  Scale = 0.2
  Geometry = CYLINDER
  GeometryMajorRadius = 5.0
  GeometryHeight = 5.0
  GeometryIsSmall = Yes
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleTunnelNetwork Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBUndTunn_R
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBUndTunn_R
    End
  End
End

;------------------------------------------------------------------------------
Object MobileEfectTunnelNetwork

  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVSlthTunnT
      Turret = Turret01
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = PRIMARY ExhaustB
    End

    ConditionState = REALLYDAMAGED
      Model = UVSlthTunnT_D
    End
  End

  ; ***DESIGN parameters ***
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions        = None
    Armor             = TankArmor
    DamageFX          = SmallTankDamageFX
  End

  BuildCost           = 100
  BuildTime           = 1.0          ;in seconds
  VisionRange         = 100
  ShroudClearingRange = 100
  ExperienceValue     = 10 10 10 10 ;Experience point value at each level
  IsTrainable         = No

  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD CAN_CAST_REFLECTIONS  SELECTABLE DRONE NO_SELECT
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End


  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180   // turn rate, in degrees per sec
;      TurretPitchRate       = 360
;      MinPhysicalPitch      = -75 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
;      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 0      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 0   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 0        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 0  ;How far I'm allowed to wander from target.
    ScoutRange = 0         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 0   ;How far I'm allowed to wander from scout point.
    RepairRange = 0         ;How far I can zip around while repair (only moves when he stops welding)
    RepairMinAltitude = 0.0   ;My minimum repair hover altitude.
    RepairMaxAltitude = 0.0   ;My maximum repair hover altitude.
    RepairRatePerSecond = 0.0 ;How many health points can I repair per second.
    RepairWhenBelowHealth% = 0 ;How low should my master's health be (in %) before I should prioritize repairing.
    RepairMinReadyTime = 0
    RepairMaxReadyTime = 0
    RepairMinWeldTime = 0
    RepairMaxWeldTime = 0
    StayOnSameLayerAsMaster = Yes
  End

  Locomotor = SET_NORMAL EDFLocomotor
  Locomotor = SET_PANIC EDFPanLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
  Behavior                 = CreateObjectDie  ModuleTag_09
    DeathTypes = ALL
    CreationList      = OCL_ABTunnelNetworkDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_StructureSmallTunNM
  End

  Behavior = UpgradeDie  ModuleTag_12
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_ChinaOmegaBattleDrone ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1
  GeometryMinorRadius = 1
  GeometryHeight = 1.0
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object Slth_GLAMobileTunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUPowTruck_L
  ButtonImage            = SUPowTruck
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle

  Draw                   = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState       = NONE
      Model              = UVPOWTRUCK
      Turret = TURRET
      TurretPitch       = TURRETEL

      WeaponFireFXBone  = PRIMARY MUZZLE01
      WeaponMuzzleFlash = PRIMARY MUZZLE01
      WeaponLaunchBone  = PRIMARY MUZZLE01

      WeaponFireFXBone  = SECONDARY MUZZLE01
      WeaponMuzzleFlash = SECONDARY MUZZLE01
      WeaponLaunchBone  = SECONDARY MUZZLE01
    End
    ConditionState       = REALLYDAMAGED
      Model              = UVPOWTRUCK_D
    End
    ConditionState       = RUBBLE
      Model              = UVPOWTRUCK_D
    End
    TrackMarks           = EXTireTrack.tga
    Dust                 = RocketBuggyDust
    DirtSpray            = RocketBuggyDirtSpray
    PowerslideSpray      = RocketBuggyDirtPowerSlide
    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone          = Tire01
    RightFrontTireBone         = Tire02
    MidLeftRearTireBone        = Tire03
    MidRightRearTireBone       = Tire05
    LeftRearTireBone           = Tire04
    RightRearTireBone          = Tire06
    TireRotationMultiplier     = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLAStealthGeneral ;GLA
  EditorSorting   = VEHICLE
  TransportSlotCount = 10                 ;Just enough to fit into a Chinook.
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY    TunnelNetworkGun 
    Weapon = SECONDARY  DummyWeapon ;Used for mode matching only (when to detonate)
    AutoChooseSources = PRIMARY   FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY NONE
  End
  BuildCost       = 800
  BuildTime       = 15.0          ;in seconds
 ;--------------------------------------
  Prerequisites
    Object = Slth_GLASalvageStation
    ;;;Object = Slth_GLAPalace
  End
 ;--------------------------------------
  VisionRange     = 175           ;Needs to see farther and match it's weapon range -- else troop crawlers will get slaughtered against tanks!
  ShroudClearingRange = 400
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAMobileTunnWCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = POWTruckGLAVoiceSelect
  VoiceMove = POWTruckGLAVoiceMove
  VoiceGuard = POWTruckGLAVoiceMove
  SoundEnter = POWTruckEnter
  SoundExit = POWTruckExit
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = POWTruckGLAVoiceCreate
    TurretMoveLoop       = TurretMoveLoop
    SoundMoveStart       = POWTruckGLAMoveStart
    SoundMoveStartDamaged = POWTruckGLAMoveStart
    SoundEject           = PilotSoundEject
    VoiceEject           = PilotVoiceEject
    VoiceCrush           = POWTruckGLAVoiceCrush
    ; Required for the W3DTruckDraw module
    TruckLandingSound    = RocketBuggyLand
    TruckPowerslideSound = POWTruckGLAMoveStart
    VoiceEnter           = POWTruckGLAVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER ARMOR_SALVAGER SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = TransportAIUpdate ModuleTag_03
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End

  Behavior = AIUpdateInterface ModuleTag_0400
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End

  Locomotor = SET_NORMAL MobileBuildingLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_GLAPOWTruckDeathEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = AutoHealBehavior ModuleTag_0500
    HealingAmount = 3
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = StealthUpdate ModuleTag_051
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

;;;;Real Mobile Tunnel Network
;;;;Autor TipaIvan@
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = ReplaceObjectUpgrade ModuleTag_20001
    ReplaceObject = Slth_GLATunnelNetwork
    TriggeredBy = Upgrade_ChinaMines;[UpgradeRealTunnelNetwork]*
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = ProductionUpdate ModuleTag_990
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = ObjectCreationUpgrade ModuleTag_991
    UpgradeObject = OCL_GLATWM
    TriggeredBy   = Upgrade_ChinaOmegaBattleDrone
  End

  Behavior = GrantUpgradeCreate ModuleTag_992
    UpgradeToGrant = Upgrade_ChinaOmegaBattleDrone
    ExemptStatus = UNDER_CONSTRUCTION
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 15.0   
  Scale = 1.02
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End

;------------------------------------------------------------------------------
Object RealEfectTunnelNetwork

  ;MAIN CHASSIS
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVSlthTunnT
      Turret = Turret01
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponFireFXBone = PRIMARY ExhaustB
    End

    ConditionState = REALLYDAMAGED
      Model = UVSlthTunnT_D
    End
  End

  ; ***DESIGN parameters ***
  Side                = GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions        = None
    Armor             = TankArmor
    DamageFX          = SmallTankDamageFX
  End

  BuildCost           = 100
  BuildTime           = 1.0          ;in seconds
  VisionRange         = 100
  ShroudClearingRange = 100
  ExperienceValue     = 10 10 10 10 ;Experience point value at each level
  IsTrainable         = No

  ; *** AUDIO Parameters ***
  VoiceSelect         = NoSound
  VoiceMove           = NoSound
  VoiceAttack         = NoSound
  SoundMoveStart      = NoSound
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    TurretMoveStart   = NoSound
    TurretMoveLoop    = TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD CAN_CAST_REFLECTIONS  SELECTABLE DRONE NO_SELECT
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End


  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180   // turn rate, in degrees per sec
;      TurretPitchRate       = 360
;      MinPhysicalPitch      = -75 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
;      AllowsPitch           = Yes
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = SlavedUpdate ModuleTag_07
    GuardMaxRange = 0      ;How far away from master I'm allowed when master is idle (doesn't wander)
    GuardWanderRange = 0   ;How far away I'm allowed to wander from master while guarding.
    AttackRange = 0        ;How far away from master I'm allowed when master is attacking a target.
    AttackWanderRange = 0  ;How far I'm allowed to wander from target.
    ScoutRange = 0         ;How far away from master I'm allowed when master is moving.
    ScoutWanderRange = 0   ;How far I'm allowed to wander from scout point.
    RepairRange = 0         ;How far I can zip around while repair (only moves when he stops welding)
    RepairMinAltitude = 0.0   ;My minimum repair hover altitude.
    RepairMaxAltitude = 0.0   ;My maximum repair hover altitude.
    RepairRatePerSecond = 0.0 ;How many health points can I repair per second.
    RepairWhenBelowHealth% = 0 ;How low should my master's health be (in %) before I should prioritize repairing.
    RepairMinReadyTime = 0
    RepairMaxReadyTime = 0
    RepairMinWeldTime = 0
    RepairMaxWeldTime = 0
    StayOnSameLayerAsMaster = Yes
  End

  Locomotor = SET_NORMAL EDFLocomotor
  Locomotor = SET_PANIC EDFPanLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
    KillWhenRestingOnGround = Yes
    AllowBouncing = No
  End

  Behavior = DestroyDie ModuleTag_08
    DeathTypes = ALL
  End
;  Behavior                 = CreateObjectDie  ModuleTag_09
;    DeathTypes = ALL
;    CreationList      = OCL_ABTunnelNetworkDebris
;  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleDroneDamageTransitionSmall
  End

  Behavior                 = FXListDie ModuleTag_11
    DeathTypes = ALL
    DeathFX           = FX_StructureSmallTunNR
  End

  Behavior = UpgradeDie  ModuleTag_12
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove     = Upgrade_ChinaOmegaBattleDrone ModuleTag_13
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1
  GeometryMinorRadius = 1
  GeometryHeight = 1.0
  GeometryIsSmall = Yes
End

;------------------------------------------------------------------------------
Object Slth_GLAStingerSiteReal

  ; *** ART Parameters ***
  SelectPortrait         = SUStinger_L
  ButtonImage            = SUStinger

  UpgradeCameo1          = Upgrade_GLAAPRockets
  UpgradeCameo2          = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
    End
    
    ConditionState = DAMAGED
      Model = UBStingerS_D
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
    End

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
    End
    
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
    End
    
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
    End
    
    ; night  **********************************
    ConditionState       = NIGHT 
      Model              = UBStingerS_N
    End
    
    ConditionState       = DAMAGED NIGHT 
      Model              = UBStingerS_DN
    End
    
    ConditionState       = REALLYDAMAGED NIGHT  RUBBLE
      Model              = UBStingerS_EN
    End
       
    ; night snow **********************************
    ConditionState       = NIGHT SNOW
      Model              = UBStingerS_NS
    End
    
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = UBStingerS_DNS
    End
    
    ConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE
      Model              = UBStingerS_ENS
    End
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
     ; Animation          = UBStingerS.UBStingerS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
     ; Animation          = UBStingerS_D.UBStingerS_D
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
     ; Animation          = UBStingerS_E.UBStingerS_E
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBStingerS_N
     ; Animation          = UBStingerS_N.UBStingerS_N
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBStingerS_DN
     ; Animation          = UBStingerS_DN.UBStingerS_DN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBStingerS_EN
     ; Animation          = UBStingerS_EN.UBStingerS_EN
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
     ; Animation          = UBStingerS_S.UBStingerS_S
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
     ; Animation          = UBStingerS_DS.UBStingerS_DS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
     ; Animation          = UBStingerS_ES.UBStingerS_ES
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBStingerS_NS
     ; Animation          = UBStingerS_NS.UBStingerS_NS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBStingerS_DNS
     ; Animation          = UBStingerS_DNS.UBStingerS_DNS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBStingerS_ENS
     ; Animation          = UBStingerS_ENS.UBStingerS_ENS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
  Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = GARRISONED
      Model             = UBStngrSF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBStngrSF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBStngrSF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBStngrSF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBStngrSF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBStngrSF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBStngrC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBStngrC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBStngrC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBStngrC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBStngrC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBStngrC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:StingerSite
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object            = Slth_GLABarracks
  End
  BuildCost           = 900
  BuildTime           = 10.0           ; in seconds
;  EnergyProduction    = -3
  VisionRange         = 600.0           ; Shroud clearing distance
  ShroudClearingRange = 400
  ArmorSet
    Conditions        = None
    Armor             = StingerSiteArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = StingerSiteArmorUpgraded
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Slth_GLAStingerSiteCommandSet
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SPAWNS_ARE_THE_WEAPONS SCORE_CREATE ;POWERED

  Body                 = HiveStructureBody ModuleTag_04 ;Requires SpawnBehavior!
    MaxHealth          = 1000.0
    InitialHealth      = 1000.0
    ;**Careful with these damage types -- because area damage types will already
    ;**damage slaves.
    PropagateDamageTypesToSlavesWhenExisting = NONE +SMALL_ARMS +SNIPER +POISON +RADIATION +SURRENDER
    SwallowDamageTypesIfSlavesNotExisting = NONE +SNIPER +POISON +SURRENDER; Take no damage if no one to pass this to

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SpawnPointProductionExitUpdate ModuleTag_05
    SpawnPointBoneName = SpawnPoint
  End

  Behavior                = SpawnBehavior ModuleTag_06
    SpawnNumber           = 3
    SpawnReplaceDelay     = 30000 ;msec
    SpawnTemplateName     = Slth_GLAInfantryStingerSoldier
    CanReclaimOrphans     = No
    SpawnedRequireSpawner = Yes
    SlavesHaveFreeWill = No
  End
  Behavior        = RebuildHoleExposeDie ModuleTag_08
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 500.0
  End
  Behavior        = DestroyDie ModuleTag_09
    ;<NO DATA>
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior        = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = StingerSiteDeathConcussion
    StartsActive  = Yes
  End
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = Yes; requires upgrade
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = GrantUpgradeCreate ModuleTag_18
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
  Behavior = ProductionUpdate ModuleTag_19
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration        = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount    = 5       ; taking this much damage...
    AflameDamageDelay     = 500       ; this often.
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry            = CYLINDER
  GeometryMajorRadius = 36.0
  GeometryHeight      = 9.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleStingerSite Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBStingerS_R
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBStingerS_R
    End
  End
End

;------------------------------------------------------------------------------
Object Slth_GLAPalace

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  ; *** ART Parameters ***
  SelectPortrait         = SUPalace_L
  ButtonImage            = SUPalace
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
          
    ; day  
    ConditionState         = NONE
      Model                = UBPalace
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace.UBPalace
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED
      Model                = UBPalace_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_D.UBPalace_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBPalace_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED
      Model                = UBPalace_G
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_G.UBPalace_G
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1
      Model                = UBPalaceEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG.UBPalaceEG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 GARRISONED
      Model                = UBPalaceEGX
      ParticleSysBone      = Smoke01 SmolderingSmoke
       Animation            = UBPalaceEGX.UBPalaceEGX
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBPalace_DG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DG.UBPalace_DG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1
      Model                = UBPalaceEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_D.UBPalaceEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 GARRISONED
     Model                = UBPalaceEGX_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_D.UBPalaceEGX_D
      AnimationMode        = LOOP
    End
    
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBPalace_EG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1
      Model                = UBPalaceEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED
      Model                = UBPalaceEGX_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ; day snow
    ConditionState         = SNOW
      Model                = UBPalace_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_S.UBPalace_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED SNOW
      Model                = UBPalace_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DS.UBPalace_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW
      Model                = UBPalace_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW
      Model                = UBPalace_SG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_SG.UBPalace_SG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW
      Model                = UBPalaceEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_S.UBPalaceEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW GARRISONED
      Model                = UBPalaceEGX_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_S.UBPalaceEGX_S
      AnimationMode        = LOOP
    End
    
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBPalace_DSG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DSG.UBPalace_DSG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW
      Model                = UBPalaceEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DS.UBPalaceEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW GARRISONED
      Model                = UBPalaceEGX_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DSG.UBPalaceEGX_DS
      AnimationMode        = LOOP
    End
        
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBPalace_ESG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW
      Model                = UBPalaceEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 GARRISONED SNOW
      Model                = UBPalaceEGX_ES
     ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ; night  
    ConditionState         = NIGHT
      Model                = UBPalace_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_N.UBPalace_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED NIGHT
      Model                = UBPalace_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DN.UBPalace_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE NIGHT
      Model                = UBPalace_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
        
    ConditionState         = GARRISONED NIGHT
      Model                = UBPalace_NG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_NG.UBPalace_NG
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 NIGHT
      Model                = UBPalaceEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_N.UBPalaceEG_N
      AnimationMode        = LOOP
    End
    ; commented out until we get the right state (garrison + elite guard)
    ConditionState         = USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_N.UBPalaceEGX_N
      AnimationMode        = LOOP
    End
        
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBPalace_DGN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DGN.UBPalace_DGN
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 NIGHT
      Model                = UBPalaceEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DN.UBPalaceEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DN.UBPalaceEGX_DN
      AnimationMode        = LOOP
    End    
    
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBPalace_ENG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT
      Model                = UBPalaceEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 NIGHT GARRISONED
      Model                = UBPalaceEGX_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End

    ; night snow
    ConditionState         = SNOW NIGHT
      Model                = UBPalace_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_NS.UBPalace_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED SNOW NIGHT
      Model                = UBPalace_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DNS.UBPalace_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model                = UBPalace_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    
    ConditionState         = GARRISONED SNOW NIGHT
      Model                = UBPalace_GNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_GNS.UBPalace_GNS
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW NIGHT
      Model                = UBPalaceEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_NS.UBPalaceEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_NS.UBPalaceEGX_NS
      AnimationMode        = LOOP
    End

    ConditionState         = DAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_DGNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalace_DGNS.UBPalace_DGNS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT
      Model                = UBPalaceEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEG_DNS.UBPalaceEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBPalaceEGX_DNS.UBPalaceEGX_DNS
      AnimationMode        = LOOP
    End    
    
    ConditionState         = REALLYDAMAGED GARRISONED SNOW NIGHT
      Model                = UBPalace_ENSG
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT
      Model                = UBPalaceEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
    ConditionState         = REALLYDAMAGED USER_1 SNOW NIGHT GARRISONED
      Model                = UBPalaceEGX_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
     
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPalace
      Animation          = UBPalace.UBPalace
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPalace_D
      Animation          = UBPalace_D.UBPalace_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPalace_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPalace_N
      Animation          = UBPalace_N.UBPalace_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPalace_DN
      Animation          = UBPalace_DN.UBPalace_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPalace_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPalace_S
      Animation          = UBPalace_S.UBPalace_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPalace_DS
      Animation          = UBPalace_DS.UBPalace_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPalace_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPalace_NS
      Animation          = UBPalace_NS.UBPalace_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPalace_DNS
      Animation          = UBPalace_DNS.UBPalace_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPalace_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD USER_1
    AliasConditionState  = SOLD DAMAGED USER_1
    AliasConditionState  = SOLD REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT USER_1
    AliasConditionState  = SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = SOLD SNOW USER_1
    AliasConditionState  = SOLD SNOW DAMAGED USER_1
    AliasConditionState  = SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW USER_1
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD USER_1
    AliasConditionState  = GARRISONED SOLD DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW USER_1
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED USER_1
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED USER_1
    ;**************************************************************************************************************************

  End
  PlacementViewAngle = -45

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A4
      Animation       = UBPalace_A4.UBPalace_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A4N
      Animation       = UBPalace_A4N.UBPalace_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A4S
      Animation       = UBPalace_A4S.UBPalace_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A4SN
      Animation       = UBPalace_A4SN.UBPalace_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBPalace_A6
      Animation       = UBPalace_A6.UBPalace_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBPalace_A6N
      Animation       = UBPalace_A6N.UBPalace_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBPalace_A6S
      Animation       = UBPalace_A6S.UBPalace_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBPalace_A6SN
      Animation       = UBPalace_A6SN.UBPalace_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_2
      Model             = UBPalC
    End
    ConditionState      = USER_2 DAMAGED
      Model             = UBPalC_D
    End
    ConditionState      = USER_2 REALLYDAMAGED RUBBLE
      Model             = UBPalC_E
    End
    
    
    ConditionState      = USER_2 SNOW
      Model             = UBPalC_S
    End
    ConditionState      = USER_2 DAMAGED SNOW
      Model             = UBPalC_SD
    End
    ConditionState      = USER_2 REALLYDAMAGED RUBBLE SNOW
      Model             = UBPalC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_2 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_2 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_2 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_2 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_2 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_2 SOLD 
    AliasConditionState  = USER_2 SOLD DAMAGED
    AliasConditionState  = USER_2 SOLD REALLYDAMAGED
    AliasConditionState  = USER_2 SOLD SNOW
    AliasConditionState  = USER_2 SOLD SNOW DAMAGED
    AliasConditionState  = USER_2 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End
  
; ***DESIGN parameters ***
  DisplayName   = OBJECT:Palace
  Side          = GLAStealthGeneral
  EditorSorting = STRUCTURE
  Prerequisites
    Object = Slth_GLAArmsDealer
    Science = SCIENCE_GLA_STEH_GENERAL
  End
;-----------------------------------
  BuildCost = 2500
  BuildTime = 42.0 ;45.0 ;in seconds
;-----------------------------------
  VisionRange = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
 ;---------------------------
  MaxSimultaneousOfType = 2
 ;---------------------------
  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = GLAUpgradedStructureArmor
    DamageFX   = StructureDamageFXNoShake
  End
  CommandSet = Slth_GLAPalaceCommandSet
  ExperienceValue = 300 300 300 300  ;Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = PalaceSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
; KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_TECHNOLOGY GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_ADVANCED_TECH
; KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_TECHNOLOGY GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_ADVANCED_TECH REPAIR_PAD CAPTURABLE AUTO_RALLYPOINT FS_FACTORY FS_WARFACTORY
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_TECHNOLOGY GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY SCORE_CREATE FS_ADVANCED_TECH AUTO_RALLYPOINT FS_FACTORY FS_WARFACTORY
;---------------------------------------------------[Добавочные параметры от Воен-Фабрики ]№№№№№№№№№№№№№№
  Body = StructureBody ModuleTag_04
    MaxHealth     = 3000.0
    InitialHealth = 3000.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 3200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_GLAFortifiedStructure
  End

  Behavior = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
  Behavior = ProductionUpdate ModuleTag_05
    ; nothing
  End

  Behavior = CreateObjectDie ModuleTag_08
    CreationList  = OCL_SmallStructureDebris
  End
  Behavior = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
 ;=================================================
  Behavior = GarrisonContain ModuleTag_10
    ContainMax                    = 6
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 5000      ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5     ; taking this much damage...
    AflameDamageDelay = 500    ; this often.
  End

  Behavior  = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHolePalace
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING RIDERS_ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleUpgrade_13
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_2
    TriggeredBy   = Upgrade_GLACamoNetting
  End
;==================================================================================
;№№№№№№№№№№№№№№№№№№№№№[Плодёжка юнитов и Точка сбора]:№№№№№№№№№№№№№№№№№№№№№№№№№№№№
;-------------------------------------------------------------------------------
  Behavior = ProductionUpdate ModuleTag_PLODEZG1 ;_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
;-----------------------------------------------------------------------
  Behavior = DefaultProductionExitUpdate ModuleTag_PLODEZG2 ;_11
    UnitCreatePoint   = X: -10.934  Y:-12.843   Z:0.0
    NaturalRallyPoint = X: 49.967  Y:-12.483   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
;-----------------------------------------------------------------------
  Behavior = SpawnPointProductionExitUpdate ModuleTag_PLODEZG4 ;_05ty
    SpawnPointBoneName = SPAWNPOINT
  End
;-----------------------------------------------------------------------
;  Behavior = RepairDockUpdate ModuleTag_PLODEZG3 ;_12
;    TimeForFullHeal   = 5000   ;(in milliseconds)     
;    NumberApproachPositions = 5
;  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry            = BOX
  GeometryMajorRadius = 43.0
  GeometryMinorRadius = 58.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHolePalace Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBPalace_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Flame01 FireBurningBarricade01
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBPalace_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
    End
  End
End


;------------------------------------------------------------------------------
Object Slth_GLASupplyStash

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  ; *** ART Parameters ***
  SelectPortrait         = SUSupplyCenter_L
  ButtonImage            = SUSupplyCenter


  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBSupply
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply.UBSupply
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBSupply_D
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_D.UBSupply_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBSupply_E
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState         = GARRISONED
      Model                = UBSpplyEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG.UBSpplyEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBSpplyEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_D.UBSpplyEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBSpplyEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_E.UBSpplyEG_E
      AnimationMode        = LOOP
    End
    
    ; SNOW
    ConditionState = SNOW
      Model = UBSupply_S
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_S.UBSupply_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBSupply_DS
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_DS.UBSupply_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBSupply_ES
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBSpplyEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_S.UBSpplyEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBSpplyEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DS.UBSpplyEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBSpplyEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_ES.UBSpplyEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBSupply_N
      Animation     = UBSupply_N.UBSupply_N
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState = DAMAGED NIGHT
      Model = UBSupply_DN
      Animation     = UBSupply_DN.UBSupply_DN
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBSupply_EN
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBSpplyEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_N.UBSpplyEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBSpplyEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DN.UBSpplyEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBSpplyEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_EN.UBSpplyEG_EN
      AnimationMode        = LOOP
    End
     
    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBSupply_NS
      Animation     = UBSupply_NS.UBSupply_NS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBSupply_DNS
      Animation     = UBSupply_DNS.UBSupply_DNS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBSupply_ENS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_NS.UBSpplyEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DNS.UBSpplyEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_ENS.UBSpplyEG_ENS
      AnimationMode        = LOOP
    End

        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBSupply
      Animation          = UBSupply.UBSupply
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBSupply_D
      Animation          = UBSupply_D.UBSupply_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBSupply_E
      ;Animation          = UBSupply_E.UBSupply_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBSupply_N
      Animation          = UBSupply_N.UBSupply_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBSupply_DN
      Animation          = UBSupply_DN.UBSupply_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBSupply_EN
      ;Animation          = UBSupply_EN.UBSupply_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBSupply_S
      Animation          = UBSupply_S.UBSupply_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBSupply_DS
      Animation          = UBSupply_DS.UBSupply_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBSupply_ES
      ;Animation          = UBSupply_ES.UBSupply_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBSupply_NS
      Animation          = UBSupply_NS.UBSupply_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBSupply_DNS
      Animation          = UBSupply_DNS.UBSupply_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBSupply_ENS
      ;Animation          = UBSupply_ENS.UBSupply_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST

    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBSupStC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBSupStC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBSupStC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBSupStC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBSupStC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBSupStC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyStash
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1500
  RefundValue         = 800 ;650 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime           = 10.0           ; in seconds
  ;EnergyProduction    = -1
  CommandSet          = Slth_GLASupplyStashCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  Prerequisites
;    Object            = Slth_GLAPowerPlant
  End
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CASH_GENERATOR CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE CANNOT_BUILD_NEAR_SUPPLIES FS_SUPPLY_CENTER
  Body                = StructureBody ModuleTag_04
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = SupplyCenterCreate ModuleTag_05
    ;nothing
  End

  Behavior             = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleSupplyStash
    HoleMaxHealth = 500.0
  End 
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End
  Behavior                 = FXListDie ModuleTag_09
    DeathFX           = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = PreorderCreate ModuleTag_PreorderCreate
  End
;=============================================[ТРИ ТЕГА РАДАРА: Теперь спутниковую мини-карту видно стразу со старта игры]=========================
  Behavior = GrantUpgradeCreate ModuleTag_UAR1
    UpgradeToGrant = Upgrade_AmericaRadar
    ExemptStatus   = UNDER_CONSTRUCTION
  End
 ;--------------------------------------------
  Behavior = RadarUpgrade ModuleTag_UAR2
    TriggeredBy = Upgrade_AmericaRadar                   ;[Радар не будет отключён из-за дефицита энергопотребления]№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
    DisableProof  = Yes ; Won't be disabled by power low ;<========[ТЕСТ: Добавил сюда эту строку кода взятую у GLA-шного Радарного фургона]№№№№№№№
  End
 ;--------------------------------------------
  Behavior = RadarUpdate ModuleTag_UAR3
    RadarExtendTime = 4000 ;[Время задержки распространения радара в мсекундах]
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = SupplyCenterProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 36.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    GrantTemporaryStealth = 20000 ;Give temporary stealth to the harvester whenever created. Loses it when player order given.
  End

  Behavior            = SpawnBehavior ModuleTag_12
    SpawnNumber       = 1
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Slth_GLAInfantryWorker
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = SupplyCenterDockUpdate ModuleTag_13
    AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
    NumberApproachPositions = -1 ; This is a Boneless dock, so this means infinite can approach
    GrantTemporaryStealth = 20000 ;Give temporary stealth to the harvester whenever he drops off cash. Loses it when player order given.
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-----------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;-----------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_17
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  ;Dont forget to edit the GLA Hole geometry for this object too
  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  ;FactoryExtraBibWidth= 1.0     ; extra placement border.
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleSupplyStash Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBSupply_R
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED RUBBLE
      Model                = UBSupply_R
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
      ParticleSysBone      = Smoke06 SmolderingSmoke
    End
  End
End

;------------------------------------------------------------------------------
Object Slth_FakeGLASupplyStash

  UpgradeCameo1 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  SelectPortrait         = SUSupplyCenter_L
  ButtonImage            = SUSupplyCenter

  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBSupply
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply.UBSupply
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBSupply_D
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_D.UBSupply_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBSupply_E
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState         = GARRISONED
      Model                = UBSpplyEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG.UBSpplyEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBSpplyEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_D.UBSpplyEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBSpplyEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_E.UBSpplyEG_E
      AnimationMode        = LOOP
    End
    
    ; SNOW
    ConditionState = SNOW
      Model = UBSupply_S
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_S.UBSupply_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBSupply_DS
      ParticleSysBone = Smoke01 SteamVent
      Animation     = UBSupply_DS.UBSupply_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBSupply_ES
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBSpplyEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_S.UBSpplyEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBSpplyEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DS.UBSpplyEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBSpplyEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_ES.UBSpplyEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBSupply_N
      Animation     = UBSupply_N.UBSupply_N
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState = DAMAGED NIGHT
      Model = UBSupply_DN
      Animation     = UBSupply_DN.UBSupply_DN
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBSupply_EN
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBSpplyEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_N.UBSpplyEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBSpplyEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DN.UBSpplyEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBSpplyEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_EN.UBSpplyEG_EN
      AnimationMode        = LOOP
    End
     
    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBSupply_NS
      Animation     = UBSupply_NS.UBSupply_NS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBSupply_DNS
      Animation     = UBSupply_DNS.UBSupply_DNS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBSupply_ENS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
    End
    ConditionState         = GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_S.UBSpplyEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_DNS.UBSpplyEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW NIGHT
      Model                = UBSpplyEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBSpplyEG_ENS.UBSpplyEG_ENS
      AnimationMode        = LOOP
    End

        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBSupply
      Animation          = UBSupply.UBSupply
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBSupply_D
      Animation          = UBSupply_D.UBSupply_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBSupply_E
      ;Animation          = UBSupply_E.UBSupply_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBSupply_N
      Animation          = UBSupply_N.UBSupply_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBSupply_DN
      Animation          = UBSupply_DN.UBSupply_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBSupply_EN
      ;Animation          = UBSupply_EN.UBSupply_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBSupply_S
      Animation          = UBSupply_S.UBSupply_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBSupply_DS
      Animation          = UBSupply_DS.UBSupply_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBSupply_ES
      ;Animation          = UBSupply_ES.UBSupply_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBSupply_NS
      Animation          = UBSupply_NS.UBSupply_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBSupply_DNS
      Animation          = UBSupply_DNS.UBSupply_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBSupply_ENS
      ;Animation          = UBSupply_ENS.UBSupply_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

   ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A4
      Animation       = UBSupply_A4.UBSupply_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A4N
      Animation       = UBSupply_A4N.UBSupply_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A4S
      Animation       = UBSupply_A4S.UBSupply_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A4SN
      Animation       = UBSupply_A4SN.UBSupply_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBSupply_A6
      Animation       = UBSupply_A6.UBSupply_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBSupply_A6N
      Animation       = UBSupply_A6N.UBSupply_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST

    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBSupply_A6S
      Animation       = UBSupply_A6S.UBSupply_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBSupply_A6SN
      Animation       = UBSupply_A6SN.UBSupply_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBSupStC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBSupStC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBSupStC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBSupStC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBSupStC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBSupStC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyStash
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object = Slth_GLACommandCenter
  End
  BuildCost           = 100
  BuildTime           = 5.0           ; in seconds
  EnergyProduction    = 0
  CommandSet          = Slth_FakeGLASupplyStashCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body                = StructureBody ModuleTag_04
    MaxHealth       = 250.0
    InitialHealth   = 250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 450
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End
  Behavior                 = FXListDie ModuleTag_09
    DeathFX           = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = AIUpdateInterface ModuleTag_11
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = Slth_GLASupplyStash
    TriggeredBy = Upgrade_BecomeRealGLASupplyStash
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = FlammableUpdate ModuleTag_15
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;=========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_17
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  ;Dont forget to edit the GLA Hole geometry for this object too
  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  ;FactoryExtraBibWidth= 1.0     ; extra placement border.
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 105
  ShadowSizeY = 105
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;GLA Barracks
Object Slth_GLABarracks

  UpgradeCameo1 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks

  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBBarC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBBarC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBBarC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBBarC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBBarC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBBarC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 500
  BuildTime        = 10.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = Slth_GLABarracksCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = GLAUpgradedStructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  Prerequisites
;    Object = Slth_GLASupplyStash
  End


  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_BARRACKS
  Body            = StructureBody ModuleTag_04
    MaxHealth     = 1000.0
    InitialHealth = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = HealContain ModuleTag_05
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000   ;(in milliseconds)
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_06
    HoleName      = GLAHoleBarracks
    HoleMaxHealth = 500.0
  End
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 42.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_16
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_18
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

;  Behavior = CommandSetUpgrade ModuleTag_250
;    CommandSet = Slth_GLABarracksCommandSetUpgrade
;    TriggeredBy = Upgrade_GLAAPBulletsJarmen
;  End

  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
;Fake GLA Barracks
Object Slth_FakeGLABarracks

  ; *** ART Parameters ***
  SelectPortrait         = SUBarracks_L
  ButtonImage            = SUBarracks

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState = NONE
      Model = UBBARRACKS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks.UBBarracks
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBBarracks_D
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_D.UBBarracks_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBBarracks_E
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_E.UBBarracks_E
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED
      Model                = UBBarrksEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG.UBBarrksEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBBarrksEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_D.UBBarrksEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBBarrksEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_E.UBBarrksEG_E
      AnimationMode        = LOOP
    End
        
        ; day
    ConditionState = SNOW
      Model = UBBARRACKS_S
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_S.UBBarracks_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBBarracks_DS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Flame01 FireFactionMedium
      Animation     = UBBarracks_DS.UBBarracks_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBBarracks_ES
      ParticleSysBone = Smoke01 ChimneySmokeSmall
;     ParticleSysBone = Smoke02 SteamVent
;     ParticleSysBone = Smoke03 SmokeFactionMedium
;     ParticleSysBone = Smoke04 SmokeFactionLarge
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Flame01 FireFactionMedium
;     ParticleSysBone = Flame02 FireFactionLarge
      Animation     = UBBarracks_ES.UBBarracks_ES
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED SNOW
      Model                = UBBarrksEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_S.UBBarrksEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DS.UBBarrksEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBBarrksEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ES.UBBarrksEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBBARRACKS_N
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_N.UBBarracks_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBBarracks_DN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DN.UBBarracks_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBBarracks_EN
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_EN.UBBarracks_EN
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBBarrksEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_N.UBBarrksEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DN.UBBarrksEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBBarrksEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_EN.UBBarrksEG_EN
      AnimationMode        = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBBARRACKS_NS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      Animation     = UBBarracks_NS.UBBarracks_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBBarracks_DNS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBBarracks_ENS
      ParticleSysBone = Smoke01 ChimneySmokeSmall
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 GLAPowerPlantSmoke
      ParticleSysBone = Smoke04 GLAPowerPlantSmoke
      ParticleSysBone = Smoke05 GLAPowerPlantSmoke
      ParticleSysBone = Flame01 FireSmallContinuous
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode = LOOP
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_NS.UBBarrksEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_DNS.UBBarrksEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBBarrksEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBBarrksEG_ENS.UBBarrksEG_ENS
      AnimationMode        = LOOP
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBBarracks
      Animation          = UBBarracks.UBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBBarracks_D
      Animation          = UBBarracks_D.UBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBBarracks_E
      Animation          = UBBarracks_E.UBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBBarracks_N
      Animation          = UBBarracks_N.UBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBBarracks_DN
      Animation          = UBBarracks_DN.UBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBBarracks_EN
      Animation          = UBBarracks_EN.UBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBBarracks_S
      Animation          = UBBarracks_S.UBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBBarracks_DS
      Animation          = UBBarracks_DS.UBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBBarracks_ES
      Animation          = UBBarracks_ES.UBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBBarracks_NS
      Animation          = UBBarracks_NS.UBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBBarracks_DNS
      Animation          = UBBarracks_DNS.UBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBBarracks_ENS
      Animation          = UBBarracks_ENS.UBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A4
      Animation       = UBBarracks_A4.UBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4N
      Animation       = UBBarracks_A4N.UBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A4S
      Animation       = UBBarracks_A4S.UBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A4SN
      Animation       = UBBarracks_A4SN.UBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBBarracks_A6
      Animation       = UBBarracks_A6.UBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6N
      Animation       = UBBarracks_A6N.UBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBBarracks_A6S
      Animation       = UBBarracks_A6S.UBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBBarracks_A6SN
      Animation       = UBBarracks_A6SN.UBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBBarC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBBarC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBBarC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBBarC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBBarC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBBarC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLACommandCenter
  End
  BuildCost        = 100
  BuildTime        = 5.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = Slth_FakeGLABarracksCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 25 25 25 25  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body            = StructureBody ModuleTag_04
    MaxHealth     = 125.0
    InitialHealth = 125.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 325
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_06
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End

  Behavior = FlammableUpdate ModuleTag_11
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_12
    ;-------------DESIGNED FOR SMALL MEDIUM FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = SlowDeathBehavior ModuleTag_13
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_14
    ReplaceObject = Slth_GLABarracks
    TriggeredBy = Upgrade_BecomeRealGLABarracks
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_15
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 42.0
  GeometryMinorRadius = 52.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 120
  ShadowSizeY = 110
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleBarracks Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBBarracks_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBBarracks_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
  End
End


;------------------------------------------------------------------------------
;GLA Arms Dealer
;------------------------------------------------------------------------------
Object Slth_GLAArmsDealer

  UpgradeCameo1 = Upgrade_GLACamoNetting
  UpgradeCameo2 = Upgrade_GLAFortifiedStructure
  
  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End

    ; night
    ConditionState    = NIGHT
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDealST2
      Animation          = UBArmDealST2.UBArmDealST2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
       
       
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBArmsDC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBArmsDC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBArmsDC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBArmsDC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBArmsDC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBArmsDC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLASupplyStash
  End
  BuildCost        = 2500
  BuildTime        = 15.0 ;13.0 ;in seconds
  ;EnergyProduction = -1
  CommandSet       = Slth_GLAArmsDealerCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FACTORY FS_WARFACTORY
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = SpecialPowerCreate ModuleTag_1178
    ;nothing
  End
  
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior               = RebuildHoleExposeDie ModuleTag_06
    HoleName        = GLAHoleArmsDealer
    HoleMaxHealth   = 500.0
  End 
  Behavior             = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End

  Behavior = CommandSetUpgrade ModuleTag_16
    TriggeredBy = Upgrade_ChinaWarFactoryupCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAArmsDealerCommandSetTech
  End

  Behavior = CommandSetUpgrade ModuleTag_17
    TriggeredBy = Upgrade_ChinaWarFactorydownCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactoryupCommandSet Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAArmsDealerCommandSet
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -10.934  Y:-12.843   Z:0.0
    NaturalRallyPoint = X: 49.967  Y:-12.483   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End


  ; Behavior = RepairDockUpdate ModuleTag_12
    ; TimeForFullHeal   = 5000   ;(in milliseconds)     
    ; NumberApproachPositions = 5
  ; End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№  
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_32
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = SpawnPointProductionExitUpdate ModuleTag_05ty
    SpawnPointBoneName = SPAWNPOINT
  End

  Behavior = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = SpawnBehavior ModuleTag_06to
    SpawnNumber           = 1
    SpawnReplaceDelay     = 1 ;msec
    SpawnTemplateName     = Slth_GLATunnelNetworkArms
    CanReclaimOrphans     = No
    SpawnedRequireSpawner = Yes
    SlavesHaveFreeWill = No
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

; -----------------------------------------------------------------------------
Object Slth_GLATunnelNetworkArms

  ; *** ART Parameters ***
  SelectPortrait         = SUTunnel_L
  ButtonImage            = SUTunnel

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model             = UBTunnArms
;      HideSubObject     = TURRET01 BARREL01 HOUSECOLOR02
    End

    AliasConditionState = USING_WEAPON_A

    ConditionState      = DAMAGED
      Model             = UBTunnArms
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBTunnArms
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW
      Model             = UBTunnArms
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBTunnArms
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBTunnArms
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    
    
    ConditionState      = NIGHT
      Model             = UBTunnArms
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBTunnArms
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBTunnArms
      ParticleSysBone   = Steam01 SteamVent
    End
    
    
    ConditionState      = SNOW NIGHT
      Model             = UBTunnArms
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBTunnArms
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBTunnArms
      ParticleSysBone   = Steam01 SteamVent
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBUndTunn
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBUndTunn_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBUndTunn_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBUndTunn_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBUndTunn_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBUndTunn_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBUndTunn_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBUndTunn_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBUndTunn_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBUndTunn_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBUndTunn_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBUndTunn_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
    AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT


    ConditionState    = PREATTACK_C
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4 ;90 frames in 5 s = speed factor 0.6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming
    End
    ConditionState    = PREATTACK_C NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_NIGHT
    End
    ConditionState    = PREATTACK_C SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_SNOW
    End
    ConditionState    = PREATTACK_C SNOW NIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transforming_SNOWNIGHT
    End

    TransitionState   = Transforming DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End
    TransitionState   = Transforming_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.34 0.34
      Flags           = START_FRAME_LAST
    End


    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End

    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A4
      Animation       = UBUndTunn_A4.UBUndTunn_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4N
      Animation       = UBUndTunn_A4N.UBUndTunn_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A4S
      Animation       = UBUndTunn_A4S.UBUndTunn_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A4SN
      Animation       = UBUndTunn_A4SN.UBUndTunn_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_030
    AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT

    ConditionState    = PREATTACK_C
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6 ;121 frames but only 96 have movement = 0.64 spped factor for 5s
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = NIGHT PREATTACK_C
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = SNOW PREATTACK_C
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    ConditionState    = SNOW NIGHT PREATTACK_C
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 0.7 1.0
      Flags           = START_FRAME_FIRST
      TransitionKey   = Transfr_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    TransitionState   = Transfr DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6  ;115 frames in 10 s = 0.383 speed factor
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    TransitionState   = Transfr_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 0.4 0.4
      Flags           = START_FRAME_LAST
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Dust01 SteamVent
    End


    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = NIGHT  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = SNOW  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End
    ConditionState    = SNOW NIGHT  PARTIALLY_CONSTRUCTED
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Dust01 SteamVent
    End

    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBUndTunn_A6
      Animation       = UBUndTunn_A6.UBUndTunn_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6N
      Animation       = UBUndTunn_A6N.UBUndTunn_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBUndTunn_A6S
      Animation       = UBUndTunn_A6S.UBUndTunn_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBUndTunn_A6SN
      Animation       = UBUndTunn_A6SN.UBUndTunn_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBTnlNtC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBTnlNtC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBTnlNtC_D
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBTnlNtC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBTnlNtC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBTnlNtC_SD
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLAStealthGeneral
  EditorSorting    = SYSTEM
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End

  CommandSet       = Slth_GLATunnelNetworkCommandSetArms
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    TurretMoveLoop        = NoSound
  End

  ; *** ENGINEERING Parameters ***
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE IMMUNE_TO_CAPTURE IGNORED_IN_GUI SALVAGER SCORE_CREATE
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_1165
    UnitCreatePoint   = X: 20.524  Y:40.978   Z:0.0
    NaturalRallyPoint = X: 57.395  Y:40.978   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15

    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = ProductionUpdate ModuleTag_19
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = InstantDeathBehavior ModuleTag_1000
    DeathTypes = ALL -TOPPLED
    FX  = FX_StructureSmallDeath
    OCL = OCL_ABTunnelNetworkDebris
  End

  Behavior = StealthUpdate ModuleTag_1768
    StealthDelay                = 2500 ; msec
;    StealthForbiddenConditions  = USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = GrantUpgradeCreate ModuleTag_1879
    UpgradeToGrant = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Prod
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End


;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleArmsDealer Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBArmDeal_R
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBArmDeal_R
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
    End
  End
End

;------------------------------------------------------------------------------
;GLA Arms Dealer
Object Slth_FakeGLAArmsDealer

  UpgradeCameo1 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer

  UpgradeCameo2 = Upgrade_GLAFortifiedStructure

  ; ----------------- Main Building -------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState       = NONE
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED
      Model           = UBArmDeal_D
      Animation       = UBArmDeal_D.UBArmDeal_D
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_E
      Animation       = UBArmDeal_E.UBArmDeal_E
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED
      Model                = UBArmDlEG
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG.UBArmDlEG
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED
      Model                = UBArmDlEG_D
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_D.UBArmDlEG_D
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED
      Model                = UBArmDlEG_E
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_E.UBArmDlEG_E
      AnimationMode        = LOOP
    End

    ; snow
    ConditionState       = SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Steam01 SteamVent
    End
    ;damaged
    ConditionState    = DAMAGED SNOW
      Model           = UBArmDeal_DS
      Animation       = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmolderingSmoke
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 SmolderingFire
;     ParticleSysBone = Fire06 SmolderingFire
    End
    ;really damaged
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = UBArmDeal_ES
      Animation       = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
;     ParticleSysBone = Smoke02 SmolderingSmoke
;     ParticleSysBone = Smoke03 SmolderingSmoke
;     ParticleSysBone = Smoke04 SmolderingSmoke
;     ParticleSysBone = Smoke05 SmokeFactionLarge
;     ParticleSysBone = Smoke06 SmolderingSmoke
;     ParticleSysBone = Smoke07 SmolderingSmoke
;     ParticleSysBone = Fire02 SmolderingFire
;     ParticleSysBone = Fire03 SmolderingFire
;     ParticleSysBone = Fire04 SmolderingFire
;     ParticleSysBone = Fire05 FireFactionLarge
;     ParticleSysBone = Fire06 SmolderingFire
;     ParticleSysBone = Fire07 SmolderingFire
     End
    ConditionState         = GARRISONED SNOW
      Model                = UBArmDlEG_S
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_S.UBArmDlEG_S
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_DS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DS.UBArmDlEG_DS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED SNOW
      Model                = UBArmDlEG_ES
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ES.UBArmDlEG_ES
      AnimationMode        = LOOP
    End

    ; night
    ConditionState    = NIGHT
      Model           = UBArmDeal_N
      Animation       = UBArmDeal_N.UBArmDeal_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT
      Model           = UBArmDeal_DN
      Animation       = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = UBArmDeal_EN
      Animation       = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT
      Model                = UBArmDlEG_N
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_N.UBArmDlEG_N
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_DN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DN.UBArmDlEG_DN
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT
      Model                = UBArmDlEG_EN
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_EN.UBArmDlEG_EN
      AnimationMode        = LOOP
    End
     
     ; night snow
    ConditionState    = NIGHT SNOW
      Model           = UBArmDeal_NS
      Animation       = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Steam01 SteamVent
    End
    ConditionState    = DAMAGED NIGHT SNOW
      Model           = UBArmDeal_DNS
      Animation       = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = UBArmDeal_ENS
      Animation       = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState         = GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_NS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_NS.UBArmDlEG_NS
      AnimationMode        = LOOP
    End
    ConditionState         = DAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_DNS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_DNS.UBArmDlEG_DNS
      AnimationMode        = LOOP
    End
    ConditionState         = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model                = UBArmDlEG_ENS
      ParticleSysBone      = Smoke01 SmolderingSmoke
      Animation            = UBArmDlEG_ENS.UBArmDlEG_ENS
      AnimationMode        = LOOP
    End
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal
      Animation          = UBArmDeal.UBArmDeal
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_D
      Animation          = UBArmDeal_D.UBArmDeal_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_E
      Animation          = UBArmDeal_E.UBArmDeal_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBArmDeal_N
      Animation          = UBArmDeal_N.UBArmDeal_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBArmDeal_DN
      Animation          = UBArmDeal_DN.UBArmDeal_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBArmDeal_EN
      Animation          = UBArmDeal_EN.UBArmDeal_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBArmDeal_S
      Animation          = UBArmDeal_S.UBArmDeal_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBArmDeal_DS
      Animation          = UBArmDeal_DS.UBArmDeal_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBArmDeal_ES
      Animation          = UBArmDeal_ES.UBArmDeal_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBArmDeal_NS
      Animation          = UBArmDeal_NS.UBArmDeal_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBArmDeal_DNS
      Animation          = UBArmDeal_DNS.UBArmDeal_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBArmDeal_ENS
      Animation          = UBArmDeal_ENS.UBArmDeal_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
 
  End
  
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4S
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBArmDeal_A4SN
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A4
      Animation       = UBArmDeal_A4.UBArmDeal_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4N
      Animation       = UBArmDeal_A4N.UBArmDeal_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A4S
      ; @todo srj -- anim missing
      Animation       = UBArmDeal_A4S.UBArmDeal_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A4SN
      Animation       = UBArmDeal_A4SN.UBArmDeal_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArmDeal_A6
      Animation       = UBArmDeal_A6.UBArmDeal_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6N
      Animation       = UBArmDeal_A6N.UBArmDeal_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArmDeal_A6S
      Animation       = UBArmDeal_A6S.UBArmDeal_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArmDeal_A6SN
      Animation       = UBArmDeal_A6SN.UBArmDeal_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ----------------- the door -----------------------
  Draw = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_OPENING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_CLOSING
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = UBArmDeal_A7
      Animation       = UBArmDeal_A7.UBArmDeal_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = UBArmDeal_A7D
      Animation       = UBArmDeal_A7D.UBArmDeal_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN DAMAGED
    
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = UBArmDeal_A7E
      Animation       = UBArmDeal_A7E.UBArmDeal_A7E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
       
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBArmDeal_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBArmDeal_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBArmDeal_A7E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
       
       
  End

  Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBArmsDC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBArmsDC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBArmsDC_E
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBArmsDC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBArmsDC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBArmsDC_SE
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End
  
  PlacementViewAngle  = -135
  
  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ArmsDealer
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLASupplyStash
  End
  BuildCost        = 100
  BuildTime        = 10.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = Slth_FakeGLAArmsDealerCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200

  WeaponSet
    Conditions          = None 
    Weapon = PRIMARY SuicideWeapon
    AutoChooseSources = PRIMARY None
  End

  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE CAN_ATTACK FS_FAKE
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 500.0
    InitialHealth   = 500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End
  Behavior = AIUpdateInterface ModuleTag_10
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = ProductionUpdate ModuleTag_11
    ; nothing
  End

  Behavior = SlowDeathBehavior ModuleTag_12
    ExemptStatus = UNDER_CONSTRUCTION
    DestructionDelay = 0
    Weapon = FINAL FakeStructureDetonationWeapon
  End
  Behavior = DestroyDie ModuleTag_SlowDeathException
    RequiredStatus = UNDER_CONSTRUCTION
  End

  Behavior = ReplaceObjectUpgrade ModuleTag_13
    ReplaceObject = Slth_GLAArmsDealer
    TriggeredBy = Upgrade_BecomeRealGLAArmsDealer
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_31
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;=========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_32
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Geometry            = BOX
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 62.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
  ShadowSizeX = 127
  ShadowSizeY = 144
  BuildCompletion     = PLACED_BY_PLAYER

End

;-----------------------------------------------------------------------------

Object Slth_GLASneakAttackTunnelNetworkStart

  ; *** ART Parameters ***

  SelectPortrait         = SUTunnel_L
  ButtonImage            = SUTunnel
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;***NONE

     ConditionState     = NONE
      Model             = UBSNKATK_1ANM
      Animation         = UBSNKATK_1ANM.UBSNKATK_1ANM
      AnimationMode     = ONCE
      ParticleSysBone   = DIRT SneakAttackCrackDust 
   ;;;ParticleSysBone   = DIRT SneakAttackDirt      ; steveM commented out 8.4.03
      ParticleSysBone   = DIRT SneakAttackCrackDust1 
      ParticleSysBone   = DIRT SneakAttackDebris
      ParticleSysBone   = DIRT SneakAttackDebris0
      ParticleSysBone   = DIRT SneakAttackDebris1     
      ParticleSysBone   = DIRT SneakAttackCrackDust0
      ParticleSysBone   = DIRT SneakAttackSteamVent 
    End

;    ConditionState
;      Model             = UBSNKATK_1ANM
;      Animation         = UBSNKATK_1ANM.UBSNKATK_1ANM
;      AnimationMode     = ONCE
;    End
 
    ConditionState      = DAMAGED
      Model             = UBSNATK_E
      ParticleSysBone   = DIRT SneakAttackCrackDust 
      ParticleSysBone   = DIRT SneakAttackDirt
      ParticleSysBone   = DIRT SneakAttackCrackDust1 
      ParticleSysBone   = DIRT SneakAttackDebris
      ParticleSysBone   = DIRT SneakAttackDebris0
      ParticleSysBone   = DIRT SneakAttackDebris1     
      ParticleSysBone   = DIRT SneakAttackCrackDust0
      ParticleSysBone   = DIRT SneakAttackSteamVent 
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBSNATK_R
    End
    ConditionState      = SNOW
      Model             = UBSNATK_Sanm
      Animation         = UBSNATK_Sanm.UBSNATK_Sanm
      AnimationMode     = ONCE
      ParticleSysBone   = DIRT SneakAttackCrackDustSnow  
      ParticleSysBone   = DIRT SneakAttackDirtSnow       
      ParticleSysBone   = DIRT SneakAttackCrackDust1Snow 
      ParticleSysBone   = DIRT SneakAttackDebrisSnow     
      ParticleSysBone   = DIRT SneakAttackDebris0Snow    
      ParticleSysBone   = DIRT SneakAttackDebris1Snow       
      ParticleSysBone   = DIRT SneakAttackCrackDust0Snow 
      ParticleSysBone   = DIRT SneakAttackSteamVent 
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBSNATK_ES
      ParticleSysBone   = DIRT SneakAttackCrackDustSnow  
      ParticleSysBone   = DIRT SneakAttackDirtSnow       
      ParticleSysBone   = DIRT SneakAttackCrackDust1Snow 
      ParticleSysBone   = DIRT SneakAttackDebrisSnow     
      ParticleSysBone   = DIRT SneakAttackDebris0Snow    
      ParticleSysBone   = DIRT SneakAttackDebris1Snow       
      ParticleSysBone   = DIRT SneakAttackCrackDust0Snow 
      ParticleSysBone   = DIRT SneakAttackSteamVent 
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBSNATK_RS
      ParticleSysBone   = DIRT SneakAttackCrackDustSnow  
      ParticleSysBone   = DIRT SneakAttackDirtSnow       
      ParticleSysBone   = DIRT SneakAttackCrackDust1Snow 
      ParticleSysBone   = DIRT SneakAttackDebrisSnow     
      ParticleSysBone   = DIRT SneakAttackDebris0Snow    
      ParticleSysBone   = DIRT SneakAttackDebris1Snow       
      ParticleSysBone   = DIRT SneakAttackCrackDust0Snow 
      ParticleSysBone   = DIRT SneakAttackSteamVent 
    End
    ConditionState      = NIGHT
      Model             = UBSNKATK_1ANM
      Animation         = UBSNKATK_1ANM.UBSNKATK_1ANM
      AnimationMode     = ONCE
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBSNATK_E
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBSNATK_R
    End    
    ConditionState      = SNOW NIGHT
      Model             = UBSNATK_Sanm
      Animation         = UBSNATK_Sanm.UBSNATK_Sanm
      AnimationMode     = ONCE
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBSNATK_ES
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBSNATK_RS
    End
  End
  PlacementViewAngle = -44

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
   ;None
  End
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  
  ArmorSet        
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = DamageFX_Empty
  End
  
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE IMMOBILE IMMUNE_TO_CAPTURE
  Body = ActiveBody ModuleTag_04
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End


  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_CreateSneakAttackTunnel
  End

  Behavior = FlammableUpdate ModuleTag_15

    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = LifetimeUpdate ModuleTag_16
    MinLifetime = 5000   ; min lifetime in msec
    MaxLifetime = 5000   ; max lifetime in msec
  End

  Behavior = FireWeaponUpdate ModuleTag_17
    Weapon = SneakAttackShockwaveWeaponSmall
    InitialDelay = 10;
  End

  Behavior = FireWeaponUpdate ModuleTag_18
    Weapon = SneakAttackShockwaveWeaponBig
    InitialDelay = 1000;
  End

  Behavior = FireWeaponUpdate ModuleTag_19
    Weapon = SneakAttackShockwaveWeaponBig
    InitialDelay = 2500;
  End


  ; IMPORTANT: DO NOT GIVE THIS OBJECT ANY EXTENTS -ML

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  FactoryExtraBibWidth = 25.0
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End


; -----------------------------------------------------------------------------
Object Slth_GLASneakAttackTunnelNetwork

  ; *** ART Parameters ***
  SelectPortrait         = SUSneakAttack_L
  ButtonImage            = SUSneakAttack
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ;***DEFAULT
    ;DefaultConditionState
    ConditionState
      Model             = UBSNATK_1
    End
    ConditionState      = DAMAGED
      Model             = UBSNATK_E
    End
    ConditionState      = REALLYDAMAGED RUBBLE
      Model             = UBSNATK_R
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = SNOW
      Model             = UBSNATK_S
    End
    ConditionState      = DAMAGED SNOW
      Model             = UBSNATK_ES
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW
      Model             = UBSNATK_RS
      ;ParticleSysBone   = Mound SteamVent
    End
    ConditionState      = NIGHT
      Model             = UBSNATK_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = UBSNATK_E
    End
    ConditionState      = REALLYDAMAGED RUBBLE NIGHT
      Model             = UBSNATK_R
      ;ParticleSysBone   = Mound SteamVent
    End    
    ConditionState      = SNOW NIGHT
      Model             = UBSNATK_NS
    End
    ConditionState      = DAMAGED SNOW NIGHT
      Model             = UBSNATK_ES
    End
    ConditionState      = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model             = UBSNATK_RS
      ;ParticleSysBone   = Mound SteamVent
    End
  End

  PlacementViewAngle = -44

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelNetwork
  Side = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
   ;None
  End
  EnergyProduction = 0
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TunnelNetworkGunDUMMY ;So AI can attack from it in guard mode.
  End
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  CommandSet       = GLASneakAttackTunnelCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = TunnelNetworkSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundEnter = GarrisonEnter
  SoundExit = GarrisonExit

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE AUTO_RALLYPOINT
  Body            = StructureBody ModuleTag_04
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_13
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 150   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = TunnelContain ModuleTag_05
    TimeForFullHeal     = 5000   ;(in milliseconds)
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      TurretTurnRate        = 180   ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed; defensive weapon
  End

  ;Kris: Removed this module because units exiting the container would extract information from
  ;the wrong exit interface. Because TunnelContain has the proper information for exiting properly
  ;we don't need this one. Plus sneak attack tunnels don't produce units anyway.
  ;Behavior = DefaultProductionExitUpdate ModuleTag_06
  ;  UnitCreatePoint   = X:  5.0  Y:  0.0   Z:0.0
  ;  NaturalRallyPoint = X: 35.0  Y:  0.0   Z:0.0
  ;End

  Behavior = DestroyDie ModuleTag_10
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_11
    CreationList  = OCL_ABTunnelNetworkDebris
  End
  Behavior             = FXListDie ModuleTag_12
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_15

    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End


  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 25.0
  GeometryHeight = 20.0    
  GeometryIsSmall     = No
  FactoryExtraBibWidth = 25.0
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantryRebel

  ; *** ART Parameters ***
  SelectPortrait         = SURebel_L
  ButtonImage            = SURebel

  UpgradeCameo1 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo2 = Upgrade_GLAAPBullets
  UpgradeCameo3 = Upgrade_GLACamouflage
 ;UpgradeCameo4 = Upgrade_GLATranqDarts
 ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    
    ; this says "we don't use these condition states at all, so completely
    ; ignore them for purposes of matchmaking"... this is useful to help
    ; reduce the number of AliasConditionState clauses you must add in
    ; order to avoid ambiguity in some cases.
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; ---- standing
    DefaultConditionState
      Model               = UIRGrd_SKN
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STN 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDA 
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDB 
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = TERTIARY Muzzle
      WeaponMuzzleFlash   = TERTIARY MuzzleFX
      TransitionKey       = TRANS_Standing
    End

    ConditionState        = REALLYDAMAGED
      IdleAnimation       = UIRGrd_SKL.UIRGrd_STB 0 35
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDC
      IdleAnimation       = UIRGrd_SKL.UIRGrd_IDD 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandingHurt
    End

    ; ---- moving
    ConditionState        = MOVING
      Animation           = UIRGrd_SKL.UIRGrd_RNA 15
      AnimationMode       = LOOP
      TransitionKey       = TRANS_Walking
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING

    ConditionState        = MOVING REALLYDAMAGED
      Animation           = UIRGrd_SKL.UIRGrd_RNB 25
      AnimationMode       = LOOP
      TransitionKey       = TRANS_WalkingHurt
      ParticleSysBone     = None InfantryDustTrails
    End
    AliasConditionState   = MOVING ATTACKING REALLYDAMAGED
    
    ; ---- dying 
    ConditionState        = DYING
      Animation           = UIRGrd_SKL.UIRGrd_DTA 
      Animation           = UIRGrd_SKL.UIRGrd_DTB 
      AnimationMode       = ONCE
      TransitionKey       = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIRGrd_SKL.UIRGrd_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIRGrd_SKL.UIRGrd_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIRGrd_SKL.UIRGrd_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End
    
    ConditionState = SPECIAL_CHEERING
      Animation = UIRGrd_SKL.UIRGrd_IDB
    End

    ; ---- firing
    ConditionState = USING_WEAPON_A
      Animation = UIRGrd_SKL.UIRGrd_ATA
      AnimationMode = LOOP
      TransitionKey = TRANS_Firing
    End

    ConditionState = USING_WEAPON_A REALLYDAMAGED
      Animation = UIRGrd_SKL.UIRGrd_ATA2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringHurt
    End

    TransitionState = TRANS_Standing TRANS_Firing
      Animation = UIRGrd_SKL.UIRGrd_ATAST
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Standing
      Animation = UIRGrd_SKL.UIRGrd_ATAED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_StandingHurt TRANS_FiringHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE_BACKWARDS
    End

    TransitionState = TRANS_FiringHurt TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Standing TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

     ; ---- firing
    ConditionState = USING_WEAPON_B
      Animation = UIRGrd_SKL.UIRGrd_ATA
      AnimationMode = LOOP
      TransitionKey = TRANS_Firing
    End

    ConditionState = USING_WEAPON_B REALLYDAMAGED
      Animation = UIRGrd_SKL.UIRGrd_ATA2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringHurt
    End

    TransitionState = TRANS_Standing TRANS_Firing
      Animation = UIRGrd_SKL.UIRGrd_ATAST
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Standing
      Animation = UIRGrd_SKL.UIRGrd_ATAED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_StandingHurt TRANS_FiringHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE_BACKWARDS
    End

    TransitionState = TRANS_FiringHurt TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Standing TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    ; ---- firing
    ConditionState = USING_WEAPON_C
      Animation = UIRGrd_SKL.UIRGrd_ATA
      AnimationMode = LOOP
      TransitionKey = TRANS_Firing
    End

    ConditionState = USING_WEAPON_C REALLYDAMAGED
      Animation = UIRGrd_SKL.UIRGrd_ATA2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringHurt
    End

    TransitionState = TRANS_Standing TRANS_Firing
      Animation = UIRGrd_SKL.UIRGrd_ATAST
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Firing TRANS_Standing
      Animation = UIRGrd_SKL.UIRGrd_ATAED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_StandingHurt TRANS_FiringHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE_BACKWARDS
    End

    TransitionState = TRANS_FiringHurt TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Standing TRANS_StandingHurt
      Animation = UIRGrd_SKL.UIRGrd_ATA2ED
      AnimationMode = ONCE
    End

    ; ------- Bldg-capture

    ConditionState = UNPACKING
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState = RAISING_FLAG
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState = PACKING
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState = TRANS_Raising TRANS_Packing
      Model             = UIRGrd_F_SKN
      Animation         = UIRGrd_F_SKL.UIRGrd_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:StealthRebel
  Side                = GLAStealthGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
 
  WeaponSet
    Conditions = None
    Weapon = PRIMARY GLARebelMachineGun
    Weapon              = TERTIARY GLARebelMachineTauntGun
    AutoChooseSources = TERTIARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost = 250
  BuildTime = 5.0          ;in seconds  

  ExperienceValue     = 15 15 30 40     ;Experience point value at each level
  ExperienceRequired  = 0 40 60 120     ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrushableLevel      = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Slth_GLAInfantryRebelCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = StealthRebelVoiceSelect
  VoiceMove = RebelVoiceMove
  VoiceGuard = RebelVoiceMove
  VoiceAttack = RebelVoiceAttack
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  VoiceFear = RebelVoiceFear
  VoiceTaskComplete = RebelVoiceCaptureComplete
  UnitSpecificSounds
    VoiceCreate = RebelVoiceCreate
    VoiceSubdue = RebelVoiceSubdue
    VoiceGarrison = RebelVoiceGarrison
    VoiceEnter = RebelVoiceMove
    VoiceEnterHostile = RebelVoiceMove
    VoiceGetHealed      = RebelVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE 

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End
  Behavior = StealthUpdate ModuleTag_407
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = WeaponBonusUpgrade ModuleTag_09
    TriggeredBy = Upgrade_GLAAPBullets
  End

  Behavior = StealthUpgrade ModuleTag_10
    TriggeredBy = Upgrade_GLACamouflage
  End

  Behavior = SquishCollide ModuleTag_11
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_16
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_17
    SpecialPowerTemplate      = SpecialAbilityRebelCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_18
    SpecialPowerTemplate  = SpecialAbilityRebelCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 12
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_19
    SpecialPowerTemplate = SpecialAbilityRebelCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End

  Behavior = SpecialAbility ModuleTag_20
    SpecialPowerTemplate = SpecialAbilityBoobyTrap
    UpdateModuleStartsAttack = Yes
    StartsPaused              = Yes
;    InitiateSound = TankHunterVoiceTNT
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21
    SpecialPowerTemplate = SpecialAbilityBoobyTrap
    StartAbilityRange = 5.0
    PreparationTime = 0
    SpecialObject = BoobyTrap
    MaxSpecialObjects = 100
    SpecialObjectsPersistWhenOwnerDies = Yes
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
; Not implemented    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
  End

  Behavior = VeterancyGainCreate ModuleTag_06
    StartingLevel = HEROIC
    ScienceRequired = SCIENCE_RebelTraining_Early
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_22
    SpecialPowerTemplate = SpecialAbilityBoobyTrap
    TriggeredBy = Upgrade_GLAInfantryRebelBoobyTrapAttack
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;----------------------------------------------------------------------------
Object Slth_GLAInfantryJarmenKell

  ; *** ART Parameters ***
  SelectPortrait         = SUJermanKell1_L  ;NOTE: Asset spelling mistake
  ButtonImage            = SUJermanKell1
  
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPBulletsJarmen
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; --- idle
    DefaultConditionState
      Model             = UIHERO_SKN
      IdleAnimation     = UIHERO_SKL.UIHERO_STA 0 21
      IdleAnimation     = UIHERO_SKL.UIHERO_IDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IDB
      AnimationMode     = ONCE
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = UIHERO_SKL.UIHERO_ISTA 0 30
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- attack

    ConditionState      = FIRING_A 
      Animation         = UIHERO_SKL.UIHERO_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringA
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = UIHERO_SKL.UIHERO_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_FiringA
    End
    AliasConditionState = RELOADING_A
  
    ConditionState      = FIRING_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringAInjured
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      WaitForStateToFinishIfPossible = TRANS_FiringAInjured
    End
    AliasConditionState = RELOADING_A REALLYDAMAGED

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = UIHERO_SKL.UIHERO_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = UIHERO_SKL.UIHERO_RNA2 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING DOCKING
    AliasConditionState = MOVING DOCKING_BEGINNING
    AliasConditionState = MOVING DOCKING_ACTIVE

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IRNA 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    
    ; --- cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = UIHERO_SKL.UIHERO_CHA
      AnimationMode     = LOOP
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_ICHA
      AnimationMode     = LOOP
    End
    
    ; --- dying
    ConditionState      = DYING
      Animation         = UIHERO_SKL.UIHERO_DTA
      Animation         = UIHERO_SKL.UIHERO_DTB
      Animation         = UIHERO_SKL.UIHERO_IDTA
      Animation         = UIHERO_SKL.UIHERO_IDTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = UIHERO_SKL.UIHERO_ADTG21
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = UIHERO_SKL.UIHERO_ADTG22
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = UIHERO_SKL.UIHERO_ADTG23
      AnimationMode     = ONCE
      TransitionKey     = None
    End
    
    ; --- falling
    ConditionState      = FREEFALL
      Animation         = UIHERO_SKL.UIHERO_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = UIHERO_SKL.UIHERO_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = UIHERO_SKL.UIHERO_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End
    
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:JarmenKell
  Side                  = GLAStealthGeneral
  EditorSorting         = INFANTRY
  TransportSlotCount    = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  MaxSimultaneousOfType = 1
 
  WeaponSet
    Conditions = WEAPON_RIDER1
    Weapon = PRIMARY GLAJarmenKellRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End

  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLAJarmenKellRifleBullets
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifleBullets
    AutoChooseSources = SECONDARY NONE
  End


  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 200.0
  ShroudClearingRange = 400
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End
  BuildCost = 2500
  BuildTime = 20.0          ;in seconds  

  ExperienceValue     = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired  = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Slth_GLAInfantryJarmenKellCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = JarmenKellVoiceSelect
  VoiceMove = JarmenKellVoiceMove
  VoiceGuard = JarmenKellVoiceMove
  VoiceAttack = JarmenKellVoiceAttack
  VoiceFear = JarmenKellVoiceFear
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = JarmenKellVoiceCreate
    VoiceSnipePilot      = JarmenKellVoiceSnipe
    VoiceGarrison = JarmenKellVoiceGarrison
    VoiceEnter = JarmenKellVoiceMove
    VoiceEnterHostile = JarmenKellVoiceMove
    VoiceGetHealed      = JarmenKellVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER STEALTH_GARRISON SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL JarmenKellLocomotor
  Locomotor = SET_SLUGGISH JarmenKellLocomotor2

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  Behavior = StealthDetectorUpdate ModuleTag_StealthDetect
    DetectionRate             = 750 ;How often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 150 ;Enable this for independant balancing!
    CanDetectWhileGarrisoned  = No  ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No  ;Contained means being in a transport or tunnel network.
  End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;NewSteals
  Behavior = RiderChangeContain ModuleTag_1600

    Rider1 = Slth_GLAInfantryJarmenLightCamoflage     RIDER1 WEAPON_RIDER1 STATUS_RIDER1 Slth_GLAInfantryJarmenKellCommandSet SET_NORMAL
    Rider2 = Slth_GLAInfantryJarmenEliteCamoflage     RIDER2 WEAPON_RIDER2 STATUS_RIDER2 Slth_GLAInfantryJarmenKellCommandSet SET_SLUGGISH
    Slots                 = 1
    InitialPayload        = Slth_GLAInfantryJarmenLightCamoflage 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%
    BurnedDeathToUnits    = No
    AllowInsideKindOf     = PORTABLE_STRUCTURE
    ExitDelay         = 1
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = No
    DoorOpenTime = 0
  End

  Behavior = StealthUpdate ModuleTag_19000 ;BlackLotus
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = ObjectCreationUpgrade ModuleTag_Upgr1
    UpgradeObject = OCL_JarmenModeObject
    TriggeredBy   = Upgrade_GLAAPBulletsJarmen
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = StealthUpdate ModuleTag_06
;    StealthDelay                          = 2000 ; msec
;    StealthForbiddenConditions            = ATTACKING
;    InnateStealth                         = Yes
;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;    EnemyDetectionEvaEvent                = EnemyJarmenKellDetected
;    OwnDetectionEvaEvent                  = OwnJarmenKellDetected
;  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_07 ; allows use of command button hunt script with this unit. 
  End

  Behavior = WeaponBonusUpgrade ModuleTag_08
    TriggeredBy = Upgrade_GLAAPBullets
  End
 
  ;Hero units can't be squished!
  ;Behavior = SquishCollide ModuleTag_09
  ;  ;nothing
  ;End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_JarmenKellDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_JarmenKellDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

;  Behavior = ReplaceObjectUpgrade ModuleTag_800121
;    ReplaceObject = Slth_GLAInfantryJarmenKellBullets
;    TriggeredBy = Upgrade_GLAAPBulletsJarmen
;  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;-----------------------------------------------------------------
Object Slth_GLAInfantryJarmenLightCamoflage
  EditorSorting       = SYSTEM
  TransportSlotCount  = 1
  IsTrainable = No
  KindOf = PORTABLE_STRUCTURE INERT
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1.0
    InitialHealth   = 1.0
  End
  Behavior = AIUpdateInterface ModuleTag_06
  End
  Behavior = DestroyDie ModuleTag_12
    DeathTypes = ALL
  End
  Behavior = HeightDieUpdate ModuleTag_13
    TargetHeight = 500
  End
  Behavior = PhysicsBehavior ModuleTag_15
    Mass = 5.0
    AllowBouncing = No
  End
  Behavior = UpgradeDie ModuleTag_14
    DeathTypes = ALL
    UpgradeToRemove = Upgrade_GLAAPBulletsJarmen
  End
  Behavior = StealthUpdate ModuleTag_16
    StealthDelay                          = 2000 ; msec
    StealthForbiddenConditions            = ATTACKING
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent                = EnemyJarmenKellDetected
    OwnDetectionEvaEvent                  = OwnJarmenKellDetected
  End
End

;-------------------------------------------------------------
Object Slth_GLAInfantryJarmenEliteCamoflage
  EditorSorting       = SYSTEM
  TransportSlotCount  = 1
  IsTrainable = No
  KindOf = PORTABLE_STRUCTURE INERT
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1.0
    InitialHealth   = 1.0
  End
  Behavior = AIUpdateInterface ModuleTag_06
  End
  Behavior = DestroyDie ModuleTag_12
    DeathTypes = ALL
  End
  Behavior = HeightDieUpdate ModuleTag_13
    TargetHeight = 500.0
  End
  Behavior = PhysicsBehavior ModuleTag_15
    Mass = 5.0
    AllowBouncing = No
  End
  Behavior = StealthUpdate ModuleTag_16
    StealthDelay                          = 1500 ; msec
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent                = EnemyJarmenKellDetected
    OwnDetectionEvaEvent                  = OwnJarmenKellDetected
  End
End


;----------------------------------------------------------------------------
Object Slth_GLAInfantryJarmenKellBullets

  ; *** ART Parameters ***
  SelectPortrait         = SUJermanKell1_L  ;NOTE: Asset spelling mistake
  ButtonImage            = SUJermanKell1
  
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAAPBulletsJarmen
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; --- idle
    DefaultConditionState
      Model             = UIHERO_SKN
      IdleAnimation     = UIHERO_SKL.UIHERO_STA 0 21
      IdleAnimation     = UIHERO_SKL.UIHERO_IDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IDB
      AnimationMode     = ONCE
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = UIHERO_SKL.UIHERO_ISTA 0 30
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDA
      IdleAnimation     = UIHERO_SKL.UIHERO_IIDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- attack

    ConditionState      = FIRING_A 
      Animation         = UIHERO_SKL.UIHERO_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringA
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = UIHERO_SKL.UIHERO_STA
      AnimationMode     = ONCE
      WaitForStateToFinishIfPossible = TRANS_FiringA
    End
    AliasConditionState = RELOADING_A
  
    ConditionState      = FIRING_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_FiringAInjured
      AnimationSpeedFactorRange = 1.5 1.5
    End

    ConditionState      = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IATA2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
      WaitForStateToFinishIfPossible = TRANS_FiringAInjured
    End
    AliasConditionState = RELOADING_A REALLYDAMAGED

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = UIHERO_SKL.UIHERO_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = UIHERO_SKL.UIHERO_RNA2 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING DOCKING
    AliasConditionState = MOVING DOCKING_BEGINNING
    AliasConditionState = MOVING DOCKING_ACTIVE

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_IRNA 30
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING FIRING_A REALLYDAMAGED
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = MOVING RELOADING_A REALLYDAMAGED
    
    ; --- cheering
    ConditionState      = SPECIAL_CHEERING
      Animation         = UIHERO_SKL.UIHERO_CHA
      AnimationMode     = LOOP
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = UIHERO_SKL.UIHERO_ICHA
      AnimationMode     = LOOP
    End
    
    ; --- dying
    ConditionState      = DYING
      Animation         = UIHERO_SKL.UIHERO_DTA
      Animation         = UIHERO_SKL.UIHERO_DTB
      Animation         = UIHERO_SKL.UIHERO_IDTA
      Animation         = UIHERO_SKL.UIHERO_IDTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = UIHERO_SKL.UIHERO_ADTG21
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = UIHERO_SKL.UIHERO_ADTG22
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = UIHERO_SKL.UIHERO_ADTG23
      AnimationMode     = ONCE
      TransitionKey     = None
    End
    
    ; --- falling
    ConditionState      = FREEFALL
      Animation         = UIHERO_SKL.UIHERO_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = UIHERO_SKL.UIHERO_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = UIHERO_SKL.UIHERO_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = UIHERO_SKL.UIHERO_PTD
      AnimationMode     = ONCE
    End
    
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:JarmenKell
  Side                  = GLAStealthGeneral
  EditorSorting         = INFANTRY
  TransportSlotCount    = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  MaxSimultaneousOfType = 1
 
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAJarmenKellRifleBullets
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifleBullets
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 200
  ShroudClearingRange = 400
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End
  BuildCost = 1500
  BuildTime = 20.0          ;in seconds  

  ExperienceValue     = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired  = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrushableLevel      = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Slth_GLAInfantryJarmenKellCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = JarmenKellVoiceSelect
  VoiceMove = JarmenKellVoiceMove
  VoiceGuard = JarmenKellVoiceMove
  VoiceAttack = JarmenKellVoiceAttack
  VoiceFear = JarmenKellVoiceFear
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = JarmenKellVoiceCreate
    VoiceSnipePilot      = JarmenKellVoiceSnipe
    VoiceGarrison = JarmenKellVoiceGarrison
    VoiceEnter = JarmenKellVoiceMove
    VoiceEnterHostile = JarmenKellVoiceMove
    VoiceGetHealed      = JarmenKellVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER STEALTH_GARRISON SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL JarmenKellLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  Behavior = StealthDetectorUpdate ModuleTag_StealthDetect
    DetectionRate             = 750 ;How often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 150 ;Enable this for independant balancing!
    CanDetectWhileGarrisoned  = No  ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No  ;Contained means being in a transport or tunnel network.
  End

  Behavior = StealthUpdate ModuleTag_06
    StealthDelay                          = 1500 ; msec
;    StealthForbiddenConditions            = ATTACKING
    InnateStealth                         = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent                = EnemyJarmenKellDetected
    OwnDetectionEvaEvent                  = OwnJarmenKellDetected
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_07 ; allows use of command button hunt script with this unit. 
  End

  Behavior = WeaponBonusUpgrade ModuleTag_08
    TriggeredBy = Upgrade_GLAAPBullets
  End
 
  ;Hero units can't be squished!
  ;Behavior = SquishCollide ModuleTag_09
  ;  ;nothing
  ;End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_JarmenKellDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_JarmenKellDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
;Tunnel Fanatic ;Now called the RPG Trooper
Object Slth_GLAInfantryTunnelDefender

  ; *** ART Parameters ***
  SelectPortrait = Slth_RPGTrooper_L;SURPG_L
  ButtonImage    = Slth_RPGTrooper;SURPG
  
  UpgradeCameo1 = Upgrade_GLAAPRockets
  UpgradeCameo2 = Upgrade_GLACamouflage

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UITunF_SKN
      IdleAnimation = UITunF_SKL.UITunF_STA 0 20
      IdleAnimation = UITunF_SKL.UITunF_IDA 
      IdleAnimation = UITunF_SKL.UITunF_IDB 
      IdleAnimation = UITunF_SKL.UITunF_IDC 
      AnimationMode = ONCE
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = MOVING
      Animation = UITunF_SKL.UITunF_WKA 16
      Animation = UITunF_SKL.UITunF_WKB 30
      Animation = UITunF_SKL.UITunF_WKC 30
      Animation = UITunF_SKL.UITunF_RNA 15
      Animation = UITunF_SKL.UITunF_RNB 25   
      AnimationMode = LOOP
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UITunF_SKL.UITunF_DTA 
      Animation = UITunF_SKL.UITunF_DTB 
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UITunF_SKL.UITunF_ADTA1
      Animation = UITunF_SKL.UITunF_ADTE1
      Animation = UITunF_SKL.UITunF_ADTF1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UITunF_SKL.UITunF_ADTA2
      Animation = UITunF_SKL.UITunF_ADTE2
      Animation = UITunF_SKL.UITunF_ADTF2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UITunF_SKL.UITunF_ADTA3
      Animation = UITunF_SKL.UITunF_ADTE3
      Animation = UITunF_SKL.UITunF_ADTF3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = FIRING_A 
      Animation = UITunF_SKL.UITunF_ATA 
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRING
    End
    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation = UITunF_SKL.UITunF_STA
      AnimationMode = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = RELOADING_A

    ConditionState = SPECIAL_CHEERING
      Animation = UITUNF_SKL.UITUNF_CHA
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TunnelDefender
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;  WeaponSet
;;    Conditions = None 
;;    Weapon = PRIMARY TunnelDefenderRocketWeapon
;;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==========================================================================================
  WeaponSet
    Conditions = None
    Weapon            = PRIMARY   TunnelDefenderRocketWeapon
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon            = SECONDARY TunnelDefenderRocketWeaponAntiAir
    PreferredAgainst  = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
;==========================================================================================
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 400
  Prerequisites
    Object = Slth_GLABarracks Slth_GLATunnelNetwork
  End
  BuildCost = 300
  BuildTime = 5.0          ;in seconds  

  ExperienceValue = 20 20 40 60    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAInfantryTunnelDefenderCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RPGTrooperVoiceSelect
  VoiceMove = RPGTrooperVoiceMove
  VoiceGuard = RPGTrooperVoiceMove
  VoiceAttack = RPGTrooperVoiceAttack
  VoiceFear = RPGTrooperVoiceFear
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = RPGTrooperVoiceCreate
    VoiceGarrison = RPGTrooperVoiceGarrison
    VoiceEnter = RPGTrooperVoiceMove
    VoiceEnterHostile = RPGTrooperVoiceMove
    VoiceGetHealed      = RPGTrooperVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End
  Locomotor = SET_NORMAL MissileDefenderLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
 
  Behavior = StealthUpdate ModuleTag_407
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_10
    TriggeredBy = Upgrade_GLACamouflage
  End

  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RPGTrooperDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RPGTrooperDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_12
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  Scale = 0.9
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
;***THESE UNITS ARE NOT SELECTABLE ANYMORE! To kill them, you must target
;   the stinger site. If the weapon does particular types of damage, it'll
;   kill guys inside first, then the site.
Object Slth_GLAInfantryStingerSoldier

  ; *** ART Parameters ***
  SelectPortrait         = SUStinger_L
  ButtonImage            = SUStinger

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UISmsd_SKN
      IdleAnimation = UISmsd_SKL.UISmsd_STA 0 45
      IdleAnimation = UISmsd_SKL.UISmsd_IDA 
      IdleAnimation = UISmsd_SKL.UISmsd_IDB 
      IdleAnimation = UISmsd_SKL.UISmsd_IDC 
      IdleAnimation = UISmsd_SKL.UISmsd_IDD 
      AnimationMode = ONCE
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = PRIMARY Exhaust
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY Exhaust
      WeaponLaunchBone = SECONDARY Muzzle

      WaitForStateToFinishIfPossible = TRANS_START_FIRING

    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = BETWEEN_FIRING_SHOTS_B
    AliasConditionState = RELOADING_A
    AliasConditionState = RELOADING_B

    ConditionState = MOVING
      Animation = UISmsd_SKL.UISmsd_WKB 25
      AnimationMode = LOOP
    End

    ConditionState = DYING
      Animation = UISmsd_SKL.UISmsd_DTA 
      Animation = UISmsd_SKL.UISmsd_DTB 
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UISmsd_SKL.UISmsd_ADTF1
      Animation = UISmsd_SKL.UISmsd_ADTG21
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UISmsd_SKL.UISmsd_ADTF2
      Animation = UISmsd_SKL.UISmsd_ADTG22
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UISmsd_SKL.UISmsd_ADTF3
      Animation = UISmsd_SKL.UISmsd_ADTG23
      AnimationMode = ONCE
      TransitionKey = None
      WaitForStateToFinishIfPossible = NONE ; We got a Key from Default state, but Death does not need to wait for firing to finish
    End

    ConditionState = FIRING_A
      Animation = UISmsd_SKL.UISmsd_ATA
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRING
    End
    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING RELOADING_A

    ConditionState = FIRING_B
      Animation = UISmsd_SKL.UISmsd_ATB
      AnimationMode = ONCE
      TransitionKey = TRANS_START_FIRINGB
    End
    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_B
    AliasConditionState = MOVING RELOADING_B


    ConditionState = SPECIAL_CHEERING
      Animation = UISMSD_SKL.UISMSD_CHA
      AnimationMode = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:StingerSoldier
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY   StingerMissileWeapon
    AutoChooseSources   = PRIMARY   FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon              = SECONDARY StingerMissileWeaponAir
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
  ArmorSet
    Conditions      = None
    Armor           = StingerSoldierArmor ;Extra protection due to being enclosed by the stinger site.
    DamageFX        = None
  End
  VisionRange = 400.0
  ShroudClearingRange = 400

  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost = 100
  BuildTime = 1.0          ;in seconds    
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

;  CommandSet      = Slth_GLAInfantryRebelCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = StingerSoldierVoiceSelect
  VoiceMove = StingerSoldierVoiceMove
  VoiceAttack = StingerSoldierVoiceAttack
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER CLICK_THROUGH SPAWNS_ARE_THE_WEAPONS

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = StealthDetectorUpdate ModuleTag_16
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange = 200 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
  Behavior = SlavedUpdate ModuleTag_06
    ;nothing
  End
;  Behavior = ProneUpdate ModuleTag_07
;    DamageToFramesRatio = 5.0 ; I take 20 damage, I go prone for 100.  For this guy, if any of my buds or my building take damage too (I have SlaveUpdate + ProneUpdate) Prone may get cut by itself though
;  End

  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End

  Behavior = StealthUpdate ModuleTag_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = GrantUpgradeCreate ModuleUpgrade_18
    UpgradeToGrant = Upgrade_GLACamoNetting
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_StingerSoldierDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_StingerSoldierDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantryTerrorist

; *** ART Parameters ***
  SelectPortrait         = SUTerrorist_L
  ButtonImage            = SUTerrorist
  
  UpgradeCameo1 = Upgrade_GLACamouflage

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = UITRST_SKN
      IdleAnimation = UITRST_SKL.UITRST_STA 0 25
      ;Regular spice animations
      IdleAnimation = UITRST_SKL.UITRST_IDA
      IdleAnimation = UITRST_SKL.UITRST_IDB
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState = REALLYDAMAGED
      Animation = UITRST_SKL.UITRST_STA
      AnimationMode = LOOP
      TransitionKey = TRANS_Stand
    End

    ConditionState = FREEFALL
      Animation = UITRST_SKL.UITRST_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation = UITRST_SKL.UITRST_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    ConditionState = MOVING
      Animation = UITRST_SKL.UITRST_RNA 15
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING REALLYDAMAGED

    ConditionState = ATTACKING MOVING
      Animation = UITRST_SKL.UITRST_RNB 10
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
    End
    AliasConditionState = ATTACKING MOVING REALLYDAMAGED

    ConditionState = PREATTACK_A
      Animation = UITRST_SKL.UITRST_ATA
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A MOVING
 
    ConditionState = DYING
      Animation = UITRST_SKL.UITRST_DTA
      Animation = UITRST_SKL.UITRST_DTC
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UITRST_SKL.UITRST_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UITRST_SKL.UITRST_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UITRST_SKL.UITRST_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UITRST_SKL.UITRST_CHA
      AnimationMode = LOOP
    End

    TransitionState = TRANS_Falling TRANS_Chute
      Animation = UITRST_SKL.UITRST_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation = UITRST_SKL.UITRST_PTD
      AnimationMode = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Terrorist
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 200
  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost = 220
  BuildTime = 5.0          ;in seconds    
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Slth_GLAInfantryTerroristCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TerroristVoiceSelect
  VoiceMove = TerroristVoiceMove
  VoiceAttack = TerroristVoiceAttack
  VoiceFear = TerroristVoiceFear
  VoiceGuard = TerroristVoiceMove
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceGarrison         = TerroristVoiceMove
    VoiceCreate           = TerroristVoiceCreate
    VoiceEnter            = TerroristVoiceEnter
    VoiceEnterHostile     = TerroristVoiceEnterHostile
    VoiceGetHealed      = TerroristVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Behavior = CommandButtonHuntUpdate  ModuleTag_CBH01 ; allows use of command button hunt script with this unit. 
  End
  Locomotor = SET_NORMAL FastHumanLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  ;Kris
  Behavior = ConvertToCarBombCrateCollide       ModuleTag_06
    RequiredKindOf    = VEHICLE      ; we only give our bonus to VEHICLEs we collide with
    ;ForbiddenKindOf  = TRANSPORT DOZER  ; but not to TRANSPORTs or DOZERs!
    FXList            = FX_MakeCarBombSuccess
  End
 
  Behavior = SquishCollide ModuleTag_07
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL  -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TerroristDie
  End


  ;POISON_DEATHS POISON_DEATHS POISON_DEATHS POISON_DEATHS
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry_TerroristOnly
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta_TerroristOnly ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma_TerroristOnly
  End
  ;POISON_DEATHS POISON_DEATHS POISON_DEATHS POISON_DEATHS


  ; I have just pulled my ripcord, and this ain't no parachute!
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +SUICIDED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TerroristExplode
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death04
    DeathWeapon   = SuicideDynamitePack
    StartsActive  = Yes                      ; turned on by upgrade
    DeathTypes = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = StealthUpgrade ModuleTag_10
    TriggeredBy = Upgrade_GLACamouflage
  End

  Behavior = StealthUpdate ModuleTag_407
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantrySniper

  ; *** ART Parameters ***
  SelectPortrait         = GLASniper
  ButtonImage            = GLASniper

  UpgradeCameo1 = Upgrade_GLAAPBullets

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ; this says "we don't use these condition states at all, so completely
    ; ignore them for purposes of matchmaking"... this is useful to help
    ; reduce the number of AliasConditionState clauses you must add in
    ; order to avoid ambiguity in some cases.

    ; ---- standing
    DefaultConditionState
      Model = UISnipe
      IdleAnimation = AIPFDR_SKL.AIPFDR_STA
      IdleAnimation = AIPFDR_SKL.AIPFDR_IDA
      AnimationMode = ONCE
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_Standing
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState = MOVING
      Animation = AIPFDR_SKL.AIPFDR_RNA 25
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Standing
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING REALLYDAMAGED

    ConditionState  = FIRING_A
      Animation     = AIPFDR_SKL.AIPFDR_ATB                 ; recoil in standing position
      AnimationMode = ONCE
      TransitionKey = TRANS_FiringA
    End
    AliasConditionState = FIRING_A MOVING
    AliasConditionState = FIRING_A MOVING REALLYDAMAGED
    AliasConditionState = FIRING_A REALLYDAMAGED

    ConditionState  = BETWEEN_FIRING_SHOTS_A
      Animation     = AIPFDR_SKL.AIPFDR_ATBST               ; motionless in standing position
      AnimationMode = ONCE
      WaitForStateToFinishIfPossible = TRANS_FiringA
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_A REALLYDAMAGED
    AliasConditionState = RELOADING_A
    AliasConditionState = RELOADING_A REALLYDAMAGED

    ConditionState = DYING
      Animation = AIPFDR_SKL.AIPFDR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = AIPFDR_SKL.AIPFDR_ADTA1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = AIPFDR_SKL.AIPFDR_ADTA2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = AIPFDR_SKL.AIPFDR_ADTA3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = FREEFALL
      Animation = AIPFDR_SKL.AIPFDR_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation = AIPFDR_SKL.AIPFDR_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME
      ;our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING DYING

    TransitionState = TRANS_Falling TRANS_Chute
      Animation = AIPFDR_SKL.AIPFDR_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME
      ;our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Standing
      Animation = AIPFDR_SKL.AIPFDR_PTD
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Sniper
  Side               = GLAStealthGeneral
  EditorSorting      = INFANTRY
  TransportSlotCount = 1 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY AK47SniperRifle ;[AttackRange = 400.0 ;;485.0]
  End
  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End
  VisionRange         = 150.0
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End
  BuildCost = 800
  BuildTime = 12.0 ;in seconds
 ;----------------------------
  MaxSimultaneousOfType = 8
 ;----------------------------
  ExperienceValue    = 15 30 45 60  ;Experience point value at each level
  ExperienceRequired = 0 60 100 200 ;Experience points needed to gain each level
  IsTrainable        = Yes          ;Can gain experience
  CrushableLevel     = 0  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAInfantrySniperCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RebelVoiceSelect
  VoiceMove = RebelVoiceMove
  VoiceGuard = RebelVoiceMove
  VoiceAttack = RebelVoiceAttack
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  VoiceFear = RebelVoiceFear
  VoiceTaskComplete = RebelVoiceCaptureComplete
  UnitSpecificSounds
    VoiceCreate = RebelVoiceCreate
    VoiceSubdue = RebelVoiceSubdue
    VoiceGarrison = RebelVoiceGarrison
    VoiceEnter = RebelVoiceMove
    VoiceEnterHostile = RebelVoiceMove
    VoiceGetHealed = RebelVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit.
  End

  Locomotor = SET_NORMAL BasicHumanLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End

  Behavior = WeaponBonusUpgrade ModuleTag_09
    TriggeredBy = Upgrade_GLAAPBullets
  End

  Behavior = SquishCollide ModuleTag_11
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End

; --- end Death modules ---

  Behavior = StealthUpdate ModuleTag_10
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyJarmenKellDetected
    OwnDetectionEvaEvent        = OwnJarmenKellDetected
  End

  Behavior = PoisonedBehavior ModuleTag_16
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
Object Slth_GLAInfantryAngryMobNexus ;[Боевик Аль-Каиды с серо-стальной винтовкой (для скилла "Засада Аль-Каиды")]

 ;**** ART Parameters ***
  SelectPortrait = ZAlQueda
  ButtonImage    = ZAlQueda

  UpgradeCameo1 = Upgrade_InfantryCaptureBuilding
  ;UpgradeCameo2 = Upgrade_GLACamouflage

  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

  ; WHILE CARRYING PISTOL
  ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = AlquedaVar2
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD1 0 12
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD2 0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_CHD  0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_STD  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A
      WeaponFireFXBone  = PRIMARY MuzzleAK
      WeaponMuzzleFlash = PRIMARY MuzzleAKFX
      WeaponFireFXBone  = SECONDARY   "UIMOB01 R HAND"
    End
    ConditionState = MOVING
      Animation = UIMOB01_SKL.UIMOB01_RND
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = MOVING_AK
    End
    ConditionState = DYING
      Animation = UIMOB01_SKL.UIMOB01_DD1
      Animation = UIMOB01_SKL.UIMOB01_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    ; Drawing AK47
    ConditionState  = PREATTACK_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A
    ; Firing Gun
    ConditionState = FIRING_A
      Animation = UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
      AnimationMode = LOOP
;      WeaponFireFXBone = PRIMARY Muzzle
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A
    ConditionState  = RELOADING_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End
    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End
    ;Throwing bottle
    ConditionState = PREATTACK_B
      Animation    = UIMOB01_SKL.UIMOB01_ATCA_BF ; the wind up
    End
    AliasConditionState = PREATTACK_B FIRING_A
    AliasConditionState = PREATTACK_B RELOADING_A
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_A
    ConditionState = FIRING_B
      Animation     = UIMOB01_SKL.UIMOB01_ATCA_AF ; the release and follow-thru
      TransitionKey = TRANS_THROW
    End
    AliasConditionState = FIRING_B BETWEEN_FIRING_SHOTS_A
    ConditionState RELOADING_B
      Animation =UIMOB01_SKL.UIMOB01_IDA1
      WaitForStateToFinishIfPossible = TRANS_THROW ; universal hub for follow-thru
    End
    AliasConditionState = RELOADING_B RELOADING_A
    AliasConditionState = RELOADING_B FIRING_A
    AliasConditionState = RELOADING_B BETWEEN_FIRING_SHOTS_A
    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE1
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE1
      AnimationMode = ONCE
    End
    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE2
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End
    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE3
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End
  End


;**** DESIGN parameters ***

  DisplayName   = OBJECT:S          ;[Боевик Аль-Каиды(с серо-стальной винтовкой)]№№№№№№№№№№№№№№№№
  Side          = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1  ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon            = PRIMARY   AlQuedaAK47Weapon
    Weapon            = SECONDARY AlQuedaMolotovCocktailWeapon
    AutoChooseSources = SECONDARY NONE
  End
  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End
  VisionRange = 150.0
  ShroudClearingRange = 300 ;[150]*
;  Prerequisites
;    Object = Slth_GLABarracks
;    Object = Slth_GLAPalace
;  End
  BuildCost = 555
  BuildTime = 5.0
  CommandSet = GLAInfantryAlQuedaCommandSet
  ExperienceValue    = 50 100 150 400 ;Experience point value at each level
  ExperienceRequired = 0  150 450 900 ;Experience points needed to gain each level
  IsTrainable = Yes                   ;Can gain experience
  CrushableLevel = 0 ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = AlQuedaVoiceSelect
  VoiceMove = AlQuedaVoiceMove
  VoiceGuard = AlQuedaVoiceMove
  VoiceAttack = AlQuedaVoiceAttack
  VoiceFear = AlQuedaVoiceMove
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
 ;--------------------
  UnitSpecificSounds
    VoiceCreate = AlQuedaVoiceMove
    VoiceSnipePilot = AlQuedaVoiceMove
    VoiceGarrison = AlQuedaVoiceMove
    VoiceEnter = AlQuedaVoiceMove
    VoiceEnterHostile = AlQuedaVoiceMove
    VoiceGetHealed = AlQuedaVoiceMove
  End

;**** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER  ;NO_COLLIDE ;Lorenzen disables

  Body = ActiveBody BodyTag_01
    MaxHealth     = 120.0
    InitialHealth = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
;---------------------------------------------------------------------------------------
  Locomotor = SET_NORMAL AOPBasicHumanLocomotor ;[AngryMobNormalLocomotor]* ;Speed = 23
;---------------------------------------------------------------------------------------
  Behavior = PhysicsBehavior BehaviorTag_01
    Mass = 5.0
  End
  Behavior = PoisonedBehavior BehaviorTag_02
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
;----------------------------------------------------------------------
  Behavior = SquishCollide ModuleTag_08 ;-[Давится/НЕдавится юнит]
    ;nothing
  End
;---------------------------------------------------
; --- begin Death modules ---
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
  End
  Behavior = SlowDeathBehavior DeathTag_02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior DeathTag_03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior DeathTag_04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
;-----------------------------------------------------------
;=============================================[ Захват Зданий ]======================
  Behavior = SpecialAbility ModuleTag_17
    SpecialPowerTemplate      = SpecialAbilityRebelCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_18
    SpecialPowerTemplate  = SpecialAbilityRebelCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 12
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_19
    SpecialPowerTemplate = SpecialAbilityRebelCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End
;===========================================[ Стэлс ]============================
  Behavior = StealthUpdate ModuleTag_ZAQ
    StealthDelay               = 1250 ;[2500]* ; msec
    StealthForbiddenConditions = ATTACKING USING_ABILITY TAKING_DAMAGE MOVING
    MoveThresholdSpeed         = 3
    InnateStealth              = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End
;================================================================================

  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ; very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
Object Slth_GLAInfantryAngryMobPistol01

;**** ART Parameters ***
  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING PISTOL
    ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = UIMOB01_SKN
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDA1 0 12
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDA2 0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_CHA  0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_STA  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A

      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
    End

    ; Drawing pistol
    ConditionState  = PREATTACK_A
      Animation     = UIMOB01_SKL.UIMOB01_ATA1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; Firing pistol
    ConditionState = FIRING_A
      Animation = UIMOB01_SKL.UIMOB01_ATA1_LP ; looping firing
      AnimationMode = LOOP
      TransitionKey = TRANS_FIRING_A
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A
    
    ConditionState  = RELOADING_A
      Animation     = UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_A TRANS_STAND_A
      Animation     = UIMOB01_SKL.UIMOB01_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ConditionState = MOVING
      Animation = UIMOB01_SKL.UIMOB01_RNA 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING PREATTACK_A
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_C RELOADING_A 
    AliasConditionState = MOVING PREATTACK_C BETWEEN_FIRING_SHOTS_A 

    ConditionState = DYING
      Animation = UIMOB01_SKL.UIMOB01_DA1    
      Animation = UIMOB01_SKL.UIMOB01_DA2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End


    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB01_SKL.UIMOB01_CHA
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------
    ; TRANSITION FROM PISTOL TO AK47
    TransitionState = TRANS_STAND_A TRANS_STAND_AK
      Animation = UIMOB01_SKL.UIMOB01_TA-D
      AnimationMode = ONCE
    End

    ; WHILE CARRYING AK47 
    ;---------------------------------------------------------
    ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
      Model = UIMOB01_SKN
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD1 0 6
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD2 0 6
      IdleAnimation = UIMOB01_SKL.UIMOB01_CHD  0 6
      IdleAnimation = UIMOB01_SKL.UIMOB01_STD
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_AK
    End

    ConditionState = MOVING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB01_SKL.UIMOB01_RND 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB01_SKL.UIMOB01_DD1    
      Animation = UIMOB01_SKL.UIMOB01_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB01_SKL.UIMOB01_CHD
      AnimationMode = ONCE
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B WEAPONSET_PLAYER_UPGRADE
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ; Firing Gun
    ConditionState = FIRING_B WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
      AnimationMode = LOOP
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE


    ConditionState  = RELOADING_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End


    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE1
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE2
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE3
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End
  End

;**** DESIGN parameters ***

  DisplayName      = OBJECT:AngryMob
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAAngryMobPistolWeapon
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY GLAAngryMobAK47NoDamageWeapon ; for atttacking in AK-proof conditions
    Weapon = SECONDARY GLAAngryMobAK47Weapon
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost = 100
  BuildTime = 0.0           

  ExperienceValue = 5 5 5 5    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound 
  VoiceMove = NoSound   
  VoiceAttack = NoSound 

;**** ENGINEERING Parameters *** ;MOB01
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables 

  Body = ActiveBody BodyTag_01
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = MobMemberSlavedUpdate ModuleTag_04
    MustCatchUpRadius   = 40
    NoNeedToCatchUpRadius = 15
    Squirrelliness = 0.05
    CatchUpCrisisBailTime = 30; this is in calls to this update, not in frames
  End

  Locomotor = SET_NORMAL AngryMobNormalLocomotor
  Locomotor = SET_WANDER AngryMobWanderLocomotor
  Locomotor = SET_PANIC AngryMobPanicLocomotor

  Behavior = PhysicsBehavior BehaviorTag_01
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End

  Behavior = WeaponSetUpgrade UpgradeTag_01
    TriggeredBy = Upgrade_GLAArmTheMob
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
  End
  Behavior = SlowDeathBehavior DeathTag_02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior DeathTag_03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior DeathTag_04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior BehaviorTag_02
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ; very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
Object Slth_GLAInfantryAngryMobRock02

;**** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING ROCK
    ;---------------------------------------------------------
    DefaultConditionState
      Model = UIMOB02_SKN
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDB1 0 12
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDB2 0 5
      IdleAnimation = UIMOB02_SKL.UIMOB02_CHB  0 5
      IdleAnimation = UIMOB02_SKL.UIMOB02_STB  0 12
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A

      ;WeaponFireFXBone  = PRIMARY   "UIMOB02 R HAND"
      ;WeaponMuzzleFlash = PRIMARY   "UIMOB02 R HAND"
      WeaponFireFXBone =  SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
    End


    ; Drawing rock
    ConditionState  = PREATTACK_A
      Animation     = UIMOB02_SKL.UIMOB02_ATB2_BF ; wind up
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; throwing rock
    ConditionState = FIRING_A
      Animation = UIMOB02_SKL.UIMOB02_ATB1_AF ; throw
      Animation = UIMOB02_SKL.UIMOB02_ATB2_AF ; throw
      AnimationMode = ONCE
      TransitionKey = TRANS_FIRING_A
    End
    
    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation         = UIMOB02_SKL.UIMOB02_STB
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_FIRING_A
    End
    AliasConditionState = RELOADING_A


    ConditionState = MOVING
      Animation = UIMOB02_SKL.UIMOB02_RNB 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UIMOB02_SKL.UIMOB02_DB1    
      Animation = UIMOB02_SKL.UIMOB02_DB2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB02_SKL.UIMOB02_CHB
      Flags = RANDOMSTART
      AnimationMode = LOOP
    End


    ;--------------------------------------------------------
    ; TRANSITION FROM PISTOL TO AK47
    TransitionState = TRANS_STAND_A TRANS_STAND_AK
      Animation = UIMOB02_SKL.UIMOB02_TB-D
      AnimationMode = ONCE
    End


    ; WHILE CARRYING AK47 
    ;---------------------------------------------------------
    ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
      Model = UIMOB02_SKN
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDD1 0 6
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDD2 0 6
      IdleAnimation = UIMOB02_SKL.UIMOB02_CHD  0 6
      IdleAnimation = UIMOB02_SKL.UIMOB02_STD
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_AK
    End

    ConditionState = MOVING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB02_SKL.UIMOB02_RND 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB02_SKL.UIMOB02_DD1    
      Animation = UIMOB02_SKL.UIMOB02_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB02_SKL.UIMOB02_CHD
      AnimationMode = ONCE
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB02_SKL.UIMOB02_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B WEAPONSET_PLAYER_UPGRADE
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ; Firing Gun
    ConditionState = FIRING_B WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB02_SKL.UIMOB02_ATD1_LP ; looping firing
      AnimationMode = LOOP
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ConditionState  = RELOADING_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB02_SKL.UIMOB02_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB02_SKL.UIMOB02_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA1
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA2
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA3
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA3
      AnimationMode = ONCE
      TransitionKey = None
    End

  End


;**** DESIGN parameters ***

  DisplayName      = OBJECT:AngryMob
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAAngryMobRockProjectileWeapon
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY GLAAngryMobAK47NoDamageWeapon ; for atttacking in AK-proof conditions
    Weapon = SECONDARY GLAAngryMobAK47Weapon
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = Slth_GLABarracks
  End
  BuildCost = 100
  BuildTime = 0.0            

  ExperienceValue = 5 5 5 5    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound 
  VoiceMove = NoSound   
  VoiceAttack = NoSound 

;**** ENGINEERING Parameters *** ;MOB02
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables 

  Body = ActiveBody BodyTag_01
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = MobMemberSlavedUpdate ModuleTag_04
    MustCatchUpRadius   = 40
    NoNeedToCatchUpRadius = 15
    Squirrelliness = 0.05
    CatchUpCrisisBailTime = 30; this is in calls to this update, not in frames
  End

  Locomotor = SET_NORMAL AngryMobNormalLocomotor
  Locomotor = SET_WANDER AngryMobWanderLocomotor
  Locomotor = SET_PANIC AngryMobPanicLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End

  Behavior = WeaponSetUpgrade UpgradeTag_01
    TriggeredBy = Upgrade_GLAArmTheMob
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabFemaleDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabFemaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ; very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
ObjectReskin Slth_GLAInfantryAngryMobPistol03 Slth_GLAInfantryAngryMobPistol01

;**** ART Parameters ***
  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING PISTOL
    ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = UIMOB03_SKN
      IdleAnimation = UIMOB03_SKL.UIMOB03_IDA1 0 12
      IdleAnimation = UIMOB03_SKL.UIMOB03_IDA2 0 5
      IdleAnimation = UIMOB03_SKL.UIMOB03_CHA  0 5
      IdleAnimation = UIMOB03_SKL.UIMOB03_STA  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A

      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
      WeaponFireFXBone = TERTIARY "UIMOB03 R HAND"
    End

    ; Drawing pistol
    ConditionState  = PREATTACK_A
      Animation     = UIMOB03_SKL.UIMOB03_ATA1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; Firing pistol
    ConditionState = FIRING_A
      Animation = UIMOB03_SKL.UIMOB03_ATA1_LP ; looping firing
      AnimationMode = LOOP
      TransitionKey = TRANS_FIRING_A
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A

    ConditionState  = RELOADING_A
      Animation     = UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_A TRANS_STAND_A
      Animation     = UIMOB03_SKL.UIMOB03_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ConditionState = MOVING
      Animation = UIMOB03_SKL.UIMOB03_RNA 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING PREATTACK_A
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_C RELOADING_A 
    AliasConditionState = MOVING PREATTACK_C BETWEEN_FIRING_SHOTS_A 

    ConditionState = DYING
      Animation = UIMOB03_SKL.UIMOB03_DA1    
      Animation = UIMOB03_SKL.UIMOB03_DA2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End


    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB03_SKL.UIMOB03_CHA
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------
    ; TRANSITION FROM PISTOL TO AK47
    TransitionState = TRANS_STAND_A TRANS_STAND_AK
      Animation = UIMOB03_SKL.UIMOB03_TA-D
      AnimationMode = ONCE
    End


    ; WHILE CARRYING AK47 
    ;---------------------------------------------------------
    ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
      Model = UIMOB03_SKN
      IdleAnimation = UIMOB03_SKL.UIMOB03_IDD1 0 6
      IdleAnimation = UIMOB03_SKL.UIMOB03_IDD2 0 6
      IdleAnimation = UIMOB03_SKL.UIMOB03_CHD  0 6
      IdleAnimation = UIMOB03_SKL.UIMOB03_STD
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_AK
    End

    ConditionState = MOVING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB03_SKL.UIMOB03_RND 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB03_SKL.UIMOB03_DD1    
      Animation = UIMOB03_SKL.UIMOB03_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB03_SKL.UIMOB03_CHD
      AnimationMode = ONCE
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB03_SKL.UIMOB03_ATD_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B WEAPONSET_PLAYER_UPGRADE
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ; Firing Gun
    ConditionState = FIRING_B WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB03_SKL.UIMOB03_ATD_LP ; looping firing
      AnimationMode = LOOP
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE


    ConditionState  = RELOADING_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB03_SKL.UIMOB03_ATD_ED ; end firing
      AnimationMode = ONCE
    End


    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB03_SKL.UIMOB03_ATD_ED ; end firing
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------
    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB03_SKL.UIMOB03_A_ADTD1
      Animation = UIMOB03_SKL.UIMOB03_D_ADTD1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB03_SKL.UIMOB03_A_ADTD2
      Animation = UIMOB03_SKL.UIMOB03_D_ADTD2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB03_SKL.UIMOB03_A_ADTD3
      Animation = UIMOB03_SKL.UIMOB03_D_ADTD3
      AnimationMode = ONCE
      TransitionKey = None
    End

  End

  Geometry = CYLINDER
  GeometryMajorRadius = 3.0 ; very thin
  GeometryMinorRadius = 3.0 ; very thinD
  GeometryHeight = 12.0
  GeometryIsSmall = Yes

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
ObjectReskin Slth_GLAInfantryAngryMobRock04 Slth_GLAInfantryAngryMobRock02

;**** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING ROCK
    ;---------------------------------------------------------
    DefaultConditionState
      Model = UIMOB04_SKN
      IdleAnimation = UIMOB04_SKL.UIMOB04_IDB1 0 12
      IdleAnimation = UIMOB04_SKL.UIMOB04_IDB2 0 5 
      IdleAnimation = UIMOB04_SKL.UIMOB04_CHB  0 5 
      IdleAnimation = UIMOB04_SKL.UIMOB04_STB  0 12
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A
      WaitForStateToFinishIfPossible TRANS_FIRING_A

      ;WeaponFireFXBone  = PRIMARY   "UIMOB04 R HAND"
      ;WeaponMuzzleFlash = PRIMARY   "UIMOB04 R HAND"
      WeaponFireFXBone =  SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
    End


    ; Drawing rock
    ConditionState  = PREATTACK_A
      Animation     = UIMOB04_SKL.UIMOB04_ATB2_BF ; wind up
      AnimationMode = ONCE
      AnimationSpeedFactorRange 1.0 1.0
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; throwing rock
    ConditionState = FIRING_A
      Animation = UIMOB04_SKL.UIMOB04_ATB1_AF ; throw
      Animation = UIMOB04_SKL.UIMOB04_ATB2_AF ; throw
      AnimationMode = ONCE
      TransitionKey = TRANS_FIRING_A
    End

    ConditionState = BETWEEN_FIRING_SHOTS_A
      Animation         = UIMOB04_SKL.UIMOB04_STB
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_FIRING_A
    End
    AliasConditionState = RELOADING_A

    ConditionState = MOVING
      Animation = UIMOB04_SKL.UIMOB04_RUN 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UIMOB04_SKL.UIMOB04_DB1    
      Animation = UIMOB04_SKL.UIMOB04_DB2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB04_SKL.UIMOB04_CHB
      Flags = RANDOMSTART
      AnimationMode = LOOP
    End

    ;--------------------------------------------------------
    ; TRANSITION FROM PISTOL TO AK47
    TransitionState = TRANS_STAND_A TRANS_STAND_AK
      Animation = UIMOB04_SKL.UIMOB04_TB-D
      AnimationMode = ONCE
    End


    ; WHILE CARRYING AK47 
    ;---------------------------------------------------------
    ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
      Model = UIMOB04_SKN
      IdleAnimation = UIMOB04_SKL.UIMOB04_IDD1 0 6
      IdleAnimation = UIMOB04_SKL.UIMOB04_IDD2 0 6
      IdleAnimation = UIMOB04_SKL.UIMOB04_CHD  0 6
      IdleAnimation = UIMOB04_SKL.UIMOB04_STD
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_AK
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
    End

    ConditionState = MOVING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB04_SKL.UIMOB04_RND 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB04_SKL.UIMOB04_DD1    
      Animation = UIMOB04_SKL.UIMOB04_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB04_SKL.UIMOB04_CHD
      AnimationMode = ONCE
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB04_SKL.UIMOB04_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B WEAPONSET_PLAYER_UPGRADE
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ; Firing Gun
    ConditionState = FIRING_B WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB04_SKL.UIMOB04_ATD1_LP ; looping firing
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY MuzzleAK
      WeaponMuzzleFlash = PRIMARY MuzzleAKFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ConditionState  = RELOADING_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB04_SKL.UIMOB04_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB04_SKL.UIMOB04_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB04_SKL.UIMOB04_B_ADTF1
      Animation = UIMOB04_SKL.UIMOB04_D_ADTF1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB04_SKL.UIMOB04_B_ADTF2
      Animation = UIMOB04_SKL.UIMOB04_D_ADTF2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB04_SKL.UIMOB04_B_ADTF3
      Animation = UIMOB04_SKL.UIMOB04_D_ADTF3
      AnimationMode = ONCE
      TransitionKey = None
    End

  End

  Geometry = CYLINDER
  GeometryMajorRadius = 5.0 ; kinda thin
  GeometryMinorRadius = 5.0 ; kinda thinD
  GeometryHeight = 12.0
  GeometryIsSmall = Yes

End

;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
ObjectReskin Slth_GLAInfantryAngryMobPistol05 Slth_GLAInfantryAngryMobPistol01

;**** ART Parameters ***
  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING PISTOL
    ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = UIMOB05_SKN
      IdleAnimation = UIMOB05_SKL.UIMOB05_IDA1 0 12
      IdleAnimation = UIMOB05_SKL.UIMOB05_IDA2 0 5
      IdleAnimation = UIMOB05_SKL.UIMOB05_CHA  0 5
      IdleAnimation = UIMOB05_SKL.UIMOB05_STA  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A

      WeaponFireFXBone = PRIMARY Muzzle01
      WeaponMuzzleFlash = PRIMARY Muzzle01
    End

    ; Drawing pistol
    ConditionState  = PREATTACK_A
      Animation     = UIMOB05_SKL.UIMOB05_ATA1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; Firing pistol
    ConditionState = FIRING_A
      Animation = UIMOB05_SKL.UIMOB05_ATA1_LP ; looping firing
      AnimationMode = LOOP
      TransitionKey = TRANS_FIRING_A
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A
    
    ConditionState  = RELOADING_A
      Animation     = UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_A TRANS_STAND_A
      Animation     = UIMOB05_SKL.UIMOB05_ATA1_ED ; end firing
      AnimationMode = ONCE
    End

    ConditionState = MOVING
      Animation = UIMOB05_SKL.UIMOB05_RNA 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = MOVING PREATTACK_A
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_C RELOADING_A 
    AliasConditionState = MOVING PREATTACK_C BETWEEN_FIRING_SHOTS_A 

    ConditionState = DYING
      Animation = UIMOB05_SKL.UIMOB05_DA1    
      Animation = UIMOB05_SKL.UIMOB05_DA2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End


    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB05_SKL.UIMOB05_CHA
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------

    ; TRANSITION FROM PISTOL TO AK47
    TransitionState = TRANS_STAND_A TRANS_STAND_AK
      Animation = UIMOB05_SKL.UIMOB05_TA-D
      AnimationMode = ONCE
    End


    ; WHILE CARRYING AK47 
    ;---------------------------------------------------------
    ConditionState WEAPONSET_PLAYER_UPGRADE ;Idle with AK Slung
      Model = UIMOB05_SKN
      IdleAnimation = UIMOB05_SKL.UIMOB05_IDD1 0 6
      IdleAnimation = UIMOB05_SKL.UIMOB05_IDD2 0 6
      IdleAnimation = UIMOB05_SKL.UIMOB05_CHD  0 6
      IdleAnimation = UIMOB05_SKL.UIMOB05_STD
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_AK
      WeaponFireFXBone = SECONDARY MuzzleAK
      WeaponMuzzleFlash = SECONDARY MuzzleAKFX
    End

    ConditionState = MOVING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB05_SKL.UIMOB05_RND 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB05_SKL.UIMOB05_DD1    
      Animation = UIMOB05_SKL.UIMOB05_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB05_SKL.UIMOB05_CHD
      AnimationMode = ONCE
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB05_SKL.UIMOB05_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B WEAPONSET_PLAYER_UPGRADE
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE

    ; Firing Gun
    ConditionState = FIRING_B WEAPONSET_PLAYER_UPGRADE
      Animation = UIMOB05_SKL.UIMOB05_ATD1_LP ; looping firing
      AnimationMode = LOOP
      WeaponFireFXBone = PRIMARY MuzzleAK
      WeaponMuzzleFlash = PRIMARY MuzzleAKFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_B WEAPONSET_PLAYER_UPGRADE


    ConditionState  = RELOADING_B WEAPONSET_PLAYER_UPGRADE
      Animation     = UIMOB05_SKL.UIMOB05_ATD1_ED ; end firing
      AnimationMode = ONCE
    End


    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB05_SKL.UIMOB05_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    ;--------------------------------------------------------
    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB05_SKL.UIMOB05_A_ADTA1
      Animation = UIMOB05_SKL.UIMOB05_D_ADTA1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB05_SKL.UIMOB05_A_ADTA2
      Animation = UIMOB05_SKL.UIMOB05_D_ADTA2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB05_SKL.UIMOB05_A_ADTA3
      Animation = UIMOB05_SKL.UIMOB05_D_ADTA3
      AnimationMode = ONCE
      TransitionKey = None
    End

  End

  Geometry = CYLINDER
  GeometryMajorRadius = 3.0 ; very thin
  GeometryMinorRadius = 3.0 ; very thinD
  GeometryHeight = 12.0
  GeometryIsSmall = Yes

End


;------------------------------------------------------------------------------
;------------------------------------------------------------------------------
Object Slth_GLAInfantryAngryMobMolotov02

;**** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING ROCK
    ;---------------------------------------------------------
    DefaultConditionState
      Model = UIMOB02_SKN
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDB1 0 12
      IdleAnimation = UIMOB02_SKL.UIMOB02_IDB2 0 5
      IdleAnimation = UIMOB02_SKL.UIMOB02_CHB  0 5
      IdleAnimation = UIMOB02_SKL.UIMOB02_STB  0 12
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_B

      WeaponFireFXBone  = SECONDARY   "UIMOB02 R HAND"

    End

    ; Drawing rock
    ConditionState  = PREATTACK_B
      Animation     = UIMOB02_SKL.UIMOB02_ATCB_BF ; wind up
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_B FIRING_B
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_B

    ; throwing rock
    ConditionState = FIRING_B
      Animation = UIMOB02_SKL.UIMOB02_ATCB_AF ; throw
      AnimationMode = ONCE
      TransitionKey = TRANS_FIRING_B
    End

    ConditionState = BETWEEN_FIRING_SHOTS_B
      Animation         = UIMOB02_SKL.UIMOB02_STB
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_FIRING_B
    End
    AliasConditionState = RELOADING_B


    ConditionState = MOVING
      Animation = UIMOB02_SKL.UIMOB02_RNB 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING
      ParticleSysBone   = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UIMOB02_SKL.UIMOB02_DB1    
      Animation = UIMOB02_SKL.UIMOB02_DB2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UIMOB02_SKL.UIMOB02_CHB
      Flags = RANDOMSTART
      AnimationMode = LOOP
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA1
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA2
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB02_SKL.UIMOB02_B_ADTA3
      Animation = UIMOB02_SKL.UIMOB02_D_ADTA3
      AnimationMode = ONCE
      TransitionKey = None
    End

  End


;**** DESIGN parameters ***

  DisplayName      = OBJECT:AngryMob
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY GLAAngryMobMolotovCocktailProjectileWeapon ; all she does is throw molotovs
  End

  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End

  VisionRange = 150
  ShroudClearingRange = 150
  Prerequisites
    Object = Slth_GLABarracks

  End
  BuildCost = 100
  BuildTime = 0.0            

  ExperienceValue = 5 5 5 5    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = NoSound 
  VoiceMove = NoSound   
  VoiceAttack = NoSound 

;**** ENGINEERING Parameters *** ;MOB02
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER IGNORED_IN_GUI  ;NO_COLLIDE ;Lorenzen disables 

  Body = ActiveBody BodyTag_01
    MaxHealth       = 50.0
    InitialHealth   = 50.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = MobMemberSlavedUpdate ModuleTag_04
    MustCatchUpRadius   = 40
    NoNeedToCatchUpRadius = 15
    Squirrelliness = 0.05
    CatchUpCrisisBailTime = 30; this is in calls to this update, not in frames
  End

  Locomotor = SET_NORMAL AngryMobNormalLocomotor
  Locomotor = SET_WANDER AngryMobWanderLocomotor
  Locomotor = SET_PANIC AngryMobPanicLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End

  Behavior = WeaponSetUpgrade UpgradeTag_01
    TriggeredBy = Upgrade_GLAArmTheMob
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabFemaleDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabFemaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ; very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantryHijacker

  ; *** ART Parameters ***
  SelectPortrait         = SUHijacker_L
  ButtonImage            = SUHijacker
  
  ;UpgradeCameo1 = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UIHJCK_SKN
      IdleAnimation = UIHJCK_SKL.UIHJCK_STA 0 25
      IdleAnimation = UIHJCK_SKL.UIHJCK_IDA
      IdleAnimation = UIHJCK_SKL.UIHJCK_IDB
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState = MOVING
      Animation = UIHJCK_SKL.UIHJCK_RUN 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = REALLYDAMAGED MOVING


    ConditionState = DYING
      Animation = UIHJCK_SKL.UIHJCK_DTA
      Animation = UIHJCK_SKL.UIHJCK_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIHJCK_SKL.UIHJCK_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIHJCK_SKL.UIHJCK_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIHJCK_SKL.UIHJCK_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation = UIHJCK_SKL.UIHJCK_CHA
      AnimationMode = LOOP
    End

    ConditionState = PARACHUTING
      Animation = UIHJCK_SKL.UIHJCK_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    TransitionState = TRANS_Falling TRANS_Chute
      Animation = UIHJCK_SKL.UIHJCK_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End
    TransitionState = TRANS_Chute TRANS_Stand
      Animation = UIHJCK_SKL.UIHJCK_PTD
      AnimationMode = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Hijacker
  Side          = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End
;  Prerequisites
;   ; Object = Slth_GLATunnelNetwork Slth_GLAMobileTunnelNetwork GC_Slth_GLAHoleStingerSite GC_Slth_GLATunnelNetwork 
;  End
  BuildCost = 400 ;[PR9.0/PR9.1_v.01: 500]*
  BuildTime = 5.0 ;in seconds    

  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable = No                    ;Can gain experience
  CrushableLevel = 0  ;What am I?:    0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAInfantryHijackerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect =    HijackerVoiceSelect
  VoiceMove =      HijackerVoiceMove
  VoiceGuard =      HijackerVoiceMove
  VoiceAttack =    HijackerVoiceAttack
  VoiceFear =      HijackerVoiceFear
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceGarrison =  HijackerVoiceGarrison
    VoiceCreate           = HijackerVoiceCreate
    VoiceEnter            = HijackerVoiceEnter
    VoiceEnterHostile     = HijackerVoiceEnterHostile
    VoiceGetHealed      = HijackerVoiceMove
  End
  

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  EnterGuard = Yes
  HijackGuard = Yes
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SALVAGER SCORE STEALTH_GARRISON
  ;STEALTH_GARRISON Added per Dustin, 12/14--ML


  Behavior = StealthUpdate ModuleTag_02
    StealthDelay                = 500                    ; half second delay before stealthy
    StealthForbiddenConditions  = None ;MOVING only stealthy while stationary
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = HijackerUpdate ModuleTag_04
    ParachuteName = AmericaParachute
  End

  Behavior = AIUpdateInterface ModuleTag_05
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Behavior = CommandButtonHuntUpdate  ModuleTag_CBH01 ; allows use of command button hunt script with this unit. 
  End
  Locomotor = SET_NORMAL JarmenKellLocomotor

  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
  End

  Behavior = ConvertToHijackedVehicleCrateCollide       ModuleTag_08
    RequiredKindOf = VEHICLE      ; This is my car now, infidel!
  End

  Behavior = SquishCollide ModuleTag_09
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_HijackerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_HijackerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_14
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;========================================================================================================
;1) Slth_GLAInfantryAlQueda1 - С ЧЁРНЫМ АВТОМАТОМ        ;Пойдёт для элитной Аль-Каиды Кассада
;2) Slth_GLAInfantryAlQueda2 - С КОРИЧНЕВЫМ КАЛАШОМ      ;Пойдёт для обычной Аль-Каиды Диктатора и Демо
;3) Slth_GLAInfantryAlQueda3 - С СЕРО-СТАЛЬНОЙ ВИНТОВКОЙ ;Пойдёт для обычной Аль-Каиды Кассада
;========================================================================================================
;----------------------------------------------------------------
Object Slth_GLAInfantryAlQueda

;**** ART Parameters ***
  SelectPortrait         = SUAlQueda
  ButtonImage            = SUAlQueda

  UpgradeCameo1 = Upgrade_InfantryCaptureBuilding
  UpgradeCameo2 = Upgrade_GLACamouflage

  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING PISTOL
    ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = AlquedaVar1
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD1 0 12
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD2 0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_CHD  0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_STD  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A
      WeaponFireFXBone = PRIMARY MuzzleAK
      WeaponMuzzleFlash = PRIMARY MuzzleAKFX
      WeaponFireFXBone  = SECONDARY   "UIMOB01 R HAND"
    End
    ConditionState = MOVING
      Animation = UIMOB01_SKL.UIMOB01_RND
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End
    ConditionState = DYING
      Animation = UIMOB01_SKL.UIMOB01_DD1
      Animation = UIMOB01_SKL.UIMOB01_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    ; Drawing AK47
    ConditionState  = PREATTACK_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A
    ; Firing Gun
    ConditionState = FIRING_A
      Animation = UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
      AnimationMode = LOOP
;      WeaponFireFXBone = PRIMARY Muzzle
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A
    ConditionState  = RELOADING_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End
    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End
    ;Throwing bottle----------------------------------------------------------------
    ConditionState = PREATTACK_B
      Animation     = UIMOB01_SKL.UIMOB01_ATCA_BF ; the wind up
    End
    AliasConditionState = PREATTACK_B FIRING_A
    AliasConditionState = PREATTACK_B RELOADING_A
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_A
    ConditionState = FIRING_B
      Animation     = UIMOB01_SKL.UIMOB01_ATCA_AF ; the release and follow-thru
      TransitionKey = TRANS_THROW
    End
    AliasConditionState = FIRING_B BETWEEN_FIRING_SHOTS_A
    ConditionState RELOADING_B
      Animation =UIMOB01_SKL.UIMOB01_IDA1
      WaitForStateToFinishIfPossible = TRANS_THROW ; universal hub for follow-thru
    End
    AliasConditionState = RELOADING_B RELOADING_A
    AliasConditionState = RELOADING_B FIRING_A
    AliasConditionState = RELOADING_B BETWEEN_FIRING_SHOTS_A
    ;--------------------------------------------------------
    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE1
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE1
      AnimationMode = ONCE
    End
    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE2
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End
    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE3
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End
  End

;**** DESIGN parameters ***

  DisplayName   = OBJECT:S  ;[Боевик Аль-Каиды со стандартным коричневым калашом]№№№№№№№№№№№№№№№№
  Side          = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY   AlQuedaAK47Weapon
    Weapon = SECONDARY AlQuedaMolotovCocktailWeapon
    AutoChooseSources = SECONDARY NONE
  End

  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End

  VisionRange = 150.0
  ShroudClearingRange = 300 ;[150]*
  Prerequisites
    Object = Slth_GLABarracks
    Object = Slth_GLAPalace
  End
  BuildCost = 400  ;450 ;550
  BuildTime = 10.0 ;12.0
  CommandSet = GLAInfantryAlQuedaCommandSet
  ExperienceValue    = 50 100 100 150  ; Experience point value at each level
  ExperienceRequired = 0  200 300 600  ; Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = AlQuedaVoiceSelect
  VoiceMove = AlQuedaVoiceMove
  VoiceGuard = AlQuedaVoiceMove
  VoiceAttack = AlQuedaVoiceAttack
  VoiceFear = AlQuedaVoiceMove
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff

  UnitSpecificSounds
    VoiceCreate          = AlQuedaVoiceMove
    VoiceSnipePilot      = AlQuedaVoiceMove
    VoiceGarrison = AlQuedaVoiceMove
    VoiceEnter = AlQuedaVoiceMove
    VoiceEnterHostile = AlQuedaVoiceMove
    VoiceGetHealed      = AlQuedaVoiceMove
  End

;**** ENGINEERING Parameters *** ;MOB01
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER  ;NO_COLLIDE ;Lorenzen disables

  Body = ActiveBody BodyTag_01
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
;----------------------------------------------------------------------------------------------
  Locomotor = SET_NORMAL AOPBasicHumanLocomotor ;[AngryMobNormalLocomotor]* ;Speed = 23 ;[20]*
;----------------------------------------------------------------------------------------------
  Behavior = PhysicsBehavior BehaviorTag_01
    Mass = 5.0
  End
  Behavior = PoisonedBehavior BehaviorTag_02
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
  Behavior = SquishCollide ModuleTag_08 ;-[Давится/НЕдавится юнит]
    ;nothing
  End
  Behavior = WeaponSetUpgrade UpgradeTag_01
    TriggeredBy = Upgrade_GLAAPBullets
  End
;----------------------------------------------------------
; --- begin Death modules ---
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
  End
  Behavior = SlowDeathBehavior DeathTag_02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior DeathTag_03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior DeathTag_04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
;============================================= Захват Зданий ======================
  Behavior = SpecialAbility ModuleTag_17
    SpecialPowerTemplate      = SpecialAbilityRebelCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_18
    SpecialPowerTemplate  = SpecialAbilityRebelCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 12
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_19
    SpecialPowerTemplate = SpecialAbilityRebelCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End
;====================================================================================
;================ КАМУФЛЯЖ-ГРЕЙД : ==================================================
  Behavior = StealthUpgrade ModuleTag_AQSU1 ;_ASOPS1 ;_10
    TriggeredBy = Upgrade_GLACamouflage
  End
;--------------------------------------------------------------------------
  Behavior = StealthUpdate ModuleTag_AQSU2 ;[_407]*
    StealthDelay                = 1250 ;[2500]* ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE MOVING ;[ATTACKING USING_ABILITY TAKING_DAMAGE]*
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;[Yes]* ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;====================================================================================

  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ; very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;========================================================================
Object Slth_GLAInfantryAlQuedaElite ;[Demo_GLAInfantryAlQueda1]* ;№№№№№№№

;**** ART Parameters ***
  SelectPortrait         = Slth_AlQuedaElite
  ButtonImage            = Slth_AlQuedaElite

  UpgradeCameo1 = Upgrade_InfantryCaptureBuilding

  Draw = W3DModelDraw DrawTag_01
    OkToChangeModelColor = Yes

    ; WHILE CARRYING PISTOL
    ;---------------------------------------------------------
    DefaultConditionState ;Idle with Pistol Holstered
      Model = Alqueda
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD1 0 12
      IdleAnimation = UIMOB01_SKL.UIMOB01_IDD2 0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_CHD  0 5
      IdleAnimation = UIMOB01_SKL.UIMOB01_STD  0 5
      AnimationMode = ONCE
      AnimationSpeedFactorRange 0.9 1.1
      TransitionKey = TRANS_STAND_A
      WeaponFireFXBone = PRIMARY MuzzleAK
      WeaponMuzzleFlash = PRIMARY MuzzleAKFX
    End

    ConditionState = MOVING
      Animation = UIMOB01_SKL.UIMOB01_RND
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey   = MOVING_AK
    End

    ConditionState = DYING
      Animation = UIMOB01_SKL.UIMOB01_DD1
      Animation = UIMOB01_SKL.UIMOB01_DD2
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    ; Drawing AK47
    ConditionState  = PREATTACK_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ST ; start firing
      AnimationMode = ONCE
    End
    AliasConditionState = PREATTACK_A FIRING_A
    AliasConditionState = PREATTACK_A BETWEEN_FIRING_SHOTS_A

    ; Firing Gun
    ConditionState = FIRING_A
      Animation = UIMOB01_SKL.UIMOB01_ATD1_LP ; looping firing
      AnimationMode = LOOP
;      WeaponFireFXBone = PRIMARY Muzzle
;      WeaponMuzzleFlash = PRIMARY MuzzleFX
      TransitionKey = TRANS_FIRING_AK
    End
    AliasConditionState  = BETWEEN_FIRING_SHOTS_A


    ConditionState  = RELOADING_A
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End


    ; This transition allows him to put his gun away when he's finished attacking.
    TransitionState = TRANS_FIRING_AK TRANS_STAND_AK
      Animation     = UIMOB01_SKL.UIMOB01_ATD1_ED ; end firing
      AnimationMode = ONCE
    End

    ;Throwing bottle----------------------------------------------------------------
    ConditionState = PREATTACK_B
      Animation     = UIMOB01_SKL.UIMOB01_ATCA_BF ; the wind up
    End
    AliasConditionState = PREATTACK_B FIRING_A
    AliasConditionState = PREATTACK_B RELOADING_A
    AliasConditionState = PREATTACK_B BETWEEN_FIRING_SHOTS_A

    ConditionState = FIRING_B
      Animation     = UIMOB01_SKL.UIMOB01_ATCA_AF ; the release and follow-thru
      TransitionKey = TRANS_THROW
    End
    AliasConditionState = FIRING_B BETWEEN_FIRING_SHOTS_A

    ConditionState RELOADING_B
      Animation =UIMOB01_SKL.UIMOB01_IDA1
      WaitForStateToFinishIfPossible = TRANS_THROW ; universal hub for follow-thru
    End
    AliasConditionState = RELOADING_B RELOADING_A
    AliasConditionState = RELOADING_B FIRING_A
    AliasConditionState = RELOADING_B BETWEEN_FIRING_SHOTS_A

  ;--------------------------------------------------------
    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE1
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE2
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIMOB01_SKL.UIMOB01_A_ADTE3
      Animation = UIMOB01_SKL.UIMOB01_D_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End
  End

;**** DESIGN parameters ***   ;№№№№№№№№№№

  DisplayName   = OBJECT:Slth_AlQuedaElite  ;[Элитный Боевик Кассада(с чёрным автоматом)]№№№№№№№№№№№№№№№№№№№№№№№№№
  Side          = GLAStealthGeneral ;[GLADemolitionGeneral]*
  EditorSorting = INFANTRY
  TransportSlotCount = 1 ;how many "slots" we take in a transport (0 == not transportable)
;=================================================================================================================
;  WeaponSet
;    Conditions = None
;    Weapon            = PRIMARY   Slth_AlQuedaEliteRifleWeapon ;AlQuedaAK47Weapon
;    Weapon            = SECONDARY AlQuedaMolotovCocktailWeapon
;    AutoChooseSources = SECONDARY NONE
;  End
;----------------------------------------------------------------------------------
  WeaponSet
    Conditions = None 
    Weapon            = PRIMARY   Slth_AlQuedaEliteRifleWeapon ;AlQuedaAK47Weapon ;ColonelBurtonSniperRifleWeapon
    Weapon            = SECONDARY ColonelBurtonKnifeWeapon
    AutoChooseSources = PRIMARY   FROM_PLAYER FROM_SCRIPT FROM_AI
    AutoChooseSources = SECONDARY NONE
    Weapon            = TERTIARY  AlQuedaMolotovCocktailWeapon ;BurtonGrenade
    AutoChooseSources = TERTIARY  NONE
  End
;==================================================================================================================
  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End
  VisionRange = 150.0
  ShroudClearingRange = 300 ;[150]*
  Prerequisites
    Object = Slth_GLASalvageStation
    Object = Slth_GLAPalace
  End
  BuildCost = 600 ;1200 ;550
  BuildTime = 15.0 ;10.0
  CommandSet = Slth_GLAInfantryAlQuedaEliteCommandSet ;GLAInfantryAlQuedaCommandSet
  ExperienceValue     = 50 50 100 150 ;Experience point value at each level
  ExperienceRequired  = 0 100 200 400 ;Experience points needed to gain each level
  IsTrainable = Yes                   ;Can gain experience
  CrushableLevel = 0  ;What am I?:  0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect = AlQuedaVoiceSelect
  VoiceMove = AlQuedaVoiceMove
  VoiceGuard = AlQuedaVoiceMove
  VoiceAttack = AlQuedaVoiceAttack
  VoiceFear = AlQuedaVoiceMove
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate = AlQuedaVoiceMove
    VoiceSnipePilot = AlQuedaVoiceMove
    VoiceGarrison = AlQuedaVoiceMove
    VoiceEnter = AlQuedaVoiceMove
    VoiceEnterHostile = AlQuedaVoiceMove
    VoiceGetHealed = AlQuedaVoiceMove
  End

;**** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE SALVAGER HERO CANNOT_RETALIATE ;[Прокачиваюсь?/Восстанавливаюсь?/Герой/Сижу тихо, никого не трогаю, пока меня не тронут?...]
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER
;;;NO_COLLIDE ;Lorenzen disables
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
 ;-------------------------------------------
  Body = ActiveBody BodyTag_01
    MaxHealth     = 180.0 ;[120.0]*
    InitialHealth = 180.0 ;[120.0]*
  End
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
;----------------- ХЗ что и зачем, но впилил на всякий случай(Взял у Полковника Бартона)----------------------------
  Behavior = CommandButtonHuntUpdate ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End
  Behavior = AutoFindHealingUpdate ModuleTag_05 ; This update will have the unit go to a healing station if injured. jba 
    ScanRate = 1000 ; once a second.
    ScanRange = 300 ;
    NeverHeal = 0.85 ;  don't heal if we are > 85% healthy.
    AlwaysHeal = 0.25 ; if we get below 25%, find healing right away.
  End
;----------------------------------------------------------------------------------------------------------------
  Locomotor = SET_NORMAL FundamentalistFanatikLocomotor ColonelBurtonCliffLocomotor ;;[AngryMobNormalLocomotor]*
;----------------------------------------------------------------------------------------------------------------
  Behavior = PhysicsBehavior BehaviorTag_01
    Mass = 5.0
  End
  Behavior = PoisonedBehavior BehaviorTag_02
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
  Behavior = SquishCollide ModuleTag_08 ;-[Давится/НЕдавится техникой? В Данном случае: давится].
    ;nothing
  End
;================================================;[Дистанционно-пультовая взрывчатка]======
  Behavior = SpecialAbility ModuleTag_09 ;[_08]*
    SpecialPowerTemplate = SpecialAbilityColonelBurtonRemoteCharges
    UpdateModuleStartsAttack = Yes
    InitiateSound            = ColonelBurtonVoicePlantRemoteCharge
  End
  Behavior = SpecialAbilityUpdate ModuleTag_10 ;[_09]*
    SpecialPowerTemplate = SpecialAbilityColonelBurtonRemoteCharges
    StartAbilityRange = 0.0
    PreparationTime = 0
    SpecialObject = RemoteC4Charge
    MaxSpecialObjects = 8
    SpecialObjectsPersistWhenOwnerDies = No ;Charges are removed instantly when owner dies (nobody can detonate).
    AlwaysValidateSpecialObjects = Yes      ;Coupled with the above setting, this one is necessary for code optimization.
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    UnpackTime              = 5500          ;NOTE: Modifying this value will require modifying the delay for ColonelBurtonPlantCharge
    PackTime                = 0
    SkipPackingWithNoTarget = Yes           ;When yes, the packing/unpacking will be ignored when detonating charges.
    FlipOwnerAfterUnpacking = Yes
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
    UnpackSound               = ColonelBurtonPlantCharge
    LoseStealthOnTrigger      = Yes
    PreTriggerUnstealthTime   = 5000 ; in milliseconds
  End
;====================================================================
  Behavior = WeaponSetUpgrade UpgradeTag_01 ;??????????????????????
    TriggeredBy = Upgrade_GLAAPBullets ;???????????????????????????
  End
;-------------------------------------------------------------------
; --- begin Death modules --- *** Вид гибели юнита ***
  Behavior = SlowDeathBehavior DeathTag_01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
  End
  Behavior = SlowDeathBehavior DeathTag_02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior DeathTag_03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_CivilianArabMaleDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior DeathTag_04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_GIDie
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---
;========================================= Захват Зданий ============================
  Behavior = SpecialAbility ModuleTag_17
    SpecialPowerTemplate      = SpecialAbilityRebelCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound = RebelVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_18
    SpecialPowerTemplate  = SpecialAbilityRebelCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 12
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_19
    SpecialPowerTemplate = SpecialAbilityRebelCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End
;=========================================== Стэлс ====================================
  Behavior = StealthUpdate ModuleTag_AQES
    StealthDelay               = 2000 ;[2500]* ; msec
    StealthForbiddenConditions = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed         = 3
    InnateStealth              = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 4.0 ;very thin
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT

End


;------------------------------------------------------------------------------
Object Slth_GLAInfantryWorker

  ; *** ART Parameters ***
  SelectPortrait         = StlthWorker
  ButtonImage            = StlthWorker
  
  ;UpgradeCameo1 = NONE


  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model         = UIWRKR_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_STA 0 9
      IdleAnimation = UIWRKR_SKL.UIWRKR_IDA
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState  = MOVING
      Animation     = UIWRKR_SKL.UIWRKR_RNA 16
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      TransitionKey = TRANS_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING

    ConditionState = ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MS
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Standing
    End

    ConditionState = MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MSW 50
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING CARRYING

    TransitionState = TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -> CARRYING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away moving
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -> ATTACKING [STANDING]
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End
    TransitionState = TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End


    ConditionState = MOVING CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARY 12
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING CARRYING

    ConditionState = CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARST 30 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
    End

    ConditionState = DYING
      Animation = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    AliasConditionState = DYING CARRYING

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIWRKR_SKL.UIWRKR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIWRKR_SKL.UIWRKR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIWRKR_SKL.UIWRKR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End
    
    ConditionState  = ACTIVELY_CONSTRUCTING
      Animation     = UIWRKR_SKL.UIWRKR_BDA
      AnimationMode = LOOP
      TransitionKey = TRANS_Constructing
    End
    AliasConditionState = ACTIVELY_CONSTRUCTING CARRYING

    ; --------------------

    TransitionState = TRANS_Stand TRANS_Carry
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_Stand
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE_BACKWARDS
      Flags         = START_FRAME_LAST
    End
    
    TransitionState = TRANS_Stand TRANS_Constructing
      Animation     = UIWRKR_SKL.UIWRKR_TRA1
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Constructing TRANS_Stand
      Animation     = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName = OBJECT:Worker
  Side = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)


  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End
  WeaponSet
    Conditions = MINE_CLEARING_DETAIL 
    Weapon = PRIMARY WorkerMineDisarmingWeapon
  End


  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
 ;Prerequisites
 ;  Object = Slth_GLABarracks GLASupplyStash ;commented out, or else you can't build from Con Yard as Dozer.
 ;End
  BuildCost = 200
  BuildTime = 4.0          ;in seconds    
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAWorkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY SALVAGER DOZER HARVESTER SCORE ;№№№№№№№№№№[Вырезал часть кода: DISGUISER (маскировщик)]№№№№№№№№№
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = WorkerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond  = 2%    ; % of max health to repair each second
    BoredTime                     = 5000  ; in milliseconds
    BoredRange                    = 150   ; when bored, we look this far away to do something 
    MaxBoxes                      = 1
    UpgradedSupplyBoost           = 8 ; gives this much more cash for every box collected
    SupplyCenterActionDelay       = 150 ;400 ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay    = 150 ;400 ;ms per box (many small transactions)
    SupplyWarehouseScanDistance   = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = WorkerVoiceSuppliesDepleted
    ; the only "enemies" that workers can acquire are mines, to be disarmed...
    AutoAcquireEnemiesWhenIdle    = Yes
  End
  Locomotor = SET_NORMAL WorkerShoesLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = StealthDetectorUpdate ModuleTag_12
    DetectionRate         = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange       = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf   = MINE  ; we can only detect MINES, not other stealthed things
  End

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = CommandSetUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = Slth_GLAWorkerFakeBuildingsCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_15
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = Slth_GLAWorkerCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_1400
    TriggeredBy = Upgrade_ChinaWarFactoryupCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAWorkerCommandSetTech
  End

  Behavior = CommandSetUpgrade ModuleTag_1700
    TriggeredBy = Upgrade_ChinaWarFactorydownCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactoryupCommandSet Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAWorkerCommandSet
  End

  Behavior = ProductionUpdate ModuleTag_18
  End

  Behavior = SpecialAbility ModuleTag_20678
    SpecialPowerTemplate = SpecialAbilityDisguiseAsInfantry
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21568
    SpecialPowerTemplate = SpecialAbilityDisguiseAsInfantry
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;  Behavior = StealthUpdate ModuleTag_22
;;    StealthDelay                          = 1
;;    DisguisesAsTeam                       = Yes
;;    RevealDistanceFromTarget              = 100.0f
;;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;;    DisguiseFX                            = FX_BombTruckDisguise
;;    DisguiseRevealFX                      = FX_BombTruckDisguiseReveal
;;    InnateStealth                         = Yes
;;    DisguiseTransitionTime                = 2000
;;    DisguiseRevealTransitionTime          = 1000 
;;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
 Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantrySaboteur

  ; *** ART Parameters ***
  SelectPortrait         = SUSaboteur_L
  ButtonImage            = SUSaboteur

  ;UpgradeCameo1 = NONE

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    
    ; this says "we don't use these condition states at all, so completely
    ; ignore them for purposes of matchmaking"... this is useful to help
    ; reduce the number of AliasConditionState clauses you must add in
    ; order to avoid ambiguity in some cases.
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; ---- standing
    DefaultConditionState
      Model = UISabotr_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_STA 0 9
      IdleAnimation = UIWRKR_SKL.UIWRKR_IDA
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState  = MOVING
      Animation     = UIWRKR_SKL.UIWRKR_RNA 16
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      TransitionKey = TRANS_Moving
      ParticleSysBone = None InfantryDustTrails
    End

    ConditionState = DYING
      Animation = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIWRKR_SKL.UIWRKR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIWRKR_SKL.UIWRKR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIWRKR_SKL.UIWRKR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End
    
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Saboteur
  Side                = GLAStealthGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
 
  ArmorSet
    Conditions      = None
    Armor           = HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 150
  ShroudClearingRange = 300
;-----------------------------------------------------
  Prerequisites
    Object = Slth_GLABarracks Slth_GLATunnelNetwork ;[Было: Slth_GLAMobileTunnelNetwork GC_Slth_GLAHoleStingerSite GC_Slth_GLATunnelNetwork] ???
  End
;-----------------------------------------------------
  BuildCost = 300
  BuildTime = 5.0          ;in seconds  
;-----------------------------------------------------
  ExperienceValue     = 15 15 30 40     ;Experience point value at each level
  ExperienceRequired  = 0 40 60 120     ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrushableLevel      = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = GLAInfantrySaboteurCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = SaboteurVoiceSelect
  VoiceMove = SaboteurVoiceMove
  VoiceGuard = SaboteurVoiceMove
  VoiceAttack = SaboteurVoiceAttack
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  VoiceFear = SaboteurVoiceFear
  VoiceTaskComplete = NoSound
  UnitSpecificSounds
    VoiceCreate = SaboteurVoiceCreate
    VoiceSubdue = SaboteurVoiceMove
    VoiceGarrison = SaboteurVoiceMove
    VoiceEnter = SaboteurVoiceMove
    VoiceEnterHostile = SaboteurVoiceAttack
    VoiceGetHealed      = SaboteurVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SALVAGER STEALTH_GARRISON SCORE 

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL SaboteurGroundLocomotor SaboteurCliffLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End
  Behavior = StealthUpdate ModuleTag_407
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = None
    InnateStealth               = Yes ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = SquishCollide ModuleTag_11
    ;nothing
  End

  Behavior = SabotagePowerPlantCrateCollide       SabotageTag_01
    BuildingPickup = Yes
    SabotagePowerDuration = 35000
  End
  Behavior = SabotageSupplyDropzoneCrateCollide   SabotageTag_02
    BuildingPickup  = Yes
    StealCashAmount = 1800
  End
  Behavior = SabotageSuperweaponCrateCollide      SabotageTag_03
    BuildingPickup = Yes
  End
  Behavior = SabotageCommandCenterCrateCollide    SabotageTag_04
    BuildingPickup = Yes
  End
  Behavior = SabotageSupplyCenterCrateCollide     SabotageTag_05
    BuildingPickup  = Yes
    StealCashAmount = 2000
  End
  Behavior = SabotageMilitaryFactoryCrateCollide  SabotageTag_06
    BuildingPickup = Yes
    SabotageDuration = 35000
  End
  Behavior = SabotageFakeBuildingCrateCollide     SabotageTag_07
    BuildingPickup = Yes
  End
  Behavior = SabotageInternetCenterCrateCollide   SabotageTag_08
    BuildingPickup = Yes
    SabotageDuration = 20000
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RebelDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_16
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

;  Behavior = SpecialAbility ModuleTag_17
;    SpecialPowerTemplate      = SpecialAbilityRebelCaptureBuilding
;    UpdateModuleStartsAttack  = Yes
;    StartsPaused              = Yes
;    InitiateSound         = RebelVoiceCapture
;  End
;  Behavior = SpecialAbilityUpdate ModuleTag_18
;    SpecialPowerTemplate  = SpecialAbilityRebelCaptureBuilding
;    StartAbilityRange  = 5.0
;    UnpackTime            = 3000  ; (changing this will scale anim speed)
;    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
;    PackTime              = 2000  ; (changing this will scale anim speed)
;    DoCaptureFX           = Yes
;    AwardXPForTriggering  = 12
;    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
;  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Slth_GLATankScorpion2

  ; *** ART Parameters ***
  SelectPortrait         = SUScorpion_L
  ButtonImage            = SUScorpion
  
  UpgradeCameo1 = Upgrade_GLAScorpionRocket
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAToxinShells
  UpgradeCameo4 = Upgrade_GLAJunkRepair
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
 
; ------------ Normal  
    DefaultConditionState
      Model = UVLiteTank
      Turret = Turret ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
      ; note, order-dependent: we must hide/show Missile AFTER we hide/show MissileRack!
      ShowSubObject = Turret01
      HideSubObject = MissleRack01 MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED
      Model = UVLiteTank_d
    End
    AliasConditionState = RUBBLE
    
; ------------ With big turret  
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE ; one or two crates is a turret switch
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01   ; MissileRack misspelled in the Art
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = TurretUP01
      HideSubObject = MissleRack01 MissleRack02 Turret01   ; MissileRack misspelled in the Art
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED

; ---------- With missile
    ConditionState = WEAPONSET_PLAYER_UPGRADE
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 Turret01
      HideSubObject = MissleRack02 TurretUP01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

; ---------- With missile and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 TurretUP01
      HideSubObject = MissleRack02 Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

; ---------- With two missiles and big turret
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVLiteTank_d
      ShowSubObject = MissleRack01 MissleRack02 TurretUP01
      HideSubObject = Turret01; MissileRack misspelled in the Art
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Scorpion
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGun
    Weapon = SECONDARY ScorpionMissileWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne
    Weapon = SECONDARY ScorpionMissileWeapon ; No bonus at Plus One
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY ScorpionTankGunPlusOne ; No further bonus at plus two
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon = PRIMARY ScorpionTankGunPlusOne ; No further bonus at plus two
    Weapon = SECONDARY ScorpionMissileWeaponPlusTwo
  End

  ArmorSet
    Conditions      = None
    Armor           = Slth_TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 900
  BuildTime       = 8.0          ;in seconds
  VisionRange     = 125
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End

  ExperienceValue = 60 60 120 200    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLATankScorpionCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScorpionTankVoiceSelect
  VoiceMove = ScorpionTankVoiceMove
  VoiceAttack = ScorpionTankVoiceAttack
  SoundMoveStart = ScorpionTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = ScorpionTankVoiceMove

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = ScorpionTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = ScorpionTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 370.0
    InitialHealth   = 370.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 740
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 100
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ScorpionLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ScorpionTankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = WeaponSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAScorpionRocket
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.5    
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;--------------------------------------------------
Object Stlh_GLATankThrasher
  SelectPortrait = Manticore
  ButtonImage = Manticore

  UpgradeCameo1 = Upgrade_GLAScorpionRocket
  UpgradeCameo2 = Upgrade_GLAJunkRepair

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model               = NVScorpian
      ;Animation           = NVScorpian.NNVScorpian
      ;AnimationMode       = LOOP
      Turret              = TURRET01
      HideSubObject = TURRET02 HOUSECOLOR03; MissileRack misspelled in the Art
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState        = REALLYDAMAGED RUBBLE
      Model               = NVScorpian_D
    End

    ConditionState       = RUBBLE
      Model              = NVScorpian_D1
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      ShowSubObject = TURRET02 HOUSECOLOR03
      AltTurret = TURRET02
      WeaponFireFXBone    = SECONDARY FIREA02
      WeaponMuzzleFlash = SECONDARY AltMuzzleFX
      WeaponLaunchBone    = SECONDARY FIREA02
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = NVScorpian_D
      ShowSubObject = TURRET02 HOUSECOLOR03
      AltTurret = TURRET02
      WeaponFireFXBone    = SECONDARY FIREA02
      WeaponMuzzleFlash = SECONDARY MuzzleFX
      WeaponLaunchBone    = SECONDARY FIREA02
    End
    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 2.0
  End

  DisplayName = OBJECT:GLATankThrasher
  Side = GLAStealthGeneral
  EditorSorting = VEHICLE
  TransportSlotCount = 3
  WeaponSet
    Conditions = None
    Weapon = PRIMARY ThrasherTankGun
    Weapon = SECONDARY None
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY ThrasherTankGun
    Weapon = SECONDARY ThrasherMissileWeapon
  End
  ArmorSet
    Conditions = None
    Armor = TankArmor
    DamageFX = TankDamageFX
  End

  BuildCost = 550
  BuildTime = 12.0
  VisionRange = 125
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
Object = Slth_GLAPalace
  End
  ExperienceValue = 60 60 120 200
  ExperienceRequired = 0 100 200 400
  IsTrainable = Yes
  CrusherLevel = 2
  CrushableLevel = 2
  CommandSet = GLATankScorpionCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect = MediumTankVoiceSelect
  VoiceMove = MediumTankVoiceMove
  VoiceAttack = MediumTankVoiceAttack
  SoundMoveStart = MediumTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = MediumTankVoiceMove
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = MediumTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = MediumTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 220.0
    InitialHealth   = 220.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 640
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 100
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
    End
    AltTurret
      TurretTurnRate = 100
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = SECONDARY
    End
    TurretsLinked = No
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ThrasherLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 4
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ScorpionTankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = WeaponSetUpgrade ModuleTag_07
    TriggeredBy = Upgrade_GLAScorpionRocket
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = StealthUpdate ModuleTag_100112
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 5.0
  GeometryHeight = 3.0
  GeometryIsSmall = Yes
  Scale = 1.3
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleRocketBuggy  ;-[Стелс-Артиллерия "Экзекутор"]

  ; *** ART Parameters ***
  SelectPortrait         = BIAlMajnoon
  ButtonImage            = BIAlMajnoon
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState     = NONE
      Model            = IVAlMajnoon
      Turret           = TURRET01
      TurretPitch      = TURRETEL
      AltTurret        = SECTURRET
      HideSubObject    = SECTURRET 
      WeaponFireFXBone = PRIMARY PRIMARYMUZZLE
      WeaponRecoilBone = PRIMARY Barral
      WeaponLaunchBone = PRIMARY PRIMARYMUZZLE
    End
    ConditionState     = RUBBLE REALLYDAMAGED
      Model            = IVAlMajnoon
      Turret           = TURRET01
      TurretPitch      = TURRETEL
      AltTurret        = SECTURRET
      HideSubObject    = SECTURRET 
      WeaponFireFXBone = PRIMARY PRIMARYMUZZLE
      WeaponRecoilBone = PRIMARY Barral
      WeaponLaunchBone = PRIMARY PRIMARYMUZZLE
      ParticleSysBone  = TURRET01 SteamVent
    End
    TrackMarks = EXTireTrack.tga
    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide
    ;[These parameters are only used if the model has a separate suspension, 
    ;and the locomotor has HasSuspension = Yes].
    LeftFrontTireBone      = Tire01
    RightFrontTireBone     = Tire05
    LeftRearTireBone       = Tire04
    RightRearTireBone      = Tire08
    MidLeftFrontTireBone   = Tire02
    MidRightFrontTireBone  = Tire06
    MidLeftRearTireBone    = Tire03
    MidRightRearTireBone   = Tire07
    TireRotationMultiplier = 0.2       ;This * speed = rotation.
    ;PowerslideRotationAddition = 0.0  ;This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Slth_ALMajArtilCannon ;[Артиллерия "Экзекутор"]№№№№№№№№№№№№
  Side               = GLAStealthGeneral ;GLA
  EditorSorting      = VEHICLE
  TransportSlotCount = 3  ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY Slth_ArtilleryKentavrCannonGun ;ArtilleryKentavrCannonGun ;[ALMajArtilCannonGun]*
  End            ;[PrimaryDamage = 180.0/AttackRange = 380.0/DelayBetweenShots = 7500]
  ArmorSet
    Conditions = None
    Armor      = TankArmor
    DamageFX   = TankDamageFX
  End
  BuildCost = 2000 ;1400
  BuildTime = 20.0 ;17.0      ;in seconds    
  VisionRange         = 280.0 ;[200.0]*
  ShroudClearingRange = 300
 ;------------------------------------------------------
  Prerequisites
    Object = Slth_GLAArmsDealer Slth_GLASalvageStation
    Object = Slth_GLAPalace 
  End
 ;------------------------------------------------------
  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400 ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect       = HowitzerVoiceSelect
  VoiceMove         = HowitzerVoiceMove
  VoiceGuard        = HowitzerVoiceMove
  VoiceAttack       = HowitzerVoiceAttack
  SoundMoveStart        = InfernoCannonMoveStart
  SoundMoveStartDamaged = InfernoCannonMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate     = HowitzerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceCrush      = HowitzerVoiceMove
    VoiceEnter      = HowitzerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE SALVAGER

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 260.0 ;[120.0]*
    InitialHealth = 260.0 ;[120.0]*
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 50
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes NotWhileAttacking
  End
  Locomotor = SET_NORMAL InfernoLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire  
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_InfernoCannonDeathEffect
  End
  Behavior = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  Behavior = CreateCrateDie ModuleTag_1000
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = ProductionUpdate ModuleTag_13
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000     ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3    ; taking this much damage...
    AflameDamageDelay = 500   ; this often.
  End
  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = AutoHealBehavior ModuleTag_0600
    HealingAmount = 3
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
;--------------------------------------------------------;№№№№№№№№
  Behavior = StealthUpgrade ModuleTag_SUALMJ1 ;_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;-------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUALMJ2 ;_10
    StealthDelay               = 2500 ; msec
    StealthForbiddenConditions = MOVING ATTACKING USING_ABILITY TAKING_DAMAGE ;[НЕВИДИМ КОГДА НЕ ДВИГАЕТСЯ И НЕ СТРЕЛЯЕТ...]
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;--------------------------------------------------------;№№№№№№№№

  Geometry            = BOX
  GeometryMajorRadius = 25.0
  GeometryMinorRadius = 20.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   
  Scale = 0.9
End

;------------------------------------------------------------------------------
;GLA Combat Bike
Object Slth_GLAVehicleCombatBike

  ; *** ART Parameters ***
  SelectPortrait         = ComBike2
  ButtonImage            = ComBike2
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight

      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)


    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ;Terror Bike
    ;------------------------------
    ConditionState  RIDER5
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING

    ConditionState = REALLYDAMAGED RIDER5
      Model = UVComBike_d
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED RIDER5
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End
    ConditionState = TOPPLED REALLYDAMAGED RIDER5
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED


    ;Missile Bike
    ;------------------------------
    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED
  
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End


    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Saboteur animations
    ;-----------------------
    ConditionState = RIDER7 
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CombatBike
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerMachineGun
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  WeaponSet
    Conditions = WEAPON_RIDER8
    Weapon = PRIMARY AK47SniperRifle
  End
  ArmorSet
    Conditions      = None
    Armor           = CombatBikeArmor ;We can't have the game crashing because this vehicle doesn't technically have a pilot.
    DamageFX        = TankDamageFX
  End
;------------------------------------------------------------------------------
  BuildCost = 370
  BuildTime = 4.0 ;[в 9.1.18 было: 5.0] ;[в 9.0-9.1.13 было: 4.0]* ;in seconds
;------------------------------------------------------------------------------
  VisionRange     = 200
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  ExperienceValue       = 30 30 60 90 ;[Было: 50 50 100 150]* ;Experience point value at each level
  ExperienceRequired    = 0 200 400 800  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  ;CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  ;CommandSet  = Slth_GLAVehicleCombatBikeCommandSet ****COMMANDSET is overwritten in RiderChangeContain!

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100
    InitialHealth   = 100

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_11
    RequiredStatus = STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_SaboteurFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 1
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

;  Behavior = WeaponSetUpgrade ModuleTag_09
;    TriggeredBy = Upgrade_GLABuggyAmmo
;  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
    Rider1 = Slth_GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider2 = Slth_GLAInfantryRebel          RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider3 = Slth_GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider4 = Slth_GLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
    Rider5 = Slth_GLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
    Rider6 = Slth_GLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider7 = Slth_GLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider8 = Slth_GLAInfantrySniper         RIDER2 WEAPON_RIDER8 STATUS_RIDER4 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    ScuttleDelay          = 1500
    ScuttleStatus         = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 2
    InitialPayload        = Slth_GLAInfantrySaboteur 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End
;==================================================
  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000    ;If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3   ;taking this much damage...
    AflameDamageDelay = 500  ;this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    

  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


;=================================================================================================
Object Slth_GLAVehicleBikeSquad

  ; *** ART Parameters ***
  SelectPortrait         = fd2
  ButtonImage            = fd2

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = None
    End
  End

;************ DESIGN parameters *****************

  DisplayName   = OBJECT:BikeSquad
  Side          = GLAStealthGeneral
  RadarPriority = NOT_ON_RADAR
  EditorSorting = VEHICLE
  TransportSlotCount = 0 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY GLAAngryMobNexusHarmlessWeapon
    Weapon = SECONDARY GLAAngryMobNexusHarmlessWeapon
    Weapon = TERTIARY GLAAngryMobNexusHarmlessWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = InvulnerableAllArmor
    DamageFX   = None
  End
  BuildCost = 800
  BuildTime = 12.0              ;in seconds
  VisionRange     = 150.0       ;it can scout for the spawn
  ShroudClearingRange = 300 ;0
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
;----------------------------
  MaxSimultaneousOfType = 8
;----------------------------
  ExperienceValue = 5 5 5 5 ;Experience point value at each level
  IsTrainable = Yes
  CommandSet = Slth_GLAInfantryAngryMobCommandSet

;**** ENGINEERING Parameters ******************************

  RadarPriority = UNIT
  KindOf = PRELOAD CAN_ATTACK VEHICLE MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
  Body = ImmortalBody ModuleTag_02
    MaxHealth       = 99999.0
    InitialHealth   = 99999.0
  End
  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_WANDER AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_PANIC  AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = SpawnBehavior ModuleTag_05
    SpawnNumber       = 4
    SpawnReplaceDelay = 9999999 ;None!
        SpawnTemplateName = Slth_GLAVehicleCombatBikeRebel ; Rebel
        SpawnTemplateName = Slth_GLAVehicleCombatBikeRebel ; Rebel
        SpawnTemplateName = Slth_GLAVehicleCombatBikeRebel ; Rebel
        SpawnTemplateName = Slth_GLAVehicleCombatBikeRebel ; Rebel
    ExitByBudding = Yes;!
    InitialBurst = 5 ; the first set of 5 will not delay
    OneShot     = No
    AggregateHealth = Yes
    SlavesHaveFreeWill = Yes
  End
  Behavior = QueueProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0
    ExitDelay     = 5000 ; 5 sec
    InitialBurst = 5 ; the first set of 5 will not delay
  End
  Behavior = DestroyDie ModuleTag_07
    DeathTypes = ALL
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight = 1.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleCombatBikeRebel

  ; *** ART Parameters ***
  SelectPortrait = SUComBike2_L
  ButtonImage    = SUComBike2
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)
    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    TrackMarks = EXTireTrack03.tga
    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIRGrd_SKN
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Saboteur animations
    ;-----------------------
    ConditionState = RIDER7 
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = UISabotr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BikeSquad ;OBJECT:CombatBike ;№№№№№№№№№№№
  Side                = GLAStealthGeneral ;GLA
  EditorSorting       = VEHICLE
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerMachineGun
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions = None
    Armor      = CombatBikeArmor ;We can't have the game crashing because this vehicle doesn't technically have a pilot.
    DamageFX   = TankDamageFX
  End
  BuildCost = 500
  BuildTime = 6.0          ;in seconds
  VisionRange     = 180.0
  ShroudClearingRange = 300

  ExperienceValue     = 5 5 5 5  ;[Было: 50 50 100 150]*    ;Experience point value at each level
  ExperienceRequired  = 0 40 60 120 ;[Было: 0 200 400 800]* ;Experience points needed to gain each level
  IsTrainable        = Yes            ;Can gain experience
  ;CrusherLevel  = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ;CommandSet = GLAVehicleCombatBikeCommandSet ****COMMANDSET is overwritten in RiderChangeContain!

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_11
    RequiredStatus = STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_SaboteurFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 1
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
;========================================================================================================================
  Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
;Rider1 = GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    Rider2 = Slth_GLAInfantryRebel  RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;Rider3 = GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;Rider4 = GLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
;Rider5 = GLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
;Rider6 = GLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;Rider7 = GLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
    ScuttleDelay  = 1500
    ScuttleStatus = TOPPLED
;------------------------------------------------------------------------------------------------------------------------
    ;Standard TransportContain stuff
    Slots                 = 2
    InitialPayload        = Slth_GLAInfantryRebel 1 ;№№№№№№№№№№№№№№№№№№№
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    DoorOpenTime = 0
  End
;===========================================================================================
  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End

  Behavior = StealthUpdate ModuleTag_19
    UseRiderStealth             = Yes
    ;StealthDelay                = 2000 ; msec
    ;StealthForbiddenConditions  = ATTACKING
    ;InnateStealth               = Yes
    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior = FXListDie ModuleDieSoundTag_22
    DeathTypes = ALL -TOPPLED ; Not if we are "dying" by being abandoned by our human.  Nobody left to scream
    DeathFX = FX_CombatCycleDie
  End
  Behavior = FXListDie ModuleDieSoundTag_23
    DeathTypes = NONE +TOPPLED
    DeathFX = FX_CombatCycleDieNoScream
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
; This is commented out per hotlist request 10/9 ML
;------------------------------------------------------------
;№№№№№ [После крушения мотоцикла остаётся пехотинец]: №№№№№№
;------------------------------------------------------------
  Behavior = CreateObjectDie ModuleTag_24 ;[ModuleTag_15]*
    DeathTypes = ALL -CRUSHED -SPLATTED
    CreationList = Slth_OCL_GLAInfantryRebelDebris01 ;<===============[Ссыль на пехотинца]
    ExemptStatus = HIJACKED
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleQuadCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUQuadCannonSN_L
  ButtonImage            = SUQuadCannonSN
  
  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  ;UpgradeCameo3 = GC_Slth_Upgrade_GLAQuadCannonSnipe
  ;UpgradeCameo4 = Upgrade_GLACamouflageVehicle
  ;UpgradeCameo5 = XXX
  
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = None
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
      
    ConditionState = REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_B 
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_C
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B 
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_C 
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone  = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_C REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone  = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY   BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY   BarrelUp02FX
      WeaponRecoilBone  = TERTIARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End


    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
 
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This unit doesn't powerslide.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:QuadCannon
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
;===================================================================================
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SniperQuadCannonGun
    Weapon = SECONDARY SniperQuadCannonGunAir ;<===============================(1)
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY SniperQuadCannonGunUpgradeOne
    Weapon = SECONDARY SniperQuadCannonGunUpgradeOneAir ;<=====================(2)
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY SniperQuadCannonGunUpgradeTwo
    Weapon = SECONDARY SniperQuadCannonGunUpgradeTwoAir ;<=====================(3)
  End
;===================================================================================
  ArmorSet
    Conditions      = None
    Armor           = QuadCannonArmor
    DamageFX        = TankDamageFX
  End
 ;-----------------------------------------------------
  BuildCost       = 750 ;880
  BuildTime       = 7.0 ;10.0          ;in seconds
 ;-----------------------------------------------------
  VisionRange     = 250.0
  ShroudClearingRange = 300
 ;-----------------------------
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  CommandSet = Slth_GLAVehicleQuadCannon

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = Slth_QuadCannonVoiceSelect
  VoiceMove             = QuadCannonVoiceMove
  VoiceAttack           = Slth_QuadCannonVoiceAttack
  VoiceAttackAir        = QuadCannonVoiceAttackAir
  SoundMoveStart        = QuadCannonMoveStart
  SoundMoveStartDamaged = QuadCannonMoveStart
  VoiceGuard             = QuadCannonVoiceMove
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
   ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = Slth_QuadCannonVoiceCreate
   TurretMoveStart      = NoSound
   TurretMoveLoop       = TurretMoveLoop
   ; Required for the W3DTruckDraw module
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
   VoiceSalvage         = QuadCannonVoiceSalvage
   VoiceCrush           = QuadCannonVoiceCrush
   VoiceEnter           = QuadCannonVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End
  
  Locomotor = SET_NORMAL QuadCannonLocomotor
  
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End
  
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 411
    DestructionDelay = 150
    DestructionDelayVariance = 250
    OCL = FINAL    OCL_QuadCannonDeathEffect  
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End
  
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 3
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = WeaponBonusUpgrade ModuleTag_12
    TriggeredBy = Upgrade_GLAAPBullets
  End 

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = StealthUpdate ModuleTag_2100
;    StealthDelay                = 2400 ; msec
;    StealthForbiddenConditions  = ATTACKING USING_ABILITY
;    MoveThresholdSpeed          = 3
;    InnateStealth               = No ;Requires upgrade first
;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = StealthUpgrade ModuleTag_2200
;    TriggeredBy = Upgrade_GLACamouflageVehicle
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = WeaponSetUpgrade ModuleTag_15
;    TriggeredBy = GC_Slth_Upgrade_GLAQuadCannonSnipe
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;Also called Toxin Tractor && ToxinTractor
Object Slth_GLAVehicleToxinTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUToxinTractor_L
  ButtonImage            = SUToxinTractor
  
  UpgradeCameo1 = Upgrade_GLAAnthraxBeta
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVToxTrack
      Turret = Turret
      TurretPitch = TurretEL
      ShowSubObject = Turret
      HideSubObject = TurretUP01 TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY Spigot
      WeaponLaunchBone = SECONDARY Spigot
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE

    ConditionState = USING_WEAPON_B
      Model = UVToxTrack
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE
      Model = UVToxTrack
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED
      Model = UVToxTrack_D
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
    AliasConditionState RUBBLE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE

    ConditionState = USING_WEAPON_B REALLYDAMAGED
      Model = UVToxTrack_D
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVToxTrack_D
      ParticleSysBone = none AnthraxPuddleContinuous
    End

; -------------- Turret change #1
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxTrack_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01 TOXTANKS03 HOUSECOLOR04
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxTrack_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxTrack_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02 TOXTANKS03 HOUSECOLOR04
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    End

; -------------- Turret change #2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxTrack_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxTrack_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    End

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxTrack_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02 TOXTANKS03 HOUSECOLOR04
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    TrackMarks = EXTireTrack.tga
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This vehicle doesn't powerslide.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ToxinTruck
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet 
    Conditions        = None 
    Weapon            = PRIMARY     ToxinTruckGun
    Weapon            = SECONDARY   ToxinTruckSprayer
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE 
    Weapon            = PRIMARY     ToxinTruckGunUpgraded
    Weapon            = SECONDARY   ToxinTruckSprayerUpgraded
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_ONE 
    Weapon            = PRIMARY     ToxinTruckGunPlusOne
    Weapon            = SECONDARY   ToxinTruckSprayerPlusOne
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_ONE PLAYER_UPGRADE 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusOne
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusOne
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet 
    Conditions        = CRATEUPGRADE_TWO 
    Weapon            = PRIMARY     ToxinTruckGunPlusTwo
    Weapon            = SECONDARY   ToxinTruckSprayerPlusTwo
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_TWO PLAYER_UPGRADE 
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusTwo
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusTwo
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End

  ArmorSet
    Conditions        = None
    Armor             = ToxinTruckArmorAntiEX
    DamageFX          = TruckDamageFX
  End
  BuildCost           = 600
  BuildTime           = 5.0          ;in seconds    
  VisionRange         = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  ExperienceValue     = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired  = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable         = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = GLAVehicleToxinTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = ToxinTractorVoiceSelect
  VoiceMove           = ToxinTractorVoiceMove
  VoiceGuard          = ToxinTractorVoiceMove
  VoiceAttack         = ToxinTractorVoiceAttack
  SoundMoveStart      = ToxinTractorMoveStart
  SoundMoveStartDamaged = ToxinTractorMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = ToxinTractorVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
    VoiceCrush      = ToxinTractorVoiceCrush
    VoiceEnter           = ToxinTractorVoiceMove
    VoicePoisonLocation = ToxinTractorVoiceAttackContam

  End

  ; *** ENGINEERING Parameters ***
  RadarPriority         = UNIT
  KindOf                = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth           = 240.0
    InitialHealth       = 240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    Turret
      TurretTurnRate            = 180
      TurretPitchRate           = 180
      AllowsPitch               = Yes
      MinPhysicalPitch          = -20 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      TurretFireAngleSweep      = PRIMARY 8
      TurretSweepSpeedModifier  = PRIMARY 0.5    ; Sweep slower than you turn
      ControlledWeaponSlots     = PRIMARY
    End
  End
  Locomotor             = SET_NORMAL ToxinTruckLocomotor
  Behavior              = PhysicsBehavior ModuleTag_04
    Mass                = 50.0
  End

  Behavior                    = SlowDeathBehavior  ModuleTag_05
    DeathTypes                = ALL -CRUSHED -SPLATTED
    ProbabilityModifier       = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay          = 0
    DestructionDelayVariance  = 200
    FX                        = INITIAL FX_ToxinTractorDie
    OCL                       = INITIAL OCL_ToxinTractorDeathEffect
    FX                        = FINAL FX_ToxinTruckExplosionOneFinal
  End
  Behavior                    = InstantDeathBehavior  ModuleTag_06
    DeathTypes                = NONE +CRUSHED +SPLATTED
    FX                        = FX_CarCrush
    OCL                       = OCL_CrusaderTank_CrushEffect
  End
    
  Behavior = CreateCrateDie ModuleTag_07
    CrateData   = SalvageCrateData
    ;CrateData  = EliteTankCrateData
    ;CrateData  = HeroicTankCrateData
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    ; the Toxin Tractor gets this upgrade if we either buy the upgrade,
    ; or if it gets HEROIC status
    TriggeredBy   = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
  End
  
  Behavior                          = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1  = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1          = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  Behavior = AutoHealBehavior ModuleTag_12
    HealingAmount   = 2
    HealingDelay    = 1000 ; msec
    TriggeredBy     = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration          = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount      = 3       ; taking this much damage...
    AflameDamageDelay       = 500       ; this often.
  End

  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_13
    WeaponSlot            = SECONDARY
    ConflictsWith         = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
    OCL                   = OCL_PoisonFieldMedium
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End
  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_14
    WeaponSlot            = SECONDARY
    TriggeredBy           = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
    OCL                   = OCL_PoisonFieldUpgradedMedium
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15    ;These two make the right damage field at death
    DeathWeapon   = ToxinShellWeapon
    StartsActive  = Yes   
    ConflictsWith = Upgrade_GLAAnthraxBeta
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = ToxinShellWeaponUpgraded
    StartsActive  = No   
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.0   ; set to make the projectile stream look right  
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleBombTruck

  ; *** ART Parameters ***
  SelectPortrait         = SUBombTruck_L
  ButtonImage            = SUBombTruck
  
  UpgradeCameo1 = Upgrade_GLABombTruckHighExplosiveBomb
  UpgradeCameo2 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    
    DefaultConditionState
      Model = UVBMBTRUK
      Animation = UVBMBTRUK.UVBMBTRUK
      AnimationMode = LOOP

      ;Display the default bombload -- and the upgrades will handle the rest!
      HideSubObject = Bombload02 Bombload03 Bombload04
    End

    ConditionState = REALLYDAMAGED
      Model = UVBMBTRUK_D
      Animation = UVBMBTRUK_D.UVBMBTRUK_D
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVBMBTRUK_D
    End

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    MidLeftFrontTireBone = Tire03
    MidRightFrontTireBone = Tire04
    LeftRearTireBone = Tire05
    RightRearTireBone = Tire06
    TireRotationMultiplier = 0.2   ; this * speed = rotation.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BombTruck
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 550
  BuildTime       = 15.0          ;in seconds    
  VisionRange     = 150 ; Used in attack move targeting
  ShroudClearingRange     = 200
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAVehicleBombTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BombTruckVoiceSelect
  VoiceMove = BombTruckVoiceMove
  VoiceGuard = BombTruckVoiceMove
  VoiceAttack = BombTruckVoiceAttack
  SoundMoveStart = BombTruckMoveStart
  SoundMoveStartDamaged = BombTruckMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate                   = BombTruckVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = NoSound
    DisguiseStarted               = BombTruckDisguiseStarted
    DisguiseRevealedSuccess       = BombTruckDisguiseRevealedSuccess
    DisguiseRevealedFailure       = BombTruckDisguiseRevealedFailure
    VoiceEnter = BombTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE DISGUISER CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 220.0
    InitialHealth   = 220.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level
  IsTrainable = No

  ;Kris: Um, bomb trucks don't gain experience.
  ;Behavior = VeterancyGainCreate ModuleTag_03
  ;  StartingLevel = VETERAN
  ;End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End
  Locomotor = SET_NORMAL BombTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = ProductionUpdate ModuleTag_07
    ; nothing
  End

  Behavior = SlowDeathBehavior  ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BombTruckDeathEffect
  End

  ;Behavior = DestroyDie
    ;nothing
  ;End


  ;************************************************************************************************
  ;* WHICH BOMB DO WE USE??? 
  ;* We have 2 damage possibilities -- (normal OR high explosive) 
  ;* So part 1 is inflicting the damage itself without creating effects
  ;* The complicated part is the part where we have 6 possible effect explosions based on 
  ;* all the possible upgrade combinations. Note that bio weapons don't inflict damage through
  ;* the explosion.
  ;*
  ;* DAMAGE COMBINATIONS (NO EFFECTS):
  ;* 1) Normal (doesn't have high explosive upgrade)
  ;* 2) High explosive (has high-explosive upgrade)
  ;*
  ;* EFFECT COMBINATIONS (NO DAMAGE):
  ;* 1) Normal (no upgrades)
  ;* 2) Bio (bio-bomb upgrade)
  ;* 3) Anthrax (bio-bomb and anthrax upgrade)
  ;* 4) High explosive (high explosive upgrade)
  ;* 5) High explosive bio (high explosive and bio-bomb upgrade)
  ;* 6) High explosive anthrax (high explosive, bio-bomb, and anthrax upgrades)
  ;************************************************************************************************

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 1 -- Normal explosion (can't have high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon   = BombTruckDefaultBombDamage
    StartsActive  = Yes                      ; turned on by upgrade
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 2 -- High explosion (always plays if it has high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_10
    DeathWeapon   = BombTruckHighExplosionBombDamage
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 1 - Regular explosion (no upgrades)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = BombTruckDefaultBombEffect
    StartsActive  = Yes                      ; turned on by upgrade
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 2 - Bio explosion 
  ;* Requires:    Bio upgrade
  ;* Can't have:  Anthrax upgrade, high explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = BombTruckBioBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 3 - Anthrax explosion 
  ;* Requires:    Bio upgrade and anthrax upgrade
  ;* Can't have:  High explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    DeathWeapon   = BombTruckAnthraxBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb 
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 4 - High explosion
  ;* Requires:    High explosive upgrade
  ;* Can't have:  Bio upgrade and anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14
    DeathWeapon   = BombTruckHighExplosiveBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith = Upgrade_GLABombTruckBioBomb
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 5 - High explosive bio explosion 
  ;* Requires:    High explosive upgrade and bio upgrade 
  ;* Can't have:  Anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
    DeathWeapon   = BombTruckHighExplosiveBioBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 6 - High explosive Anthrax explosion 
  ;* Requires:    High explosive, Bio, and anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = BombTruckHighExplosiveAnthraxBombEffect
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;-------------------------------------------------------------------
  ; Now we get to display the payload based on upgrades!!! 
  ;-------------------------------------------------------------------
  Behavior = SubObjectsUpgrade ModuleTag_17
    ;*** Bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb 
    ConflictsWith  = Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload02 
    HideSubObjects = Bombload01 Bombload03 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_18
    ;*** High-explosive bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith  = Upgrade_GLABombTruckBioBomb 
    ShowSubObjects = Bombload03 
    HideSubObjects = Bombload01 Bombload02 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_19
    ;*** High-explosive bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload04 
    HideSubObjects = Bombload01 Bombload02 Bombload03
    RequiresAllTriggers = Yes
  End
  ;-------------------------------------------------------------------


  Behavior = SpecialAbility ModuleTag_20
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End

  Behavior = StealthUpdate ModuleTag_22
    StealthDelay                          = 1
    DisguisesAsTeam                       = Yes
    RevealDistanceFromTarget              = 100.0f
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    DisguiseFX                            = FX_BombTruckDisguise
    DisguiseRevealFX                      = FX_BombTruckDisguiseReveal
    InnateStealth                         = Yes
    DisguiseTransitionTime                = 2000
    DisguiseRevealTransitionTime          = 1000 
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior = TransitionDamageFX ModuleTag_26
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleScudLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SUScudLauncher_L
  ButtonImage            = SUScudLauncher

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAAnthraxBeta
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset
  
    DefaultConditionState
      Model = UVScudLchr
      Turret = TURRET
      TurretPitch = TURRETEL
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = UVScudLchr_d
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVScudLchr
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVScudLchr
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:ScudLauncher
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY SCUDLauncherGunExplosive
    Weapon = SECONDARY SCUDLauncherGunToxin
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY SCUDLauncherGunExplosive
    Weapon = SECONDARY SCUDLauncherGunAnthrax
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOne
    Weapon = SECONDARY SCUDLauncherGunToxinPlusOne
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOne
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusOne
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwo
    Weapon = SECONDARY SCUDLauncherGunToxinPlusTwo
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwo
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusTwo
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1200
  BuildTime       = 15.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
    Science = SCIENCE_ScudLauncher
  End

  ExperienceValue = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = Slth_GLAVehicleScudLauncherCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudLauncherVoiceSelect
  VoiceMove = ScudLauncherVoiceMove
  VoiceGuard = ScudLauncherVoiceMove
  VoiceAttack = ScudLauncherVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate       = ScudLauncherVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush = ScudLauncherVoiceCrush
    VoiceEnter = ScudLauncherVoiceMove
    VoicePrimaryWeaponMode = ScudLauncherVoiceModeHiEx
    VoiceSecondaryWeaponMode = ScudLauncherVoiceModeAnthrax
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180.0
    InitialHealth   = 180.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 60   ; turn rate, in degrees per sec
      TurretPitchRate = 60
      FirePitch = 90  ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End  

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL ScudLauncherLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_SCUDLauncherDeathEffect  
    FX  = FINAL    FX_ScudLauncherExplosionOneFinal
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = WeaponSetUpgrade ModuleTag_23
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End

  Behavior = LockWeaponCreate ModuleTag_24
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length 

End

;----------------------------------------------------------------------------------
; this unit is never really "built"; building one triggers the random building of
; one of the other chassis. If you want a *specific* chassis, choose it explicitly;
; if you want a chassis at random, specify this.
;==============================================================================================
Object Slth_GLAVehicleTechnical

  ; *** ART Parameters ***
  SelectPortrait         = SUTechnical_L 
  ButtonImage            = SUTechnical

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      ; give it a model so it'll show up in WB
      Model = UVTechTrck
    End
  End
;--------------------------------------------------------------
  ; set cost and time fields here or else they won't work
;--------------------------------------------------------------
  BuildCost       = 500 ;[Было: 410]*
  BuildTime       = 3.0 ;in seconds
;--------------------------------------------------------------
  Prerequisites
    Object = Slth_GLAArmsDealer
  End
;--------------------------------------------------------------
  ; Needed to get the Veterancy Overlays on top of the Technical with his build variations.
  ;------------------------------------------------------------
  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_TechnicalTraining
  End

  Side = GLAStealthGeneral
  EditorSorting = VEHICLE
  BuildVariations = Slth_GLAVehicleTechnicalChassisOne Slth_GLAVehicleTechnicalChassisTwo Slth_GLAVehicleTechnicalChassisThree

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE TRANSPORT

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleTechnicalChassisOne

  ; *** ART Parameters ***
  SelectPortrait         = SUTechnical_L 
  ButtonImage            = SUTechnical

  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01

    ExtraPublicBone = Dum_Turret 

    DefaultConditionState
      Model         = UVTechTrck
    End
    ConditionState  = REALLYDAMAGED
      Model         = UVTechTrck_d
    End
    ConditionState  = RUBBLE
      Model         = UVTechTrck_d
    End

    OkToChangeModelColor        = Yes
    TrackMarks                  = EXTireTrack.tga
    Dust                        = TechnicalDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_02

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Technical
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End
  ;update cost and time fields in Object GLAVehicleTechnical, or else they won't work
  ;BuildCost            = 300
  ;BuildTime            = 5.0          ;in seconds    
  VisionRange           = 150
  ShroudClearingRange   = 300
;  Prerequisites
;    Object = Slth_GLAArmsDealer
;  End
  ExperienceValue         = 25 25 50 100    ;Experience point value at each level
  ExperienceRequired      = 0 50 75 150  ;Experience points needed to gain each level
  IsTrainable             = Yes             ;Can gain experience
  CrusherLevel            = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel          = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet              = GLAVehicleTechnicalCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TechnicalVoiceSelect
  VoiceMove = TechnicalVoiceMove
  VoiceGuard = TechnicalVoiceMove
  VoiceAttack = TechnicalVoiceAttack
  SoundMoveStart = TechnicalMoveStart
  SoundMoveStartDamaged = TechnicalMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = TechnicalVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceSalvage = TechnicalVoiceSalvage
    VoiceCrush      = TechnicalVoiceCrush
    VoiceUnload     = TechnicalVoiceUnload
    VoiceEnter = TechnicalVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE TRANSPORT

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_TechnicalTraining
  End

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 180
    InitialHealth   = 180

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_05
    Turret
      TurretTurnRate = 240       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      MinIdleScanAngle = 30      ; in degrees off the natural turret angle
      MaxIdleScanAngle = 60      ; in degrees off the natural turret angle
      MinIdleScanInterval = 5000 ; in milliseconds
      MaxIdleScanInterval = 10000 ; in milliseconds
      ControlledWeaponSlots = PRIMARY SECONDARY TERTIARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL TechnicalLocomotor
  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 40.0
  End
  Behavior = AutoHealBehavior ModuleTag_07
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_TechnicalJeep_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_15
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1100
    ;DestructionDelayVariance = 500
    OCL = INITIAL OCL_TechnicalAirDeathStart
    FX = INITIAL FX_M1A1Explos
    OCL = FINAL OCL_TechnicalAirDeathFINAL
    FX = FINAL FX_TechnicalDeathinAir ;FX_RocketBuggyAirDeathAirPart    ; This happens in the air
  End

  Behavior = TransportContain ModuleTag_16
    Slots = 5
    AllowInsideKindOf   = INFANTRY
    DamagePercentToUnits = 10%
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
   End

  Behavior = WeaponBonusUpgrade ModuleTag_17 ; Not a full weapon set switch, just a number tweak reflected in a weapon. 
    TriggeredBy = Upgrade_GLAAPBullets
  End 

  Behavior = StealthUpdate ModuleTag_21
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5     
  GeometryIsSmall = No    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAVehicleTechnicalChassisTwo Slth_GLAVehicleTechnicalChassisOne

  ; *** ART Parameters ***
  Draw = W3DTruckDraw ModuleTag_01

    ExtraPublicBone = Dum_Turret 

    DefaultConditionState
      Model = UVTechVan
    End

    ConditionState = REALLYDAMAGED
      Model = UVTechVan_d
    End
    ConditionState = RUBBLE
      Model = UVTechVan_d
    End

    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    Dust = TechnicalDust

    ;DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A


    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End 
  
 ; Behavior = CreateObjectDie ModuleTag_13
 ;   DeathTypes = NONE +CRUSHED +SPLATTED
 ;   CreationList = OCL_TechnicalVan_CrushEffect
 ; End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes  
  

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAVehicleTechnicalChassisThree Slth_GLAVehicleTechnicalChassisOne

  ; *** ART Parameters ***
  Draw = W3DTruckDraw ModuleTag_01

    ExtraPublicBone = Dum_Turret 

    DefaultConditionState
      Model = UVTechJeep
    End

    ConditionState = REALLYDAMAGED
      Model = UVTechJeep_d
    End
    ConditionState = RUBBLE
      Model = UVTechJeep_d
    End

    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga
    Dust = TechnicalDust

    ;DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End  
  
 ; Behavior = CreateObjectDie ModuleTag_13
 ;   DeathTypes = NONE +CRUSHED +SPLATTED
 ;   CreationList = OCL_TechnicalJeep_CrushEffect
 ; End
  
  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 9.5     
  GeometryIsSmall = Yes    
  

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleScudTruck

 ; *** ART Parameters ***
  SelectPortrait         = ScudTrk_L
  ButtonImage            = ScudTrk

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAAnthraxBeta
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle
  
  Draw = W3DTruckDraw ModuleTag_01

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model         = UVScudTr
      Turret = Turret ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks

      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState  = REALLYDAMAGED
      Model         = UVScudTr_d
      Turret = Turret ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
;      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
  WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = PRIMARY Missile
    End
    ConditionState  = RUBBLE
      Model         = UVScudTr_d
      Turret = Turret ; Logic twist bone is always this, both turrets are subobjects of it, as are both missile racks
;      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
  WeaponLaunchBone = SECONDARY WeaponA
;      WeaponHideShowBone = PRIMARY Missile
    End

    OkToChangeModelColor        = Yes
    TrackMarks                  = EXTireTrack.tga
    Dust                        = TechnicalDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    MidLeftRearTireBone         = Tire03
    MidRightRearTireBone        = Tire04
    LeftRearTireBone            = Tire05
    RightRearTireBone           = Tire06
    TireRotationMultiplier      = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:ScudTruck
  Side = GLAToxinGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
     Conditions = None
     Weapon = PRIMARY ScudTruckWeapon
     Weapon = SECONDARY ScudTruckToxinWeapon
     AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
     AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
     ShareWeaponReloadTime = Yes
   End
   WeaponSet
     Conditions = PLAYER_UPGRADE
     Weapon = PRIMARY ScudTruckWeapon
     Weapon = SECONDARY ScudTruckAnthraxWeapon
     AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
     AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
     ShareWeaponReloadTime = Yes
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End

  ;update cost and time fields in Object GLAVehicleTechnical, or else they won't work
  BuildCost             = 1400
  BuildTime             = 10.0          ;in seconds
  VisionRange           = 150
  ShroudClearingRange   = 300
  
  Prerequisites    
    Object = Slth_GLAPalace
  End

  
  ExperienceValue       = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired    = 0 200 450 900  ;Experience points needed to gain each level
  IsTrainable             = Yes             ;Can gain experience
  CrusherLevel            = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel          = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet              = GLAScudTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TechnicalVoiceSelect
  VoiceMove = TechnicalVoiceMove
  VoiceGuard = TechnicalVoiceMove
  VoiceAttack = TechnicalVoiceAttack
  SoundMoveStart = TechnicalMoveStart
  SoundMoveStartDamaged = TechnicalMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
  ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = TechnicalVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceSalvage = TechnicalVoiceSalvage
    VoiceCrush      = TechnicalVoiceCrush
    VoiceUnload     = TechnicalVoiceUnload
    VoiceEnter = TechnicalVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE TRANSPORT POWERED

  Body = ActiveBody ModuleTag_04
    MaxHealth       = 280
    InitialHealth   = 280

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_05
    Turret
      TurretTurnRate = 240       ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL ScudTruckLocomotor
  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 40.0
  End
  Behavior = AutoHealBehavior ModuleTag_07
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_23
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End
  
  Behavior = StealthUpdate ModuleTag_2661
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = USING_ABILITY ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_2662
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_TechnicalJeep_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = SlowDeathBehavior ModuleTag_15
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 500
    DestructionDelayVariance = 1500
    OCL = INITIAL OCL_TechnicalAirDeathStart
    FX = INITIAL FX_TechnicalAirDeathGroundPart
    OCL = FINAL OCL_RocketBuggyAirDeath
    FX = FINAL FX_RocketBuggyAirDeathAirPart    ; This happens in the air
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End


;------------------------------------------------------------------------------
;The Marauder Tank, for the Warlord General.  
Object Slth_GLATankMarauder

  ; *** ART Parameters ***
  SelectPortrait         = SUMarauder_L
  ButtonImage            = SUMarauder
  
  UpgradeCameo1 = Upgrade_GLAToxinShells
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

; no crate upgrade
    ConditionState = NONE
      Model = UVMarauder
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01 ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED
      Model = UVMarauder_d
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE
      Model = UVMarauder_d
      Turret = Turret
      ShowSubObject = Turret
      HideSubObject = TurretUp01 TurretUp02 BarrelFX01
      WeaponFireFXBone = PRIMARY BarrelMS
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY BarrelFX
      WeaponLaunchBone = PRIMARY BarrelMS
    End

; crate upgrade 1
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder_d
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVMarauder_d
      Turret = TurretUp01
      ShowSubObject = TurretUp01
      HideSubObject = Turret TurretUp02 BarrelUp01FX01
      WeaponFireFXBone = PRIMARY BarrelUp01MS
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY BarrelUp01FX
      WeaponLaunchBone = PRIMARY BarrelUp01MS
    End

; crate upgrade 2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder_d
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVMarauder_d
      Turret = TurretUp02
      ShowSubObject = TurretUp02
      HideSubObject = Turret TurretUp01 BarrelUp02FX01 BarrelUp02FX02
      WeaponFireFXBone = PRIMARY BarrelUp02MS
      WeaponRecoilBone = PRIMARY BarrelUp02
      WeaponMuzzleFlash = PRIMARY BarrelUp02FX
      WeaponLaunchBone = PRIMARY BarrelUp02MS
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Marauder
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY MarauderTankGun
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY MarauderTankGunUpgradeOne

  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY MarauderTankGunUpgradeTwo
  End
  ArmorSet
    Conditions      = None
    Armor           = Slth_TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1600
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 125
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
    Science = SCIENCE_MarauderTank
  End

  ExperienceValue = 100 100 200 300    ;Experience point value at each level
  ExperienceRequired = 0 200 300 600  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = GLATankMarauderCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = MarauderTankVoiceSelect
  VoiceMove = MarauderTankVoiceMove
  VoiceGuard = MarauderTankVoiceMove
  VoiceAttack = MarauderTankVoiceAttack
  SoundMoveStart = MarauderTankMoveStart
  SoundMoveStartDamaged = MarauderTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = MarauderTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceSalvage = MarauderTankVoiceSalvage      
    VoiceCrush = MarauderTankVoiceCrush
    VoiceEnter = MarauderTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 430.0
    InitialHealth   = 430.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 860
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL MarauderLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_MarauderTankDeathEffect  
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End


  Behavior = CreateCrateDie ModuleTag_07
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 9.5     
  GeometryIsSmall = Yes 
  Shadow = SHADOW_VOLUME   
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;---------------------------------------------------------------------------------
Object Slth_GLATankTraversor

  ; *** ART Parameters ***
  SelectPortrait = SUT-60_L
  ButtonImage    = SUT-60

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle
  ;UpgradeCameo3 = Upgrade_GLAAPBullets

  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

; no crate upgrade
    ConditionState = NONE
      Model = UVT-60
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05      WeaponFireFXBone = PRIMARY Muzzle
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = REALLYDAMAGED
      Model = UVT-60_d
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05      WeaponFireFXBone = PRIMARY Muzzle
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = RUBBLE
      Model = UVT-60_d
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05      WeaponFireFXBone = PRIMARY Muzzle
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = MOVING
      Model = UVT-60
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05      WeaponFireFXBone = PRIMARY Muzzle
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = MOVING REALLYDAMAGED
      Model = UVT-60_d
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05      WeaponFireFXBone = PRIMARY Muzzle
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = MOVING RUBBLE
      Model = UVT-60_d
      Turret = TURRET01
      HideSubObject = MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

; crate upgrade 2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeLight
      ParticleSysBone   = EXHAUST02 DozerSmokeLight
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = REALLYDAMAGED MOVING WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = RUBBLE MOVING WEAPONSET_CRATEUPGRADE_ONE
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 BarrelUp01 Housecolor04
      HideSubObject = Muzzle01 Barrel01 Housecolor01 MuzzleFXUp02 BarrelUp02 Housecolor05
      WeaponFireFXBone = PRIMARY BarrelUp01
      WeaponRecoilBone = PRIMARY BarrelUp01
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp01
      WeaponLaunchBone = PRIMARY BarrelUp01
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

; crate upgrade 2
    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = REALLYDAMAGED MOVING WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    ConditionState = RUBBLE MOVING WEAPONSET_CRATEUPGRADE_TWO
      Model = UVT-60_d
      Turret = TURRET01
      ShowSubObject = TURRET01 MuzzleFXUp01 MuzzleFXUp02 BarrelUp01 BarrelUp02 Housecolor04 Housecolor05
      HideSubObject = Muzzle01 Barrel01 Housecolor01
      WeaponFireFXBone = PRIMARY BarrelUp
      WeaponRecoilBone = PRIMARY BarrelUp
      WeaponMuzzleFlash = PRIMARY MuzzleFXUp
      WeaponLaunchBone = PRIMARY BarrelUp
      ParticleSysBone   = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone   = EXHAUST02 DozerSmokeHeavy
    End

    TrackMarks = EXTnkTrack.tga
    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Traversor  ;№№№№№№№№№№ Нашъ любимый БМП-эшчик =D ;№№№№№№№№№№№№№
  Side               = GLAStealthGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 3  ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY Slth_TraversorTankGun    ;[T-60TankGun]*
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY Slth_TraversorTankGunPlusOne 
    ;Weapon = SECONDARY MinigunPlacementWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY Slth_TraversorTankGunPlusTwo 
    ;Weapon = SECONDARY MinigunPlacementWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = Slth_TankArmor
    DamageFX   = TankDamageFX
  End
 ;------------------------------------------
  BuildCost = 900 ;1000 ;1100 ;1200 ;;1400
  BuildTime = 8.0 ;12.0 ;15.0
 ;------------------------------------------
  VisionRange     = 300.0
  ShroudClearingRange = 400
  Prerequisites
    Object = Slth_GLAArmsDealer
    ;;Object = Slth_GLAPalace
  End
  ExperienceValue = 100 100 200 300   ;Experience point value at each level
  ExperienceRequired = 0 200 300 600  ;Experience points needed to gain each level
  IsTrainable = Yes                   ;Can gain experience
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLATankTraversorCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = SandKingTankVoiceSelect
  VoiceMove = SandKingTankVoiceMove
  VoiceGuard = SandKingTankVoiceMove
  VoiceAttack = SandKingTankVoiceAttack
  SoundMoveStart = MarauderTankMoveStart
  SoundMoveStartDamaged = MarauderTankMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = SandKingTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceSalvage = SandKingTankVoiceSalvage
    VoiceCrush = SandKingTankVoiceCrush
    VoiceEnter = SandKingTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 440.0 ;[460.0]*
    InitialHealth   = 440.0 ;[460.0]*
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 860
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL TraversorLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 4
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair ;№№№№№№№№№№№№
  End
;----------- Вид крушения юнита ---------------------
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_T-60TankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End
;----------------------------------------------------
  Behavior = CreateCrateDie ModuleTag_07
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = FlammableUpdate ModuleTag_11 ;[_21]*
    AflameDuration = 5000     ;If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3    ;Taking this much damage...
    AflameDamageDelay = 500   ;This often.
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; Behavior = WeaponSetUpgrade ModuleTag_12
;   TriggeredBy = Upgrade_GLAAPBullets
; End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;----------------------------------------------------------------------------------------
  Behavior = TransportContain  ModuleTag_13 ;[_05]*
    PassengersAllowedToFire = No
    Slots                = 4 ;[6]*
    EnterSound           = GarrisonEnter
    ExitSound            = GarrisonExit
    DamagePercentToUnits = 100% ;10%
    AllowInsideKindOf    = INFANTRY
    ExitDelay            = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
  End
;---------------------------------------------------------------------------------------
  Behavior = StealthUpgrade ModuleTag_SUBMPT1
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;-------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUBMPT2
    StealthDelay               = 2000 ; msec
    StealthForbiddenConditions = MOVING ATTACKING USING_ABILITY TAKING_DAMAGE ;[НЕВИДИМ КОГДА НЕ ДВИГАЕТСЯ И НЕ СТРЕЛЯЕТ]
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;========================================================================================

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 5.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  Scale = 1.02 ;№№№№№№№№№№
End

;------------------------------------------------------------------------------
;GLA Radar Van
Object Slth_GLAVehicleRadarVan

  ; *** ART Parameters ***
  SelectPortrait         = FightRadar
  ButtonImage            = FightRadar

  UpgradeCameo1 = Upgrade_GLARadarVanScan
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVRadarVan_U
      Animation = UVRadarVan_U.UVRadarVan_U
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
    End
    
    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_99

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = CHASSIS

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RadarVan
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  WeaponSet
    Conditions = None
    Weapon = PRIMARY Slth_BVRPGWeapon
  End
  BuildCost       = 650
  BuildTime       = 7.0          ;in seconds
  VisionRange     = 200
  ShroudClearingRange = 500
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  ExperienceValue        = 100 100 200 400 ;Experience point value at each level
  ExperienceRequired     = 0 200 300 600 ;Experience points needed to gain each level

  IsTrainable     = Yes
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Slth_GLAVehicleRadarVanCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  ; Required for the W3DTruckDraw module
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

  Behavior = ReplaceObjectUpgrade ModuleTag_80
    ReplaceObject = Slth_GLAVehicleRadarVan2
    TriggeredBy = UpgradeMobileTunnelNetwork;Upgrade_GLAShroud
  End

  Behavior = GrantUpgradeCreate ModuleTag_101
    UpgradeToGrant   = UpgradeRealTunnelNetwork;Upgrade_GLARadar
  End

  Behavior        = RadarUpgrade ModuleTag_99789
    TriggeredBy   = UpgradeRealTunnelNetwork;Upgrade_GLARadar
    DisableProof  = Yes ; Won't be disabled by power low
    ConflictsWith = UpgradeMobileTunnelNetwork;Upgrade_GLAShroud
  End

  Behavior = ProductionUpdate ModuleTag_100
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior           = OCLSpecialPower ModuleTag_06
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    OCL                  = SUPERWEAPON_RadarVanScan
    CreateLocation       = CREATE_AT_LOCATION
    StartsPaused         = Yes ; Unpaused by upgrade module
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_07
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 100
      TurretPitchRate       = 100
      AllowsPitch           = Yes
      NaturalTurretPitch    = 20
      GroundUnitPitch       = 20
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL RadarVanLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 50.0
  End

; The default explosion
  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RadarVanDeathEffect
  End


  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = UpgradeDie  ModuleTag_120
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove = UpgradeRealTunnelNetwork ModuleTag_13
  End

  Behavior = StealthDetectorUpdate ModuleTag_16
    DetectionRate   = 600   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange = 300 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_17
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_18
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End

  Behavior = WeaponSetUpgrade ModuleTag_20
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = StealthUpdate ModuleTag_21
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = USING_ABILITY ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 12.5
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ;minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;GLA Radar Van
Object Slth_GLAVehicleRadarVan2

  ; *** ART Parameters ***
  SelectPortrait         = SURadarVan_L
  ButtonImage            = SURadarVan

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = =UVRadarVan_U
      Animation = UVRadarVan_U.UVRadarVan_U
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = =UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
    End
    
    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_99

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = CHASSIS

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RadarVan
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  WeaponSet
    Conditions = None
    Weapon = PRIMARY Slth_BVRPGWeapon
  End
  BuildCost       = 500
  BuildTime       = 10.0          ;in seconds
  VisionRange     = 200
  ShroudClearingRange = 500
  Prerequisites
    Object = Slth_GLAArmsDealer
  End
  IsTrainable = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Slth_GLAVehicleRadarVan2CommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  ; Required for the W3DTruckDraw module
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200
    InitialHealth   = 200

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

  Behavior = ReplaceObjectUpgrade ModuleTag_80
    ReplaceObject = Slth_GLAVehicleRadarVan
    TriggeredBy = UpgradeRealTunnelNetwork;Upgrade_GLARadar
  End

  Behavior = AIUpdateInterface ModuleTag_0967
    Turret
      TurretTurnRate = 100
      TurretPitchRate       = 100
      AllowsPitch           = Yes
      NaturalTurretPitch    = 20
      GroundUnitPitch       = 20
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
    End
  End

  Behavior = GrantUpgradeCreate ModuleTag_101
    UpgradeToGrant   = UpgradeMobileTunnelNetwork;Upgrade_GLAShroud
  End

  Behavior = ActiveShroudUpgrade ModuleTag_9978
    TriggeredBy = UpgradeMobileTunnelNetwork;Upgrade_GLAShroud
    NewShroudRange = 200
    ConflictsWith = UpgradeRealTunnelNetwork;Upgrade_GLARadar
  End

  Behavior = ProductionUpdate ModuleTag_100
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior           = OCLSpecialPower ModuleTag_06
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    OCL                  = SUPERWEAPON_RadarVanScan
    CreateLocation       = CREATE_AT_LOCATION
    StartsPaused         = Yes ; Unpaused by upgrade module
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_07
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponSetUpgrade ModuleTag_210
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 100
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL RadarVanLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 50.0
  End

; The default explosion
  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED -EXTRA_2
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RadarVanDeathEffect
  End


  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = StealthDetectorUpdate ModuleTag_16
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange = 250 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_17
    DeathTypes = NONE +CRUSHED +SPLATTED -EXTRA_2
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_18
    DeathTypes = NONE +CRUSHED +SPLATTED -EXTRA_2
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = UpgradeDie  ModuleTag_120
    ;This frees the object based upgrade for the producer object.
    DeathTypes = ALL
    UpgradeToRemove = UpgradeMobileTunnelNetwork ModuleTag_13
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End

  Behavior = StealthUpdate ModuleTag_21
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = USING_ABILITY ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 12.5
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ;minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
;China Supply Truck
Object Stlh_GLAVehicleQuadSupply

  ; *** ART Parameters ***

  SelectPortrait         = SUQuad
  ButtonImage            = SUQuad

  UpgradeCameo1 = Upgrade_GLACamouflageVehicle
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;------------------------------
    DefaultConditionState
      Model = UVQuadSupplyE
    End

    ConditionState = REALLYDAMAGED
      Model = UVQuadSupplyE_D
    End

    ;Worker Quad
    ;------------------------------

    ConditionState = RIDER1
      Model           = UVQuadSupply
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER1 REALLYDAMAGED
      Model           = UVQuadSupply_D
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER1 RUBBLE
      Model           = UVQuadSupply_D
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER1 CARRYING
      Model           = UVQuadSupply
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER1 REALLYDAMAGED CARRYING
      Model           = UVQuadSupply_D
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER1 RUBBLE CARRYING
      Model           = UVQuadSupply_D
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ;Empty Quad
    ;------------------------------
    ConditionState = RIDER2
      Model           = UVQuadSupplyE
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER2 REALLYDAMAGED
      Model           = UVQuadSupplyE_D
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER2 RUBBLE
      Model           = UVQuadSupplyE_D
      HideSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER2 CARRYING
      Model           = UVQuadSupplyE
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER2 REALLYDAMAGED CARRYING
      Model           = UVQuadSupplyE_D
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End

    ConditionState    = RIDER2 RUBBLE CARRYING
      Model           = UVQuadSupplyE_D
      ShowSubObject   = Cargo01
      ParticleSysBone = SMOKE CombatBikeSmokeLight
    End


    TrackMarks = EXTireTrack.tga

     LeftFrontTireBone           = TIRE02
     RightFrontTireBone          = TIRE01
     LeftRearTireBone            = TIRE03
     RightRearTireBone           = TIRE04
     TireRotationMultiplier      = 0.2   ; this * speed = rotation.
     PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

     Dust                    = RocketBuggyDust
     DirtSpray               = RocketBuggyDirtSpray
     PowerslideSpray         = RocketBuggyDirtPowerSlide
    End
    
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Worker
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 2                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost           = 400
  BuildTime           = 10.0      ;in seconds
  VisionRange         = 150.0
  ShroudClearingRange = 300
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER1
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY NONE
  End
  Prerequisites
    Object = Slth_GLASupplyStash
    Object = Slth_GLAArmsDealer
  End
  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TankDamageFX
  End
  CrusherLevel = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet  = GLAInfantryCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceAttack = CombatBikeMoveStart
  VoiceGuard = CombatBikeMoveStart
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceEnter        = CombatBikeMoveStart
    VoiceEnterHostile = CombatBikeMoveStart
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = CombatBikeMoveStart
    VoiceMoveUpgraded = CombatBikeMoveStart
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  ;@todo lorenzen removed the CAN_ATTACK from the chinasupplytruck... ok?
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE HARVESTER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 300.0
    InitialHealth = 300.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = SupplyTruckAIUpdate ModuleTag_03
    MaxBoxes = 2
    SupplyCenterActionDelay = 400     ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay = 1000 ; ms per box (many small transactions)
    SupplyWarehouseScanDistance = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    ;;;SuppliesDepletedVoice = ...
  End

  Locomotor = SET_NORMAL QuadLocomotor
  Locomotor = SET_SLUGGISH QuadLocomotorNone

  Behavior = RiderChangeContain ModuleTag_16

    Rider1 = Slth_GLAInfantryWorker  RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAInfantryCommandSet SET_NORMAL
    Rider2 = GLAInfantryFakeRider    RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAInfantryEmptyCommandSet SET_SLUGGISH

    ScuttleDelay  = 99999999999
    ScuttleStatus = TOPPLED

    ;Standard TransportContain stuff
    Slots                 = 1
    InitialPayload        = Slth_GLAInfantryWorker 1
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%
    BurnedDeathToUnits    = No
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes
  End

  Behavior = OCLSpecialPower ModuleTag_DitchRider
    SpecialPowerTemplate = SpecialAbilityCombatBikeDitchRider
    OCL                  = OCL_CombatBikeDitchRider
  End
  
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  ExperienceValue = 50 50 50 50 ;Experience point value at each level

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_ChinaSupplyTruckDeathEffect
  End

  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_ChinaSupplyTruck_CrushEffect
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_10
    AflameDuration = 5000     ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3    ; taking this much damage...
    AflameDamageDelay = 500    ; this often.
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
  End

  Behavior = StealthUpdate ModuleTag_21
    StealthDelay               = 2400 ; msec
    StealthForbiddenConditions = ATTACKING USING_ABILITY
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 14.0
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleQuad

  ; *** ART Parameters ***
  SelectPortrait         = SUQuad
  ButtonImage            = SUQuad

  UpgradeCameo1 = Upgrade_GLAAPRockets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01

    DefaultConditionState
      Model         = UVQuad
      HideSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX01
      WeaponLaunchBone = PRIMARY RocketFX01
    End
    ConditionState  = REALLYDAMAGED
      Model         = UVQuad_d
      HideSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX01
      WeaponLaunchBone = PRIMARY RocketFX01
    End
    ConditionState  = RUBBLE
      Model         = UVQuad_d
      HideSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX01
      WeaponLaunchBone = PRIMARY RocketFX01
    End

   ;--------Crate Upgrade One----------
    ConditionState  = WEAPONSET_CRATEUPGRADE_ONE
      Model         = UVQuad
      ShowSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX
      WeaponLaunchBone = PRIMARY RocketFX
    End
    AliasConditionState WEAPONSET_CRATEUPGRADE_TWO
    ConditionState  = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model         = UVQuad_d
      ShowSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX
      WeaponLaunchBone = PRIMARY RocketFX
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
    ConditionState  = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model         = UVQuad_d
      ShowSubObject = POD02
      WeaponFireFXBone = PRIMARY RocketFX
      WeaponLaunchBone = PRIMARY RocketFX
    End
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    OkToChangeModelColor        = Yes
    TrackMarks                  = EXTireTrack.tga
    Dust                        = TechnicalDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire02
    RightFrontTireBone          = Tire01
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Slth_Quad
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY QuadRPGWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadRPGWeaponOne
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadRPGWeaponTwo
  End
  ArmorSet
    Conditions = None
    Armor      = TruckArmor
    DamageFX   = TruckDamageFX
  End
  BuildCost = 720
  BuildTime = 4.0 ;[в 9.0-9.1.13 было: 2.0]*  ;in seconds
  VisionRange         = 150.0
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
  End
  ExperienceValue    = 25 25 50 100 ;Experience point value at each level
  ExperienceRequired = 0 50 75 150  ;Experience points needed to gain each level
  IsTrainable        = Yes          ;Can gain experience
  CrusherLevel       = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel     = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE CLIFF_JUMPER
  Body = ActiveBody ModuleTag_04
    MaxHealth     = 250.0
    InitialHealth = 250.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_05
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL QuadLocomotor QuadCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 40.0
  End
  Behavior = AutoHealBehavior ModuleTag_07
    HealingAmount = 3
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
  Behavior = FlammableUpdate ModuleTag_09
    AflameDuration = 5000    ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3   ; taking this much damage...
    AflameDamageDelay = 500  ; this often.
  End
  Behavior = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
;-------------------------------------------------------
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_TechnicalJeep_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End
  Behavior = SlowDeathBehavior ModuleTag_15
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 500
    DestructionDelayVariance = 1500
    OCL = INITIAL OCL_TechnicalAirDeathStart
    FX = INITIAL FX_TechnicalAirDeathGroundPart
    OCL = FINAL OCL_RocketBuggyAirDeath
    FX = FINAL FX_RocketBuggyAirDeathAirPart    ; This happens in the air
  End
  Behavior = WeaponBonusUpgrade ModuleTag_17 ; Not a full weapon set switch, just a number tweak reflected in a weapon.
    TriggeredBy = Upgrade_GLAAPRockets
  End
  Behavior = StealthUpdate ModuleTag_21
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
; This is commented out per hotlist request 10/9 ML
;------------------------------------------------------------
;№№№№№ [После крушения мотоцикла остаётся пехотинец]: №№№№№№
;------------------------------------------------------------
  Behavior = CreateObjectDie ModuleTag_23 ;[ModuleTag_15]*
    DeathTypes = ALL -CRUSHED -SPLATTED
    CreationList = Slth_OCL_GLARPGDefenderDebris01 ;<===============[Ссыль на пехотинца]
    ExemptStatus = HIJACKED
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 7.5
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
; this unit is never really "built"; building one triggers the random building of
; one of the other chassis. If you want a *specific* chassis, choose it explicitly;
; if you want a chassis at random, specify this.
Object Slth_GLAVehicleFake

  ; *** ART Parameters ***
  SelectPortrait         = Fake
  ButtonImage            = Fake

  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      ; give it a model so it'll show up in WB
      Model = UVTechTrck
    End
  End

  ; set cost and time fields here or else they won't work
  BuildCost       = 100
  BuildTime       = 1.0          ;in seconds

  Side = GLAStealthGeneral
  EditorSorting = VEHICLE
  BuildVariations = Slth_GLAVehicleQuadCannonFake Slth_GLAVehicleToxinTruckFake Slth_GLAVehicleRadarVanFake  ;;Slth_GLATankScorpionFake

  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE TRANSPORT FS_FAKE
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End

;------------------------------------------------------------------------------
Object Slth_GLATankScorpionFake

  ; *** ART Parameters ***
  SelectPortrait         = SUScorpionST
  ButtonImage            = SUScorpionST

  UpgradeCameo1 = GC_Slth_Upgrade_GLAQuadCannonSnipe
  UpgradeCameo2 = Upgrade_GLAAPRockets
  UpgradeCameo3 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

; ------------ Normal
    DefaultConditionState
      Model = UVSlthScorp;UVLiteTankDG
      Turret = Turret01
      ShowSubObject = TIRE09
      HideSubObject = CalRack01 TUR_POLE01 20CAL01 HOUSECOLOR05
      WeaponFireFXBone = PRIMARY Muzzle01
      WeaponRecoilBone = PRIMARY Barrel01
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponLaunchBone = PRIMARY Muzzle01
    End

    ConditionState = REALLYDAMAGED
      Model = UVSlthScorp_d;UVLiteTankDG_d
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVSlthScorp;UVLiteTankDG
      ShowSubObject = CalRack01 TUR_POLE01 20CAL01
      HideSubObject = HOUSECOLOR05 TIRE09
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponRecoilBone = PRIMARY Barrel
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
      WeaponFireFXBone = SECONDARY MUZZLE02
      WeaponLaunchBone = SECONDARY MUZZLE02
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVSlthScorp_d;UVLiteTankDG_d
    End

    TrackMarks           = EXTireTrack.tga
    Dust                 = RocketBuggyDust
    DirtSpray            = RocketBuggyDirtSpray
    PowerslideSpray      = RocketBuggyDirtPowerSlide
    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone          = Tire01
    RightFrontTireBone         = Tire02
    MidLeftRearTireBone        = Tire03
    MidRightRearTireBone       = Tire04
    LeftRearTireBone           = Tire05
    RightRearTireBone          = Tire06
    MidRightRearTireBone       = Tire07
    LeftRearTireBone           = Tire08
    RightRearTireBone          = Tire09
    TireRotationMultiplier     = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Scorpion
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 2                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY Slth_ScorpionTankGunFake
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY Slth_ScorpionTankGunPlusOneFake
    Weapon = SECONDARY MinigunPlacementWeaponFake
  End

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 100
  BuildTime       = 4.0          ;in seconds
  VisionRange     = 160
  ShroudClearingRange = 300

  ExperienceValue = 60 60 120 200    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = GLATankScorpionCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = MediumTankVoiceSelect
  VoiceMove = MediumTankVoiceMove
  VoiceAttack = MediumTankVoiceAttack
  SoundMoveStart = MediumTankMoveStart
  SoundMoveStartDamaged = ScorpionTankMoveStart
  VoiceGuard = MediumTankVoiceMove

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = MediumTankVoiceCreate
    ;TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = MediumTankVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150.0
    InitialHealth   = 150.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 740
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate       = 180 ;60   ; turn rate, in degrees per sec
      ControlledWeaponSlots= PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL WheeledScorpionLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = StealthUpdate ModuleTag_05
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ScorpionTankDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    TriggeredBy = GC_Slth_Upgrade_GLAQuadCannonSnipe
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_13
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = SlowDeathBehavior ModuleTag_Death17
    DeathTypes          = NONE +SUICIDED +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TerroristExplode
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.5
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME

  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleQuadCannonFake

  ; *** ART Parameters ***

  SelectPortrait         = SUQuadCannonSN_L
  ButtonImage            = SUQuadCannonSN

  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  
  Draw = W3DTankTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState = None
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelMS
      WeaponMuzzleFlash = TERTIARY BarrelFX
      WeaponRecoilBone  = TERTIARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End
      
    ConditionState = REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_B 
      Model = UVQuadSnipe_D
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = REALLYDAMAGED USING_WEAPON_C
      Model = UVQuadSnipe_D
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelMS
      WeaponMuzzleFlash = TERTIARY BarrelFX
      WeaponRecoilBone  = TERTIARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End
    
    ConditionState = RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRET
      TurretPitch = TURRETEL
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_B 
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED USING_WEAPON_C 
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp01MS
      WeaponMuzzleFlash = TERTIARY BarrelUp01FX
      WeaponRecoilBone  = TERTIARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End


    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B 
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_C 
      Model = UVQuadSnipe
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe.UVQuadSnipe
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone  = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End
    
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_B REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO USING_WEAPON_C REALLYDAMAGED
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY BarrelUp02FX
      WeaponRecoilBone  = TERTIARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE
      Model = UVQuadSnipe_D
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      Animation       = UVQuadSnipe_D.UVQuadSnipe_D
      AnimationMode   = LOOP
      Flags = MAINTAIN_FRAME_ACROSS_STATES
      WeaponFireFXBone  = TERTIARY   BarrelUp02MS
      WeaponMuzzleFlash = TERTIARY   BarrelUp02FX
      WeaponRecoilBone  = TERTIARY   BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04
    End


    TrackMarks = EXTnkTrack.tga

    TreadAnimationRate = 2.0;  amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
 
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This unit doesn't powerslide.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:QuadCannon
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY QuadCannonGunFake
    Weapon = SECONDARY QuadCannonGunAirFake
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGunUpgradeOneFake
    Weapon = SECONDARY QuadCannonGunUpgradeOneAirFake
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGunUpgradeTwoFake
    Weapon = SECONDARY QuadCannonGunUpgradeTwoAirFake
  End
  ArmorSet
    Conditions      = None
    Armor           = HumveeArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 100
  BuildTime       = 6.0          ;in seconds
  VisionRange     = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  CommandSet          = Slth_GLAVehicleQuadCannon

  ExperienceValue = 7 7 7 7 ;[в 9.1.19 было: 50 50 100 150]    ;Experience point value at each level
; ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = No ;Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  VoiceSelect           = QuadCannonVoiceSelect
  VoiceMove             = QuadCannonVoiceMove
  VoiceAttack           = QuadCannonVoiceAttack
  VoiceAttackAir        = QuadCannonVoiceAttackAir
  SoundMoveStart        = QuadCannonMoveStart
  SoundMoveStartDamaged = QuadCannonMoveStart
  VoiceGuard             = QuadCannonVoiceMove
  UnitSpecificSounds
   ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = QuadCannonVoiceCreate
   TurretMoveStart      = NoSound
   TurretMoveLoop       = TurretMoveLoop
   ; Required for the W3DTruckDraw module
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
   VoiceSalvage         = QuadCannonVoiceSalvage
   VoiceCrush           = QuadCannonVoiceCrush
   VoiceEnter             = QuadCannonVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150.0
    InitialHealth   = 150.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 360
      TurretPitchRate = 360
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End

  Locomotor = SET_NORMAL QuadCannonLocomotor

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 40.0
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 411
    DestructionDelay = 150
    DestructionDelayVariance = 250
    OCL = FINAL    OCL_QuadCannonDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End


  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_11
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = WeaponBonusUpgrade ModuleTag_12
    TriggeredBy = Upgrade_GLAAPBullets
  End

  Behavior = DestroyDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry = BOX
  GeometryMajorRadius = 18.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleRadarVanFake

  ; *** ART Parameters ***
  SelectPortrait         = SURadarVan_L
  ButtonImage            = SURadarVan

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = =UVRadarVan_U
      Animation = UVRadarVan_U.UVRadarVan_U
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End
    
    ConditionState = RUBBLE
      Model = UVRadarVan_UD
      Animation = UVRadarVan_UD.UVRadarVan_UD
      AnimationMode = LOOP
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = =UVRadarVan
      Animation = UVRadarVan.UVRadarVan
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVRadarVan_D
      Animation = UVRadarVan_D.UVRadarVan_D
      AnimationMode = LOOP
    End
    
    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.
  End

  Draw = W3DModelDraw ModuleTag_99

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = CHASSIS

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model     = UVRadarVanST2
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:RadarVan
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  WeaponSet
    Conditions = None
    Weapon = PRIMARY Slth_BVRPGWeaponFake
  End
  BuildCost       = 400
  BuildTime       = 5.0          ;in seconds
  VisionRange     = 200
  ShroudClearingRange = 500
  ExperienceValue = 7 7 7 7 ;[в 9.1.19 было: 20 20 20 20]    ;Experience point value at each level
  IsTrainable = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Slth_GLAVehicleRadarVan2CommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RadarVanVoiceSelect
  VoiceMove = RadarVanVoiceMove
  VoiceAttack = RadarVanVoiceMove
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = RadarVanVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
  ; Required for the W3DTruckDraw module
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush      = RadarVanVoiceCrush
    VoiceEnter = RadarVanVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE IGNORES_SELECT_ALL FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 150
    InitialHealth   = 150

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_0967
    Turret
      TurretTurnRate = 100
      TurretPitchRate       = 100
      AllowsPitch           = Yes
      NaturalTurretPitch    = 20
      GroundUnitPitch       = 20
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
    End
  End

  Behavior = ProductionUpdate ModuleTag_100
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = AIUpdateInterface ModuleTag_09
    Turret
      TurretTurnRate = 100
      ControlledWeaponSlots = PRIMARY
    End
  End
  Locomotor = SET_NORMAL RadarVanLocomotor

  Behavior = PhysicsBehavior ModuleTag_10
    Mass = 50.0
  End

; The default explosion
  Behavior = SlowDeathBehavior  ModuleTag_11
    DeathTypes = ALL -CRUSHED -SPLATTED -EXTRA_2
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_RadarVanDeathEffect
  End


  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_14
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = CreateCrateDie ModuleTag_15
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = StealthDetectorUpdate ModuleTag_16
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange = 250 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_17
    DeathTypes = NONE +CRUSHED +SPLATTED -EXTRA_2
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_18
    DeathTypes = NONE +CRUSHED +SPLATTED -EXTRA_2
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_19
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_CrusaderDamageTransition
  End

  Behavior = StealthUpdate ModuleTag_21
    StealthDelay                = 2400 ; msec
    StealthForbiddenConditions  = USING_ABILITY ATTACKING
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = StealthUpgrade ModuleTag_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End

  Geometry = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 6.0
  GeometryHeight = 12.5
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End


;------------------------------------------------------------------------------
;Also called Toxin Tractor && ToxinTractor
Object Slth_GLAVehicleToxinTruckFake

  ; *** ART Parameters ***
  SelectPortrait         = SUToxinTractor_L
  ButtonImage            = SUToxinTractor

  UpgradeCameo1 = Upgrade_GLAAnthraxBeta
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVToxinTrk
      Turret = Turret
      TurretPitch = TurretEL
      ShowSubObject = Turret
      HideSubObject = TurretUP01 TurretUP02
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY Spigot
      WeaponLaunchBone = SECONDARY Spigot
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE

    ConditionState = USING_WEAPON_B
      Model = UVToxinTrk
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE
      Model = UVToxinTrk
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED
      Model = UVToxinTrk_D
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
    AliasConditionState RUBBLE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE

    ConditionState = USING_WEAPON_B REALLYDAMAGED
      Model = UVToxinTrk_D
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE
      Model = UVToxinTrk_D
      ParticleSysBone = none AnthraxPuddleContinuous
    End

; -------------- Turret change #1
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_ONE
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVToxinTrk_D
      Turret = TurretUP01
      TurretPitch = TurretEL01
      ShowSubObject = TurretUP01
      HideSubObject = Turret TurretUP02
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
      ParticleSysBone = none AnthraxPuddleContinuous
    End

; -------------- Turret change #2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
    End
    AliasConditionState REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState RUBBLE WEAPONSET_CRATEUPGRADE_TWO
    AliasConditionState WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO

    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none ToxinPuddleContinuous
    End
    ConditionState = USING_WEAPON_B REALLYDAMAGED WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVToxinTrk_D
      Turret = TurretUP02
      TurretPitch = TurretEL02
      ShowSubObject = TurretUP02
      HideSubObject = TurretUP01 Turret
      WeaponFireFXBone = PRIMARY WeaponC
      WeaponLaunchBone = PRIMARY WeaponC
      ParticleSysBone = none AnthraxPuddleContinuous
    End

    TrackMarks = EXTireTrack.tga
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    LeftRearTireBone = Tire03
    RightRearTireBone = Tire04

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 0   ; This vehicle doesn't powerslide.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:ToxinTruck
  Side                = GLAStealthGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions        = None
    Weapon            = PRIMARY     ToxinTruckGunFake
    Weapon            = SECONDARY   ToxinTruckSprayerFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = PLAYER_UPGRADE
    Weapon            = PRIMARY     ToxinTruckGunUpgradedFake
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_ONE
    Weapon            = PRIMARY     ToxinTruckGunPlusOneFake
    Weapon            = SECONDARY   ToxinTruckSprayerPlusOneFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_ONE PLAYER_UPGRADE
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusOneFake
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusOneFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_TWO
    Weapon            = PRIMARY     ToxinTruckGunPlusTwoFake
    Weapon            = SECONDARY   ToxinTruckSprayerPlusTwoFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End
  WeaponSet
    Conditions        = CRATEUPGRADE_TWO PLAYER_UPGRADE
    Weapon            = PRIMARY     ToxinTruckGunUpgradedPlusTwoFake
    Weapon            = SECONDARY   ToxinTruckSprayerUpgradedPlusTwoFake
    AutoChooseSources = SECONDARY   NONE ;Special attack only
  End

  ArmorSet
    Conditions        = None
    Armor             = ToxinTruckArmorAntiEX
    DamageFX          = TruckDamageFX
  End
  BuildCost           = 100
  BuildTime           = 5.0          ;in seconds
  VisionRange         = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = Slth_GLAArmsDealer
  End
  ExperienceValue = 7 7 7 7 ;[в 9.1.19 было: 50 50 100 150]    ;Experience point value at each level
; ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = No ;Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = GenericCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = ToxinTractorVoiceSelect
  VoiceMove           = ToxinTractorVoiceMove
  VoiceGuard          = ToxinTractorVoiceMove
  VoiceAttack         = ToxinTractorVoiceAttack
  SoundMoveStart      = ToxinTractorMoveStart
  SoundMoveStartDamaged = ToxinTractorMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = ToxinTractorVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = TurretMoveLoop
   TruckLandingSound    = NoSound
   TruckPowerslideSound = NoSound
    VoiceCrush      = ToxinTractorVoiceCrush
    VoiceEnter           = ToxinTractorVoiceMove
    VoicePoisonLocation = ToxinTractorVoiceAttackContam

  End

  ; *** ENGINEERING Parameters ***
  RadarPriority         = UNIT
  KindOf                = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth           = 120.0
    InitialHealth       = 120.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
    Turret
      TurretTurnRate            = 180
      TurretPitchRate           = 180
      AllowsPitch               = Yes
      MinPhysicalPitch          = -20 ; If allows pitch, the lowest I can dip down to shoot.  defaults to 0 (horizontal)
      TurretFireAngleSweep      = PRIMARY 8
      TurretSweepSpeedModifier  = PRIMARY 0.5    ; Sweep slower than you turn
      ControlledWeaponSlots     = PRIMARY
    End
  End
  Locomotor             = SET_NORMAL ToxinTruckLocomotor
  Behavior              = PhysicsBehavior ModuleTag_04
    Mass                = 50.0
  End

  Behavior                    = SlowDeathBehavior  ModuleTag_05
    DeathTypes                = ALL -CRUSHED -SPLATTED
    ProbabilityModifier       = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay          = 0
    DestructionDelayVariance  = 200
    FX                        = INITIAL FX_ToxinTractorDie
    OCL                       = INITIAL OCL_ToxinTractorDeathEffect
    FX                        = FINAL FX_ToxinTruckExplosionOneFinal
  End
  Behavior                    = InstantDeathBehavior  ModuleTag_06
    DeathTypes                = NONE +CRUSHED +SPLATTED
    FX                        = FX_CarCrush
    OCL                       = OCL_CrusaderTank_CrushEffect
  End

  Behavior = CreateCrateDie ModuleTag_07
    CrateData   = SalvageCrateData
    ;CrateData  = EliteTankCrateData
    ;CrateData  = HeroicTankCrateData
  End

  Behavior = WeaponSetUpgrade ModuleTag_08
    ; the Toxin Tractor gets this upgrade if we either buy the upgrade,
    ; or if it gets HEROIC status
    TriggeredBy   = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
  End

  Behavior                          = TransitionDamageFX ModuleTag_11
    ReallyDamagedParticleSystem1  = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1          = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = AutoHealBehavior ModuleTag_12
    HealingAmount   = 1
    HealingDelay    = 1000 ; msec
    TriggeredBy     = Upgrade_GLAJunkRepair
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration          = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount      = 3       ; taking this much damage...
    AflameDamageDelay       = 500       ; this often.
  End

  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_13
    WeaponSlot            = SECONDARY
    ConflictsWith         = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
    OCL                   = OCL_PoisonFieldMediumFake
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End
  Behavior = FireOCLAfterWeaponCooldownUpdate ModuleTag_14
    WeaponSlot            = SECONDARY
    TriggeredBy           = Upgrade_GLAAnthraxBeta Upgrade_Veterancy_HEROIC
    OCL                   = OCL_PoisonFieldUpgradedMediumFake
    MinShotsToCreateOCL   = 4
    OCLLifetimePerSecond  = 10000
    OCLLifetimeMaxCap     = 180000
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15    ;These two make the right damage field at death
    DeathWeapon   = ToxinShellWeaponFake
    StartsActive  = Yes
    ConflictsWith = Upgrade_GLAAnthraxBeta
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = ToxinShellWeaponUpgradedFake
    StartsActive  = No
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End

  Geometry = BOX
  GeometryMajorRadius = 13.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 10.0   ; set to make the projectile stream look right
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End




;------------------------------------------------------------------------------
Object Slth_GLAVehicleBombTruckFake

  ; *** ART Parameters ***
  SelectPortrait         = SUBombTruck_L
  ButtonImage            = SUBombTruck

  UpgradeCameo1 = Upgrade_GLABombTruckHighExplosiveBomb
  UpgradeCameo2 = Upgrade_GLABombTruckBioBomb
  UpgradeCameo3 = Upgrade_GLAJunkRepair
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE


  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    TrackMarks = EXTireTrack.tga

    DefaultConditionState
      Model = UVBMBTRUK
      Animation = UVBMBTRUK.UVBMBTRUK
      AnimationMode = LOOP

      ;Display the default bombload -- and the upgrades will handle the rest!
      HideSubObject = Bombload02 Bombload03 Bombload04
    End

    ConditionState = REALLYDAMAGED
      Model = UVBMBTRUK_D
      Animation = UVBMBTRUK_D.UVBMBTRUK_D
      AnimationMode = LOOP
    End

    ConditionState = RUBBLE
      Model = UVBMBTRUK_D
    End

    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire02
    MidLeftFrontTireBone = Tire03
    MidRightFrontTireBone = Tire04
    LeftRearTireBone = Tire05
    RightRearTireBone = Tire06
    TireRotationMultiplier = 0.2   ; this * speed = rotation.

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:BombTruck
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY SuicideWeapon
  End
  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TruckDamageFX
  End
  BuildCost       = 100
  BuildTime       = 15.0          ;in seconds
  VisionRange     = 150 ; Used in attack move targeting
  ShroudClearingRange     = 200
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAVehicleBombTruckCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BombTruckVoiceSelect
  VoiceMove = BombTruckVoiceMove
  VoiceGuard = BombTruckVoiceMove
  VoiceAttack = BombTruckVoiceAttack
  SoundMoveStart = BombTruckMoveStart
  SoundMoveStartDamaged = BombTruckMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate                   = BombTruckVoiceCreate
    TurretMoveStart               = NoSound
    TurretMoveLoop                = NoSound
    TruckLandingSound             = RocketBuggyLand
    TruckPowerslideSound          = NoSound
    DisguiseStarted               = BombTruckDisguiseStarted
    DisguiseRevealedSuccess       = BombTruckDisguiseRevealedSuccess
    DisguiseRevealedFailure       = BombTruckDisguiseRevealedFailure
    VoiceEnter = BombTruckVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE DISGUISER CANNOT_RETALIATE FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 110.0
    InitialHealth   = 110.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 440
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  ExperienceValue     = 50 50 50 50  ; Experience point value at each level
  IsTrainable = No

  ;Kris: Um, bomb trucks don't gain experience.
  ;Behavior = VeterancyGainCreate ModuleTag_03
  ;  StartingLevel = VETERAN
  ;End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End
  Locomotor = SET_NORMAL BombTruckLocomotor

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = ProductionUpdate ModuleTag_07
    ; nothing
  End

  Behavior = SlowDeathBehavior  ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 5
    ModifierBonusPerOverkillPercent = 20%  ; negative means less likely to pick this in the face of much damage, positive means more likely
    DestructionDelay = 0
    DestructionDelayVariance = 200
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BombTruckDeathEffect
  End

  ;Behavior = DestroyDie
    ;nothing
  ;End


  ;************************************************************************************************
  ;* WHICH BOMB DO WE USE???
  ;* We have 2 damage possibilities -- (normal OR high explosive)
  ;* So part 1 is inflicting the damage itself without creating effects
  ;* The complicated part is the part where we have 6 possible effect explosions based on
  ;* all the possible upgrade combinations. Note that bio weapons don't inflict damage through
  ;* the explosion.
  ;*
  ;* DAMAGE COMBINATIONS (NO EFFECTS):
  ;* 1) Normal (doesn't have high explosive upgrade)
  ;* 2) High explosive (has high-explosive upgrade)
  ;*
  ;* EFFECT COMBINATIONS (NO DAMAGE):
  ;* 1) Normal (no upgrades)
  ;* 2) Bio (bio-bomb upgrade)
  ;* 3) Anthrax (bio-bomb and anthrax upgrade)
  ;* 4) High explosive (high explosive upgrade)
  ;* 5) High explosive bio (high explosive and bio-bomb upgrade)
  ;* 6) High explosive anthrax (high explosive, bio-bomb, and anthrax upgrades)
  ;************************************************************************************************

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 1 -- Normal explosion (can't have high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon   = BombTruckDefaultBombDamageFake
    StartsActive  = Yes                      ; turned on by upgrade
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE DAMAGE POSSIBILITY 2 -- High explosion (always plays if it has high-explosive upgrade)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_10
    DeathWeapon   = BombTruckHighExplosionBombDamageFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 1 - Regular explosion (no upgrades)
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_11
    DeathWeapon   = BombTruckDefaultBombEffectFake
    StartsActive  = Yes                      ; turned on by upgrade
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 2 - Bio explosion
  ;* Requires:    Bio upgrade
  ;* Can't have:  Anthrax upgrade, high explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon   = BombTruckBioBombEffectFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 3 - Anthrax explosion
  ;* Requires:    Bio upgrade and anthrax upgrade
  ;* Can't have:  High explosive upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_13
    DeathWeapon   = BombTruckAnthraxBombEffectFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLAAnthraxBeta
    ConflictsWith = Upgrade_GLABombTruckHighExplosiveBomb
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 4 - High explosion
  ;* Requires:    High explosive upgrade
  ;* Can't have:  Bio upgrade and anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_14
    DeathWeapon   = BombTruckHighExplosiveBombEffectFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith = Upgrade_GLABombTruckBioBomb
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 5 - High explosive bio explosion
  ;* Requires:    High explosive upgrade and bio upgrade
  ;* Can't have:  Anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_15
    DeathWeapon   = BombTruckHighExplosiveBioBombEffectFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLABombTruckBioBomb
    ConflictsWith = Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;************************************************************************************************
  ;* EXCLUSIVE EFFECT COMBINATION 6 - High explosive Anthrax explosion
  ;* Requires:    High explosive, Bio, and anthrax upgrade
  ;************************************************************************************************
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_16
    DeathWeapon   = BombTruckHighExplosiveAnthraxBombEffectFake
    StartsActive  = No                      ; turned on by upgrade
    TriggeredBy   = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb Upgrade_GLAAnthraxBeta
    RequiresAllTriggers = Yes
  End

  ;-------------------------------------------------------------------
  ; Now we get to display the payload based on upgrades!!!
  ;-------------------------------------------------------------------
  Behavior = SubObjectsUpgrade ModuleTag_17
    ;*** Bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb
    ConflictsWith  = Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload02
    HideSubObjects = Bombload01 Bombload03 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_18
    ;*** High-explosive bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckHighExplosiveBomb
    ConflictsWith  = Upgrade_GLABombTruckBioBomb
    ShowSubObjects = Bombload03
    HideSubObjects = Bombload01 Bombload02 Bombload04
  End
  Behavior = SubObjectsUpgrade ModuleTag_19
    ;*** High-explosive bio bomb load ***
    TriggeredBy    = Upgrade_GLABombTruckBioBomb Upgrade_GLABombTruckHighExplosiveBomb
    ShowSubObjects = Bombload04
    HideSubObjects = Bombload01 Bombload02 Bombload03
    RequiresAllTriggers = Yes
  End
  ;-------------------------------------------------------------------


  Behavior = SpecialAbility ModuleTag_20
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End

  Behavior = StealthUpdate ModuleTag_22
    StealthDelay                          = 1
    DisguisesAsTeam                       = Yes
    RevealDistanceFromTarget              = 100.0f
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    DisguiseFX                            = FX_BombTruckDisguise
    DisguiseRevealFX                      = FX_BombTruckDisguiseReveal
    InnateStealth                         = Yes
    DisguiseTransitionTime                = 2000
    DisguiseRevealTransitionTime          = 1000
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_26
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleScudLauncherFake

  ; *** ART Parameters ***
  SelectPortrait         = SUScudLauncher_L
  ButtonImage            = SUScudLauncher

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLAAnthraxBeta
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ProjectileBoneFeedbackEnabledSlots = PRIMARY SECONDARY ; WeaponLaunchBone will be shown/hidden, not just used for firing offset

    DefaultConditionState
      Model = UVScudLchr
      Turret = TURRET
      TurretPitch = TURRETEL
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End

    ConditionState = REALLYDAMAGED
      Model = UVScudLchr_d
    End
    AliasConditionState = RUBBLE

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVScudLchr
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02
      WeaponLaunchBone = PRIMARY WeaponB
      WeaponLaunchBone = SECONDARY WeaponB
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVScudLchr
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO REALLYDAMAGED
      Model = UVScudLchr_d
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRET TURRETUP01
      WeaponLaunchBone = PRIMARY WeaponC
      WeaponLaunchBone = SECONDARY WeaponC
    End

    TrackMarks = EXTireTrack.tga

    Dust = ScudLauncherDust
    DirtSpray = RocketBuggyDirtSpray
    PowerslideSpray = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension,
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = Tire01
    RightFrontTireBone = Tire05
    LeftRearTireBone = Tire04
    RightRearTireBone = Tire08
    MidLeftFrontTireBone = Tire02
    MidRightFrontTireBone = Tire06
    MidLeftRearTireBone = Tire03
    MidRightRearTireBone = Tire07

    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    ;PowerslideRotationAddition = 0.0   ; This speed is added to the rotation speed when powersliding.

  End


  ; ***DESIGN parameters ***

  DisplayName      = OBJECT:ScudLauncher
  Side = GLAStealthGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None
    Weapon = PRIMARY SCUDLauncherGunExplosiveFake
    Weapon = SECONDARY SCUDLauncherGunToxinFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE
    Weapon = PRIMARY SCUDLauncherGunExplosiveFake
    Weapon = SECONDARY SCUDLauncherGunAnthraxFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOneFake
    Weapon = SECONDARY SCUDLauncherGunToxinPlusOneFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusOneFake
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusOneFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwoFake
    Weapon = SECONDARY SCUDLauncherGunToxinPlusTwoFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO
    Weapon = PRIMARY SCUDLauncherGunExplosivePlusTwoFake
    Weapon = SECONDARY SCUDLauncherGunAnthraxPlusTwoFake
    AutoChooseSources = PRIMARY FROM_SCRIPT FROM_AI DEFAULT_SWITCH_WEAPON
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    PreferredAgainst = SECONDARY INFANTRY
    ShareWeaponReloadTime = Yes
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 100
  BuildTime       = 15.0          ;in seconds
  VisionRange     = 180
  ShroudClearingRange = 300
  Prerequisites
    Object = Slth_GLAArmsDealer
  End

  ExperienceValue = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = Slth_GLAVehicleScudLauncherCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ScudLauncherVoiceSelect
  VoiceMove = ScudLauncherVoiceMove
  VoiceGuard = ScudLauncherVoiceMove
  VoiceAttack = ScudLauncherVoiceAttack
  SoundMoveStart = ScudLauncherMoveStart
  SoundMoveStartDamaged = ScudLauncherMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate       = ScudLauncherVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound
    TruckPowerslideSound = NoSound
    VoiceCrush = ScudLauncherVoiceCrush
    VoiceEnter = ScudLauncherVoiceMove
    VoicePrimaryWeaponMode = ScudLauncherVoiceModeHiEx
    VoiceSecondaryWeaponMode = ScudLauncherVoiceModeAnthrax
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY CAN_CAST_REFLECTIONS VEHICLE SALVAGER WEAPON_SALVAGER SCORE FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 180.0
    InitialHealth   = 180.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 360
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 60   ; turn rate, in degrees per sec
      TurretPitchRate = 60
      FirePitch = 90  ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch = Yes
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_04 ; allows use of command button hunt script with this unit.
  End

  Locomotor = SET_NORMAL ScudLauncherLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End

  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_ScudLauncherDamageTransition
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_09
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_SCUDLauncherDeathEffect
    FX  = FINAL    FX_ScudLauncherExplosionOneFinal
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateObjectDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = WeaponSetUpgrade ModuleTag_23
    TriggeredBy = Upgrade_GLAAnthraxBeta
  End

  Behavior = LockWeaponCreate ModuleTag_24
    SlotToLock = PRIMARY ; Prevents indeterminate state plus two unpickable weapons equaling no attack.
  End

  Geometry = BOX
  GeometryMajorRadius = 14.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 11.5
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End

;-----------------------------------------------------------------------------------------
Object Slth_GLANavalYard

  ; *** ART Parameters ***
  SelectPortrait         = SUArmsDealer_L
  ButtonImage            = SUArmsDealer

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ConditionState       = NONE
      Model              = 12GNY
    End
    AliasConditionState  = NIGHT
    AliasConditionState  = SNOW
    AliasConditionState  = NIGHT SNOW

    ConditionState    = DAMAGED
      Model           = 12GNY_D
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = SMOKE01 SmolderingSmoke
      ParticleSysBone = SMOKE02 SmolderingSmoke
    End
    AliasConditionState  = NIGHT DAMAGED
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = 12GNY_E
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire03 SmolderingSmoke
      ParticleSysBone = SPARKS01 SmolderingSmoke
     End
    AliasConditionState  = NIGHT REALLYDAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED
    AliasConditionState  = NIGHT SNOW REALLYDAMAGED

    ;**************************************************************************************************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = 12GNY
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = 12GNY_D
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = SMOKE01 SmolderingSmoke
      ParticleSysBone = SMOKE02 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = 12GNY_E
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire03 SmolderingSmoke
      ParticleSysBone = SPARKS01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = 12GNY
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = 12GNY_D
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = SMOKE01 SmolderingSmoke
      ParticleSysBone = SMOKE02 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = 12GNY_E
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire03 SmolderingSmoke
      ParticleSysBone = SPARKS01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = 12GNY
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = 12GNY_D
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = SMOKE01 SmolderingSmoke
      ParticleSysBone = SMOKE02 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = 12GNY_E
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire03 SmolderingSmoke
      ParticleSysBone = SPARKS01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = 12GNY
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = 12GNY_D
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = SMOKE01 SmolderingSmoke
      ParticleSysBone = SMOKE02 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = 12GNY_E
      ParticleSysBone = Fire01 SmolderingFireLarge
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingFireLarge
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire01 SmolderingSmoke
      ParticleSysBone = Fire02 SmolderingSmoke
      ParticleSysBone = Fire03 SmolderingSmoke
      ParticleSysBone = SPARKS01 SmolderingSmoke
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

  End

  PlacementViewAngle  = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GLANavalYard
  Side             = GLAStealthGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Slth_GLASupplyStash
  End
  BuildCost        = 2000
  BuildTime        = 16.0
  ;EnergyProduction = -1
  CommandSet       = Slth_GLANavalYardCommandSet
  VisionRange     = 200.0
  ShroudClearingRange = 200
  ArmorSet
    Conditions          = None
    Armor               = StructureArmor
    DamageFX            = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryGLASelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD CAPTURABLE FS_TECHNOLOGY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY SCORE_CREATE FS_FACTORY FS_WARFACTORY
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior               = RebuildHoleExposeDie ModuleTag_06
    HoleName        = NavalYardHole
    HoleMaxHealth   = 500.0
  End

  Behavior             = DestroyDie ModuleTag_07
    ;nothing
  End

  Behavior             = CreateObjectDie ModuleTag_1118
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000
    DoorWaitOpenTime             = 3000
    DoorCloseTime                = 2000
    ConstructionCompleteDuration = 1500
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X: -29.232  Y:-177.05   Z:-177.05
    NaturalRallyPoint = X: 201.543  Y:-177.05   Z:0.257
  End

  Behavior = RepairDockUpdate ModuleTag_12
    TimeForFullHeal   = 5000
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000
    AflameDamageAmount = 5
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_31
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 80.0
  GeometryMinorRadius = 15.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------
ObjectReskin Slth_NavalYardHole Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBBarracks_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED
      Model                = UBBarracks_R
      ParticleSysBone      = FLame01 FireSmallContinuous
      ParticleSysBone      = Flame02 FireSmallContinuous
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
      ParticleSysBone      = Smoke05 SmolderingSmoke
    End
  End
End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleRocketBoat

  ; *** ART Parameters ***
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model         = UVRockBt
      Turret              = TURRETUP01
      TurretPitch         = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End

    ConditionState  = OVER_WATER
      Model         = UVRockBt
      Turret              = TURRETUP01
      TurretPitch         = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End

    ConditionState  = MOVING OVER_WATER
      Model         = UVRockBt
      ParticleSysBone = TreadFX01 AmphibWave
      Turret              = TURRETUP01
      TurretPitch         = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponB
      WeaponLaunchBone = PRIMARY WeaponB
    End
  End

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:RocketBoat
  Side              = GLAStealthGeneral
  EditorSorting     = VEHICLE
  CommandSet        = GenericCommandSet

  ArmorSet
    Armor           = MissileBoatArmor
    DamageFX        = DefaultDamageFX
  End

  WeaponSet
    Conditions      = None
    Weapon          = PRIMARY RocketBoatWeapon
  End
  Prerequisites
    Object = Slth_GLANavalYard
  End

  BuildCost        = 1600
  BuildTime        = 8.0
  VisionRange     = 180
  ShroudClearingRange = 300
  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  SoundMoveLoop = AmphibiousTransportMoveLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE

  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

;  Behavior = VeterancyGainCreate ModuleTag_03
;    StartingLevel = VETERAN
;    ScienceRequired = SCIENCE_ArtilleryTraining
;  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180   ; turn rate, in degrees per sec
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45 ; this keeps it aimed half way between land and sky
      GroundUnitPitch       = 0
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior               = DestroyDie ModuleTag_05
                    ;nothing
  End
  Behavior               = CreateObjectDie ModuleTag_06
    DeathTypes = ALL
    CreationList    = OCL_GenericCarExplode
  End
  Behavior               = FXListDie ModuleTag_07
    DeathTypes = ALL -FLOODED
    DeathFX         = FX_GenericCarExplode
  End

  Locomotor       = SET_NORMAL MissileBoatLocomotor

  Behavior          = PhysicsBehavior ModuleTag_08
    Mass            = 30.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FloatUpdate UpdateTag_01
    Enabled = No ; 'no' because we dont want to be lifted by this update, just swayed around like a buoy
  End

  Geometry            = BOX
  Scale = 1.0                            ;Scaling
  GeometryIsSmall     = No
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 11.25
  GeometryHeight      = 5.0
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleQuadBoat

  ; *** ART Parameters ***
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model         = UVQuadBt
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   BarrelMS
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
      WeaponFireFXBone  = SECONDARY BarrelMS
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
      ShowSubObject = TURRET
      HideSubObject = TURRETUP01 TURRETUP02 BarrelFX01 BarrelFX02 BarrelFX03 BarrelFX04  ; Since we are showing one of three turrets, we need to then hide the subobject muzzleflash
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVQuadBt
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE REALLYDAMAGED
      Model = UVQuadBt
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE
      Model = UVQuadBt
      Turret = TURRETUP01
      TurretPitch = TURRETEL01
      WeaponFireFXBone  = PRIMARY   BarrelUp01MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp01FX
      WeaponRecoilBone  = PRIMARY   BarrelUp01
      WeaponFireFXBone  = SECONDARY BarrelUp01MS
      WeaponMuzzleFlash = SECONDARY BarrelUp01FX
      WeaponRecoilBone  = SECONDARY BarrelUp01
      ShowSubObject = TURRETUP01
      HideSubObject = TURRET TURRETUP02 BarrelUp01FX01 BarrelUp01FX02 BarrelUp01FX03 BarrelUp01FX04
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVQuadBt
      Turret = TURRETUP02
      TurretPitch = TURRETEL02
      WeaponFireFXBone  = PRIMARY   BarrelUp02MS
      WeaponMuzzleFlash = PRIMARY   BarrelUp02FX
      WeaponRecoilBone  = PRIMARY   BarrelUp02
      WeaponFireFXBone  = SECONDARY BarrelUp02MS
      WeaponMuzzleFlash = SECONDARY BarrelUp02FX
      WeaponRecoilBone  = SECONDARY BarrelUp02
      ShowSubObject = TURRETUP02
      HideSubObject = TURRETUP01 TURRET BarrelUp02FX01 BarrelUp02FX02 BarrelUp02FX03 BarrelUp02FX04 BarrelUp02MS01 BarrelUp02MS02 BarrelUp02MS03 BarrelUp02MS04
    End
  End

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:QuadBoat
  Side              = GLAStealthGeneral
  EditorSorting     = VEHICLE
  CommandSet        = GenericCommandSet

  ArmorSet
    Armor           = QuadBoatArmor
    DamageFX        = DefaultDamageFX
  End

  WeaponSet
    Conditions = None
    Weapon = PRIMARY QuadCannonGun
    Weapon = SECONDARY QuadCannonGunAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY QuadCannonGunUpgradeOne
    Weapon = SECONDARY QuadCannonGunUpgradeOneAir
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY QuadCannonGunUpgradeTwo
    Weapon = SECONDARY QuadCannonGunUpgradeTwoAir
  End

  Prerequisites
    Object = Slth_GLANavalYard
  End

  BuildCost        = 1300
  BuildTime        = 8.0
  VisionRange     = 180
  ShroudClearingRange = 300
  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  SoundMoveLoop = AmphibiousTransportMoveLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE SALVAGER WEAPON_SALVAGER

  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

;  Behavior = VeterancyGainCreate ModuleTag_03
;    StartingLevel = VETERAN
;    ScienceRequired = SCIENCE_ArtilleryTraining
;  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate        = 180   ; turn rate, in degrees per sec
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45 ; this keeps it aimed half way between land and sky
      GroundUnitPitch       = 0
      MinPhysicalPitch      = -20
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior               = DestroyDie ModuleTag_05
                    ;nothing
  End
  Behavior               = CreateObjectDie ModuleTag_06
    DeathTypes = ALL
    CreationList    = OCL_GenericCarExplode
  End
  Behavior               = FXListDie ModuleTag_07
    DeathTypes = ALL -FLOODED
    DeathFX         = FX_GenericCarExplode
  End

  Locomotor       = SET_NORMAL MissileBoatLocomotor

  Behavior          = PhysicsBehavior ModuleTag_08
    Mass            = 30.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FloatUpdate UpdateTag_01
    Enabled = No ; 'no' because we dont want to be lifted by this update, just swayed around like a buoy
  End

  Geometry            = BOX
  Scale = 1.0                            ;Scaling
  GeometryIsSmall     = No
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 11.25
  GeometryHeight      = 5.0
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
Object Slth_GLAVehiclePTBoat

  ; *** ART Parameters ***
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model         = AVPTBoat
    End

    ConditionState  = OVER_WATER
      Model         = AVPTBoat
    End

    ConditionState  = MOVING OVER_WATER
      Model         = AVPTBoat
      ParticleSysBone = TreadFX01 AmphibWave
    End
  End

  Draw = W3DModelDraw             ModuleTag_02 ; Gunner
    OkToChangeModelColor = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX02
      WeaponFireFXBone = PRIMARY Muzzle02
      WeaponLaunchBone = PRIMARY Muzzle02
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End


  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:PTBoat
  Side              = GLAStealthGeneral
  EditorSorting     = VEHICLE
  CommandSet        = GenericCommandSet
  ArmorSet
    Armor           = PTBoatArmor
    DamageFX        = DefaultDamageFX
  End
  WeaponSet
    Conditions = None
    Weapon = PRIMARY TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  Prerequisites
    Object = Slth_GLANavalYard
  End

  BuildCost        = 1100
  BuildTime        = 5.0
  VisionRange     = 180
  ShroudClearingRange = 300
  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles

  ; *** AUDIO Parameters ***
  SoundMoveLoop = AmphibiousTransportMoveLoop

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE ATTACK_NEEDS_LINE_OF_SIGHT CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE SALVAGER WEAPON_SALVAGER

  Body              = ActiveBody ModuleTag_03
    MaxHealth       = 600.0
    InitialHealth   = 600.0
  End

  Behavior               = DestroyDie ModuleTag_04
                    ;nothing
  End
  Behavior               = CreateObjectDie ModuleTag_05
    DeathTypes = ALL
    CreationList    = OCL_GenericCarExplode
  End
  Behavior               = FXListDie ModuleTag_06
    DeathTypes = ALL -FLOODED
    DeathFX         = FX_GenericCarExplode
  End

  Behavior = AIUpdateInterface ModuleTag_07
    Turret
      TurretTurnRate = 180       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      MinIdleScanAngle = 30      ; in degrees off the natural turret angle
      MaxIdleScanAngle = 60      ; in degrees off the natural turret angle
      MinIdleScanInterval = 5000 ; in milliseconds
      MaxIdleScanInterval = 10000 ; in milliseconds
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor       = SET_NORMAL MissileBoatLocomotor

  Behavior          = PhysicsBehavior ModuleTag_08
    Mass            = 30.0
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = FloatUpdate UpdateTag_01
    Enabled = No ; 'no' because we dont want to be lifted by this update, just swayed around like a buoy
  End

  Geometry            = BOX
  Scale = 1.0                            ;Scaling
  GeometryIsSmall     = No
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 11.25
  GeometryHeight      = 5.0
  Shadow              = SHADOW_VOLUME

End

;------------------------------------------------------------------------------
ObjectReskin Slth_GLAHoleSalvageStation Slth_GLAHole
  Draw                     = W3DModelDraw ModuleTag_01
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBHole
    End
    ConditionState         = DAMAGED
      Model                = UBHole_D
      ParticleSysBone      = Smoke01 SteamVent
    End
    ConditionState         = REALLYDAMAGED RUBBLE
      Model                = UBHole_E
      ParticleSysBone      = Smoke01 SteamVent
      ParticleSysBone      = Smoke02 SteamVent
      ParticleSysBone      = Fire01 GLAPowerPlantFlame
      ParticleSysBone      = Fire02 GLAPowerPlantFlame
      ParticleSysBone      = Fire03 GLAPowerPlantFlame
    End
  End
  Draw                     = W3DModelDraw ModuleTag_02
    OkToChangeModelColor   = Yes
    ConditionState         = NONE
      Model                = UBCmdHQ_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
    ConditionState         = DAMAGED REALLYDAMAGED RUBBLE
      Model                = UBCmdHQ_R
      ParticleSysBone      = Smoke01 SmolderingSmoke
      ParticleSysBone      = Smoke02 SmolderingSmoke
      ParticleSysBone      = Smoke03 SmolderingSmoke
      ParticleSysBone      = Smoke04 SmolderingSmoke
    End
  End
End

;=======================================================================================================
;GLA Salvage Station
;-------------------------------------------------------------------------------------------------------
Object Slth_GLASalvageStation ;-[ШТАБ-КВАРТИРА Кассада]№№№№№№№№№№№ OBJECT:SalvageStation №№№№№№№№№№№№№№

  ; *** ART Parameters ***
  SelectPortrait         = SUPrison_L
  ButtonImage            = SUPrison

  UpgradeCameo1 = Upgrade_GLAFortifiedStructure
  UpgradeCameo2 = Upgrade_GLACamoNetting

  ; ----- The actual command center
  ;----------------------------------------------------------
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison.UBPrison
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_D.UBPrison_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_E.UBPrison_E
      AnimationMode = LOOP
    End
    ConditionState    = GARRISONED
      Model = UBPrison
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison.UBPrison
      AnimationMode   = LOOP
    End
    ConditionState    = DAMAGED GARRISONED
      Model = UBPrison_D
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison_D.UBPrison_D
      AnimationMode   = LOOP
    End
    ConditionState    = REALLYDAMAGED GARRISONED
      Model = UBPrison_E
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison_E.UBPrison_E
      AnimationMode   = LOOP
    End
   
    ; Snow
    ConditionState = SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState    = GARRISONED SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPris_S.UBPris_S
      AnimationMode   = LOOP
    End
    ConditionState    = DAMAGED GARRISONED SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPriso_SD.UBPriso_SD
      AnimationMode   = LOOP
    End
    ConditionState    = REALLYDAMAGED GARRISONED SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPriso_ES.UBPriso_ES
      AnimationMode   = LOOP
    End

    ; night
    ConditionState = NIGHT
      Model = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPrison_N.UBPrison_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPrison_DN.UBPrison_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPrison_EN.UBPrison_EN
      AnimationMode = LOOP
    End
    ConditionState    = GARRISONED NIGHT
      Model = UBPrison_N
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison_N.UBPrison_N
      AnimationMode   = LOOP
    End
    ConditionState    = DAMAGED GARRISONED NIGHT
      Model = UBPrison_DN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison_DN.UBPrison_DN
      AnimationMode   = LOOP
    End
    ConditionState    = REALLYDAMAGED GARRISONED NIGHT
      Model = UBPrison_EN
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPrison_EN.UBPrison_EN
      AnimationMode   = LOOP
    End

    ; night snow
    ConditionState = NIGHT SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame01 GLAPowerPlantFlame
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      ParticleSysBone = Flame02 GLAPowerPlantFlame
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
    End
    ConditionState    = GARRISONED NIGHT SNOW
      Model = UBPris_S
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPris_S.UBPris_S
      AnimationMode   = LOOP
    End
    ConditionState    = DAMAGED GARRISONED NIGHT SNOW
      Model = UBPriso_SD
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPriso_SD.UBPriso_SD
      AnimationMode   = LOOP
    End
    ConditionState    = REALLYDAMAGED GARRISONED NIGHT SNOW
      Model = UBPriso_ES
      ParticleSysBone = OBJECT22 SteamVent
      ParticleSysBone = MESH13 ChimneySmokeSmall
      Animation  = UBPriso_ES.UBPriso_ES
      AnimationMode   = LOOP
    End

    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model    = UBPrison
      Animation     = UBPrison.UBPrison
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model    = UBPrison_D
      Animation     = UBPrison_D.UBPrison_D
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model    = UBPrison_E
      Animation     = UBPrison_E.UBPrison_E
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model    = UBPrison_N
      Animation     = UBPrison_N.UBPrison_N
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model    = UBPrison_DN
      Animation     = UBPrison_DN.UBPrison_DN
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model    = UBPrison_EN
      Animation     = UBPrison_EN.UBPrison_EN
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model    = UBPris_S
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model    = UBPriso_SD
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model    = UBPriso_ES
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model    = UBPris_S
      Animation     = UBPris_S.UBPris_S
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model    = UBPriso_SD
      Animation     = UBPriso_SD.UBPriso_SD
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model    = UBPriso_ES
      Animation     = UBPriso_ES.UBPriso_ES
      AnimationMode = LOOP
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState  = AWAITING_CONSTRUCTION 
      Model    = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBPrison_A4
      Animation  = UBPrison_A4.UBPrison_A4
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBPrison_A4N
      Animation  = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBPrison_A4S
      Animation  = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UBPrison_A4SN
      Animation  = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model = UBPrison_A4
      Animation  = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model = UBPrison_A4N
      Animation  = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model = UBPrison_A4S
      Animation  = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model = UBPrison_A4SN
      Animation  = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model = UBPrison_A4
      Animation  = UBPrison_A4.UBPrison_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model = UBPrison_A4N
      Animation  = UBPrison_A4N.UBPrison_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model = UBPrison_A4S
      Animation  = UBPrison_A4S.UBPrison_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model = UBPrison_A4SN
      Animation  = UBPrison_A4SN.UBPrison_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model = UBPrison_A6
      Animation  = UBPrison_A6.UBPrison_A6
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model = UBPrison_A6N
      Animation  = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDust
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
      ParticleSysBone = Smoke04 BuildUpSmoke
      ParticleSysBone = Smoke05 BuildUpSmoke
      ParticleSysBone = Smoke06 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model = UBPrison_A6S
      Animation  = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
      ParticleSysBone = Smoke06 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model = UBPrison_A6SN
      Animation  = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke06 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model  = UBPrison_A6
      Animation  = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model  = UBPrison_A6N
      Animation  = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model  = UBPrison_A6S
      Animation  = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model  = UBPrison_A6SN
      Animation  = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model = UBPrison_A6
      Animation  = UBPrison_A6.UBPrison_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model = UBPrison_A6N
      Animation  = UBPrison_A6N.UBPrison_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model = UBPrison_A6S
      Animation  = UBPrison_A6S.UBPrison_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model = UBPrison_A6SN
      Animation  = UBPrison_A6SN.UBPrison_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags = START_FRAME_LAST
    End
  End

  ; --------------- The Factory Door -----------------
  Draw = W3DModelDraw ModuleTag_04111

    ConditionState    = NONE
      Model = UBPrison_A8
      Animation  = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW

    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model    = UBPrison_A8
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT
    
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model    = UBPrison_A7D
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW NIGHT DAMAGED
    
    ConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model    = UBPrison_A7E
      Flags    = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW NIGHT
    
    ConditionState  = AWAITING_CONSTRUCTION 
      Model    = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED

    ConditionState    = DAMAGED
      Model = UBPrison_A7D
      Animation  = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model = UBPrison_A7E
      Animation  = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
   
    ConditionState    = DOOR_1_OPENING
      Model = UBPrison_A8
      Animation  = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE
      Flags = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING

    ConditionState    = DOOR_1_OPENING DAMAGED
      Model = UBPrison_A7D
      Animation  = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE
      Flags = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED

    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model = UBPrison_A7E
      Animation  = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE
      Flags = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_CLOSING
      Model = UBPrison_A8
      Animation  = UBPrison_A8.UBPrison_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model = UBPrison_A7D
      Animation  = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED

    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model = UBPrison_A7E
      Animation  = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = ONCE_BACKWARDS
      Flags = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_WAITING_OPEN
      Model = UBPrison_A8
      Animation  = UBPrison_A8.UBPrison_A8
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN

    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model = UBPrison_A7D
      Animation  = UBPrison_A7D.UBPrison_A7D
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model = UBPrison_A7E
      Animation  = UBPrison_A7E.UBPrison_A7E
      AnimationMode   = MANUAL
      Flags = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
  End

  ;-------------FORTIFIED STATE----------------
  Draw = W3DModelDraw ModuleTag_Draw05
    OkToChangeModelColor = Yes

    ConditionState = NONE
      Model = none
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = NIGHT
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = NIGHT SNOW
    AliasConditionState = DAMAGED NIGHT SNOW
    AliasConditionState = REALLYDAMAGED NIGHT SNOW

    ; day
    ConditionState = GARRISONED
      Model = UBPrisonEG
    End
    AliasConditionState = GARRISONED NIGHT

    ConditionState = DAMAGED GARRISONED
      Model = UBPrisonEG_D
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT

    ConditionState = REALLYDAMAGED GARRISONED
      Model = UBPrisonEG_E
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT
        
    ; Snow
    ConditionState = GARRISONED SNOW
      Model = UBPrisonEG_S
    End
    AliasConditionState = GARRISONED NIGHT SNOW

    ConditionState = DAMAGED GARRISONED SNOW
      Model = UBPrisonEG_DS
    End
    AliasConditionState = DAMAGED GARRISONED NIGHT SNOW

    ConditionState = REALLYDAMAGED GARRISONED SNOW
      Model = UBPrisonEG_ES
    End
    AliasConditionState = REALLYDAMAGED GARRISONED NIGHT SNOW

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = UBPrisonEG
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = UBPrisonEG_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = UBPrisonEG_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBPrisonEG_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBPrisonEG_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = UBPrisonEG_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = UBPrison_SD
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = UBPrison_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT
    AliasConditionState  = GARRISONED SOLD NIGHT DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SalvageStation ;№№№№№№№[Секретная База Кассада]№№№№№№№№
  Side                = GLAStealthGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 1500 ;[в 9.1.18 было: 2000]*
  BuildTime           = 25.0 ;[в 9.1.18 было: 45.0]* ;in seconds
 ;;;;EnergyProduction = 2  ;Command center should be free
  CommandSet = Slth_GLASalvageStationCommandSet
  Prerequisites
    Object = Slth_GLAPalace
    Science = SCIENCE_GLA_STEH_GENERAL
  End
  VisionRange         = 600.0 ;300.0 ; Shroud clearing distance
  ShroudClearingRange = 600   ;300
 ;---------------------------
  MaxSimultaneousOfType = 6
 ;---------------------------
  ArmorSet
    Conditions = None
    Armor      = StructureArmorTough
    DamageFX   = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = GLAUpgradedStructureArmorTough
    DamageFX   = StructureDamageFXNoShake
  End

  ExperienceValue = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect    = PrisonSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CAPTURABLE MP_COUNT_FOR_VICTORY SCORE_CREATE AUTO_RALLYPOINT
  Body                = StructureBody ModuleTag_04
    MaxHealth         = 3000.0
    InitialHealth     = 3000.0
    ;Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ;The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
;=====================================================
  Behavior = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponDemoralize
    OCL = SUPERWEAPON_Demoralize
    CreateLocation = CREATE_AT_LOCATION
  End
;====================================================
  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End
  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_1087
    NumDoorAnimations            = 1
    DoorOpeningTime              = 2000
    DoorWaitOpenTime             = 2000
    DoorCloseTime                = 2000
    ConstructionCompleteDuration = 0
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_1197
    UnitCreatePoint   = X:-20.0  Y: 15.0   Z:0.0
    NaturalRallyPoint = X:-20.0  Y: 50.0   Z:0.0 ;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior             = RebuildHoleExposeDie ModuleTag_28
    HoleName      = Slth_GLAHoleSalvageStation
    HoleMaxHealth = 500.0
  End
  Behavior             = DestroyDie ModuleTag_09
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_10
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_11
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = FireWeaponUpdate ModuleTag_23
    Weapon = FakeCrateWeapon
  End

  Behavior = FlammableUpdate ModuleTag_19
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_20
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_09
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_24
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№??????????????????????
;------------------------------------------------------------
;  Behavior = ModelConditionUpgrade ModuleTag_CamonetVisual
;    ConditionFlag = USER_1
;    TriggeredBy   = Upgrade_GLACamoNetting
;  End
;-----------------------------------------------------------????????????????????????????
;  Behavior = ModelConditionUpgrade ModuleTag_CamonetVisual
;    ConditionFlag = USER_2
;    TriggeredBy   = Upgrade_GLACamoNetting
;  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№???????????????????????
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry            = BOX
  GeometryMajorRadius = 35.0
  GeometryMinorRadius = 35.0
  GeometryHeight      = 23.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;----------------------------------------------------------------------
Object Slth_GLAAirfield

  ; *** ART Parameters ***
  SelectPortrait         = T4_L
  ButtonImage            = T4

  UpgradeCameo1  = Upgrade_GLAFortifiedStructure
  UpgradeCameo2  = Upgrade_GLACamoNetting

  Draw = W3DModelDraw ModuleTag_01

    IgnoreConditionStates = SNOW NIGHT ;night models available but no good
    OkToChangeModelColor = Yes

    ExtraPublicBone = Runway1Parking1
    ExtraPublicBone = Runway1Parking2
    ExtraPublicBone = Runway2Parking1
    ExtraPublicBone = Runway2Parking2
    ExtraPublicBone = Runway1Park1Han
    ExtraPublicBone = Runway1Park2Han
    ExtraPublicBone = Runway2Park1Han
    ExtraPublicBone = Runway2Park2Han
    ExtraPublicBone = Runway1Prep1
    ExtraPublicBone = Runway1Prep2
    ExtraPublicBone = Runway2Prep1
    ExtraPublicBone = Runway2Prep2
    ExtraPublicBone = RunwayStart1
    ExtraPublicBone = RunwayStart2
    ExtraPublicBone = RunwayEnd1
    ExtraPublicBone = RunwayEnd2

    ExtraPublicBone = HeliPark01

    ExtraPublicBone = WKRBON ;worker
    ExtraPublicBone = LIGHTSCH ;searchlight

    ExtraPublicBone = STATION01
    ExtraPublicBone = STATION02
    ExtraPublicBone = STATION03

    ConditionState = NONE
      Model         = UBairfield
      Animation     = UBairfield.UBairfield
      AnimationMode = LOOP
      ParticleSysBone = LIGHT01 RedFlashingLight
      ParticleSysBone = LIGHT02 RedFlashingLight
      ParticleSysBone = STEAM01 DozerSmokeLight
    End

    ConditionState = DAMAGED
      Model         = UBairfield_d
      Animation     = UBairfield_d.UBairfield_d
      AnimationMode = LOOP
      ParticleSysBone = LIGHT01 RedFlashingLight
      ParticleSysBone = LIGHT02 RedFlashingLight
      ParticleSysBone = STEAM01 DozerSmokeHeavy
    End

    ConditionState = REALLYDAMAGED
      Model         = UBairfield_e
      Animation     = UBairfield_e.UBairfield_e
      AnimationMode = LOOP
      ParticleSysBone = LIGHT02 LiveWireSparks02
      ParticleSysBone = STEAM01 AutoFireSmall01
      ParticleSysBone = RADARDISH02 LiveWireSparks02
      ParticleSysBone = RADARDISH SparksMedium
    End


    ConditionState  = ACTIVELY_CONSTRUCTING
      Model         = UBairfield
      Animation     = UBairfield.UBairfield
      AnimationMode = LOOP
      ParticleSysBone = LIGHT01 RedFlashingLight
      ParticleSysBone = LIGHT02 RedFlashingLight
      ParticleSysBone = STEAM01 SteamVent
      ParticleSysBone = SMOKE01 BuildUpSparks02
    End
    AliasConditionState = ACTIVELY_CONSTRUCTING DAMAGED

    ConditionState  = ACTIVELY_CONSTRUCTING REALLYDAMAGED
      Model         = UBairfield_e
      Animation     = UBairfield_e.UBairfield_e
      AnimationMode = LOOP
      ParticleSysBone = LIGHT02 LiveWireSparks02
      ParticleSysBone = STEAM01 AutoFireSmall01
      ParticleSysBone = STEAM01 SteamVent
      ParticleSysBone = SMOKE01 BuildUpSparks02
      ParticleSysBone = RADARDISH02 LiveWireSparks02
      ParticleSysBone = RADARDISH SparksMedium
    End

    ConditionState  = RUBBLE
      Model         = UBairfield_R
      ;ParticleSysBone = FIRES01 SmolderingFire
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBairfield
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBairfield_d
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBairfield_e
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    ;**************************************************************************************************************************

  End

  ; ------------- Searchlight ------------------
  Draw = W3DModelDraw ModuleTag_SchLgt
    AttachToBoneInAnotherModule = LIGHTSCH

    ;DefaultConditionState
    ConditionState = NONE
      Model        = NONE
    End

    ConditionState  = ARMORSET_CRATEUPGRADE_ONE
      Model         = Searchlight
      ShowSubObject = SEARCHLIGHTBEAM
      Animation     = Searchlight.Searchlight
      AnimationMode = LOOP
      Flags         = RANDOMSTART
    End

    ConditionState  = DAMAGED ARMORSET_CRATEUPGRADE_ONE
      Model         = Searchlight
      ShowSubObject = SEARCHLIGHTBEAM
      Animation     = Searchlight.Searchlight
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      AnimationSpeedFactorRange = 0.3 0.3
      ParticleSysBone = None SparksMedium
    End

    ConditionState  = REALLYDAMAGED ARMORSET_CRATEUPGRADE_ONE
      Model         = Searchlight
      HideSubObject = SEARCHLIGHTBEAM
      Animation     = Searchlight.Searchlight
      AnimationMode = MANUAL
      Flags         = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone = None TankSmoke
    End


    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NONE
    End
    AliasConditionState  = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = SOLD
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = RUBBLE
   ;**************************************************************************************************************************

  End

  ; ------------- Worker hammering junk ------------------
  Draw = W3DModelDraw ModuleTag_Wrkr
    AttachToBoneInAnotherModule = WKRBON
    OkToChangeModelColor = Yes

    ;DefaultConditionState
    ConditionState = NONE
      Model        = NONE
    End

    ConditionState  = ARMORSET_CRATEUPGRADE_ONE
      Model         = UIWRKR_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_STA 0 9
      IdleAnimation = UIWRKR_SKL.UIWRKR_IDA
      IdleAnimation = UIWRKR_SKL.UIWRKR_CHA
      IdleAnimation = UIWRKR_SKL.UIWRKR_TRA1
      IdleAnimation = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End

    ConditionState  = SPECIAL_CHEERING ARMORSET_CRATEUPGRADE_ONE
      Model         = UIWRKR_SKN
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End

    ConditionState  = ACTIVELY_CONSTRUCTING ARMORSET_CRATEUPGRADE_ONE
      Model         = UIWRKR_SKN
      Animation     = UIWRKR_SKL.UIWRKR_BDA
      AnimationMode = LOOP
      TransitionKey = TRANS_Constructing
      ParticleSysBone = BONE_FX LiveWireSparks
    End

    TransitionState = TRANS_Stand TRANS_Constructing
      Model         = UIWRKR_SKN
      Animation     = UIWRKR_SKL.UIWRKR_TRA1
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Constructing TRANS_Stand
      Model         = UIWRKR_SKN
      Animation     = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
    End

    ConditionState  = SOLD ARMORSET_CRATEUPGRADE_ONE
      Model         = UIWRKR_SKN
      Animation     = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION
   ;**************************************************************************************************************************

  End

  ; ----------------- door #1 ------------------- RUNWAY1PARK1HAN 0 4 0 0
  Draw = W3DModelDraw ModuleTag_02
    IgnoreConditionStates = SNOW NIGHT DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model           = UBairfield_A4
      Animation       = UBairfield_A4.UBairfield_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_1_OPENING
      Animation       = UBairfield_A4.UBairfield_A4
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_1_CLOSING
      Animation       = UBairfield_A4.UBairfield_A4
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = DOOR_1_WAITING_OPEN
      Animation       = UBairfield_A4.UBairfield_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NONE
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = SOLD
    ;**************************************************************************************************************************

  End


  ; ----------------- door #2 ------------------- RUNWAY2PARK1HAN 0 0 0 2
  Draw = W3DModelDraw ModuleTag_03
    IgnoreConditionStates = SNOW NIGHT DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model           = UBairfield_A5
      Animation       = UBairfield_A5.UBairfield_A5
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_2_OPENING
      Animation       = UBairfield_A5.UBairfield_A5
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_2_CLOSING
      Animation       = UBairfield_A5.UBairfield_A5
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = DOOR_2_WAITING_OPEN
      Animation       = UBairfield_A5.UBairfield_A5
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NONE
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = SOLD
    ;**************************************************************************************************************************

  End


  ; ----------------- door #3 ------------------- RUNWAY1PARK2HAN 5 0 0 0
  Draw                = W3DModelDraw ModuleTag_04
    IgnoreConditionStates = SNOW NIGHT DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model           = UBairfield_A2
      Animation       = UBairfield_A2.UBairfield_A2
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_3_OPENING
      Animation       = UBairfield_A2.UBairfield_A2
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_3_CLOSING
      Animation       = UBairfield_A2.UBairfield_A2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = DOOR_3_WAITING_OPEN
      Animation       = UBairfield_A2.UBairfield_A2
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NONE
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = SOLD
    ;**************************************************************************************************************************

  End

  ; ----------------- door #4 ------------------- RUNWAY2PARK2HAN 0 0 3 0
  Draw                = W3DModelDraw ModuleTag_05
    IgnoreConditionStates = SNOW NIGHT DAMAGED REALLYDAMAGED RUBBLE

    DefaultConditionState
      Model           = UBairfield_A3
      Animation       = UBairfield_A3.UBairfield_A3
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_4_OPENING
      Animation       = UBairfield_A3.UBairfield_A3
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End

    ConditionState    = DOOR_4_CLOSING
      Animation       = UBairfield_A3.UBairfield_A3
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End

    ConditionState    = DOOR_4_WAITING_OPEN
      Animation       = UBairfield_A3.UBairfield_A3
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NONE
    End

    ConditionState       = AWAITING_CONSTRUCTION
      Model              = NONE
    End
    AliasConditionState  = SOLD
    ;**************************************************************************************************************************

  End


  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = SmokeS01 SmokeBuildingSmall
      ParticleSysBone = SparksS01 LiveWireSparks02
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBairfield_A6
      Animation       = UBairfield_A6.UBairfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_08
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = NONE
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBArFrcSc_S
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBArFrcSc_S
; @todo srj -- missing
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Sparks01 BuildUpBlueSpark
      ParticleSysBone = Sparks02 BuildUpBlueSpark
      ParticleSysBone = Sparks03 BuildUpBlueSpark
      ParticleSysBone = Sparks04 BuildUpBlueSpark
      ParticleSysBone = Sparks05 BuildUpBlueSpark
      ParticleSysBone = Sparks06 BuildUpBlueSpark
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBArFrcSc_S
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBArFrcSc_S
; @todo srj -- missing
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBArFrcSc
      Animation       = UBArFrcSc.UBArFrcSc
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBArFrcSc_S
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBArFrcSc_S
; @todo srj -- missing
      Animation       = UBArFrcSc_S.UBArFrcSc_S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Airfield  ;№№№№№№№№№№№№№№№№
  Side          = GLAStealthGeneral
  EditorSorting = STRUCTURE
  Prerequisites
    Object = Slth_GLAPalace
  End
  BuildCost = 1500
  BuildTime = 30.0 ;20.0 ;[30.0]*
 ;---------------------------
  MaxSimultaneousOfType = 4
 ;---------------------------
  CommandSet = Slth_GLAAirfieldCommandSet
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
 ;;;;EnergyProduction = -1
  ArmorSet
    Conditions = None
    Armor      = StructureArmor
    DamageFX   = StructureDamageFXNoShake
  End

  ArmorSet
    Conditions = PLAYER_UPGRADE
    Armor      = GLAUpgradedStructureArmorTough
    DamageFX   = StructureDamageFXNoShake
  End

  ExperienceValue = 150 150 150 150  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = AirfieldChinaSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = STRUCTURE
  KindOf = PRELOAD AUTO_RALLYPOINT STRUCTURE SELECTABLE IMMOBILE FS_FACTORY MP_COUNT_FOR_VICTORY FS_AIRFIELD

  Body = StructureBody ModuleTag_20
    MaxHealth     = 2200.0
    InitialHealth = 2200.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 3200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy = Upgrade_GLAFortifiedStructure
  End

  Behavior = ProductionUpdate ModuleTag_21
    ; nothing
  End

  Behavior = CreateObjectDie ModuleTag_22
    CreationList  = OCL_SmallStructureDebris
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_77800
    HoleName      = GLAHoleAirfield
    HoleMaxHealth = 500.0
  End

  Behavior = ParkingPlaceBehavior ModuleTag_11
    HealAmountPerSecond   = 10
    NumRows               = 2

    NumCols               = 2
    HasRunways            = Yes
    ApproachHeight        = 50
  End

  Behavior = ProductionUpdate ModuleTag_12
    NumDoorAnimations            = 4
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1000  ;in mSeconds
  End

  Behavior             = FXListDie ModuleTag_23
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = FlammableUpdate ModuleTag_25
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_24
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:RUNWAYSTART2 RandomBone:No PSys:StructureTransitionMediumSmoke
    DamagedParticleSystem2       = Bone:FIRES01      RandomBone:No PSys:MolotovBurningRag
    DamagedParticleSystem3       = Bone:SMOKES02     RandomBone:No PSys:SmokeFactionSmall
    DamagedParticleSystem4       = Bone:SMOKES03     RandomBone:No PSys:LiveWireSparks
    DamagedParticleSystem5       = Bone:FIREM01      RandomBone:No PSys:FireFactionMedium
    DamagedParticleSystem6       = Bone:SMOKEM01     RandomBone:No PSys:SmokeFactionMedium
    DamagedParticleSystem7       = Bone:HELIPARK01   RandomBone:No PSys:SmokeFactionMedium
    DamagedParticleSystem8       = Bone:FIREM01      RandomBone:No PSys:TankSmoke
    DamagedOCL1     = Loc:x:-81 y:42 z:37  OCL:OCL_QuadCannon_NormalExplosion
    DamagedFXList1  = Loc:x:-81 y:42 z:37  FXList:FX_DragonTankDeathExplosionFinal

    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:RUNWAYSTART2 RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:RUNWAYSTART2 RandomBone:No PSys:MolotovBurningRag
    ReallyDamagedParticleSystem3 = Bone:RUNWAYSTART2 RandomBone:No PSys:SmokeFactionSmall
    ReallyDamagedParticleSystem4  = Bone:FIRES01    RandomBone:No PSys:LiveWireSparks
    ReallyDamagedParticleSystem5  = Bone:SMOKES01   RandomBone:No PSys:FireFactionMedium
    ReallyDamagedParticleSystem6  = Bone:FIRES02    RandomBone:No PSys:SmokeFactionMedium
    ReallyDamagedParticleSystem7  = Bone:SMOKES02   RandomBone:No PSys:SmokeFactionMedium
    ReallyDamagedParticleSystem8  = Bone:FIRES03    RandomBone:No PSys:TankSmoke
    ReallyDamagedOCL1     = Loc:x:-81 y:42 z:37  OCL:OCL_TsingMaExplosion
    ReallyDamagedFXList1  = Loc:x:-81 y:42 z:37  FXList:FX_TsingMaExplosion

    ;---------------------------------------------------------------------------------------
    RubbleFXList1 = Loc:x:60 y:40 z:2 FXList:FX_FRANTANDetonation
    RubbleOCL1    = Loc:x:77.705 y:19.628 z:1 OCL:OCL_FlamingInfantry

    RubbleFXList2 = Loc:x:-49 y:63 z:25 FXList:FX_TsingMaExplosion
    RubbleOCL2    = Loc:x:-49 y:63 z:25 OCL:OCL_TsingMaExplosion

    RubbleFXList3 = Loc:x:-111 y:-52 z:25 FXList:FX_TsingMaExplosion
    RubbleOCL3    = Loc:x:-111 y:-52 z:25 OCL:OCL_TsingMaExplosion

    RubbleFXList4 = Loc:x:77.705 y:19.628 z:1 FXList:FX_DieByFireChina
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Behavior = GrantUpgradeCreate ModuleTag_168
    UpgradeToGrant = Upgrade_GLACamoNetting
  End
;========================================================================
  Behavior = StealthUpdate ModuleStealth_0900
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_2400
    TriggeredBy = Upgrade_GLACamoNetting
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry            = BOX
  GeometryMajorRadius = 120 ;150.0
  GeometryMinorRadius = 80  ;104.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
;  FactoryExtraBibWidth = 49.0
  Shadow          = SHADOW_VOLUME
  Scale           = 0.79 ;sqrt of 1.8 for 180%
  BuildCompletion = PLACED_BY_PLAYER

End

;----------------------------------------------------------------------------------
Object Slth_GLAFlakCannon

  ; *** ART Parameters ***
  SelectPortrait         = FlakCannon
  ButtonImage            = FlakCannon

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ConditionState = NONE
      Model = 12FkDef
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponLaunchBone = PRIMARY MUZZLE
      WeaponRecoilBone = PRIMARY BARREL
      WeaponFireFXBone = PRIMARY MUZZLE
      WeaponMuzzleFlash = PRIMARY MUZZLE
    End
    AliasConditionState = NIGHT SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    
    ConditionState = DAMAGED
      Model = 12FkDef_D
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponLaunchBone = PRIMARY MUZZLE
      WeaponRecoilBone = PRIMARY BARREL
      WeaponFireFXBone = PRIMARY MUZZLE
      WeaponMuzzleFlash = PRIMARY MUZZLE
      ParticleSysBone  = SMOKE01 SmolderingSmoke      
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = 12FkDef_E
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponLaunchBone = PRIMARY MUZZLE
      WeaponRecoilBone = PRIMARY BARREL
      WeaponFireFXBone = PRIMARY MUZZLE
      WeaponMuzzleFlash = PRIMARY MUZZLE
      ParticleSysBone  = SMOKE01 SmolderingSmoke
      ParticleSysBone  = Fire01 SmolderingFire
      ParticleSysBone  = Fire01 SmolderingSmoke
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ;**************************************************************************************************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = 12FkDef
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = 12FkDef_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = 12FkDef_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = 12FkDef
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = 12FkDef_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = 12FkDef_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = 12FkDef
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = 12FkDef_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = 12FkDef_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = 12FkDef
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = 12FkDef_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = 12FkDef_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ mod's fortified upgrade -----------------
   Draw = W3DModelDraw ModuleTag_Fort01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    
    ConditionState      = GARRISONED
      Model             = UBUndTunF
    End
    ConditionState      = GARRISONED DAMAGED
      Model             = UBUndTunF_D
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE
      Model             = UBUndTunF_E
    End
    
    
    ConditionState      = GARRISONED SNOW
      Model             = UBUndTunF_S
    End
    ConditionState      = GARRISONED DAMAGED SNOW
      Model             = UBUndTunF_DS
    End
    ConditionState      = GARRISONED REALLYDAMAGED RUBBLE SNOW
      Model             = UBUndTunF_ES
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = GARRISONED AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD 
    AliasConditionState  = GARRISONED SOLD DAMAGED
    AliasConditionState  = GARRISONED SOLD REALLYDAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW
    AliasConditionState  = GARRISONED SOLD SNOW DAMAGED
    AliasConditionState  = GARRISONED SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
  End

Draw = W3DModelDraw ModuleTag_Camonetting
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model              = NONE
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED RUBBLE
    AliasConditionState  = SNOW
    AliasConditionState  = SNOW DAMAGED
    AliasConditionState  = SNOW REALLYDAMAGED RUBBLE

    ConditionState      = USER_1
      Model             = UBTnlNtC
    End
    ConditionState      = USER_1 DAMAGED
      Model             = UBTnlNtC_D
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE
      Model             = UBTnlNtC_D
    End
    
    
    ConditionState      = USER_1 SNOW
      Model             = UBTnlNtC_S
    End
    ConditionState      = USER_1 DAMAGED SNOW
      Model             = UBTnlNtC_SD
    End
    ConditionState      = USER_1 REALLYDAMAGED RUBBLE SNOW
      Model             = UBTnlNtC_SD
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = USER_1 AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD 
    AliasConditionState  = USER_1 SOLD DAMAGED
    AliasConditionState  = USER_1 SOLD REALLYDAMAGED
    AliasConditionState  = USER_1 SOLD SNOW
    AliasConditionState  = USER_1 SOLD SNOW DAMAGED
    AliasConditionState  = USER_1 SOLD SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
End



  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:GLAFlakCannon ;[ЗЕНИТКА - Стационарное ПВО-орудие]
  Side                = GLA
  EditorSorting       = STRUCTURE
  BuildCost           = 1400
  BuildTime           = 20.0
  ;;;;EnergyProduction = -1
  VisionRange         = 600.0
  ShroudClearingRange = 400
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY FlakCannon
    PreferredAgainst    = PRIMARY AIRCRAFT
  End
  ArmorSet
    Conditions        = None
    Armor             = StingerSiteArmor
    DamageFX          = StructureDamageFXNoShake
  End
  ArmorSet
    Conditions        = PLAYER_UPGRADE
    Armor             = GLAUpgradedStructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  Prerequisites
    Object = Slth_GLAPalace
    ;Object = Slth_GLAPowerPlant
  End
  CommandSet          = Slth_GLAStingerSiteCommandSet
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE POWERED IMMOBILE FS_BASE_DEFENSE IMMUNE_TO_CAPTURE SCORE_CREATE

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 1000.0
    InitialHealth      = 1000.0
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 180
      TurretPitchRate       = 180
      AllowsPitch           = Yes
      NaturalTurretPitch    = 45   
      ControlledWeaponSlots = PRIMARY
      MinIdleScanInterval   = 200
      MaxIdleScanInterval   = 200
      MinIdleScanAngle      = 0
      MaxIdleScanAngle      = 360
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 200
  End

  Behavior        = DestroyDie ModuleTag_09
    ;<NO DATA>
  End

  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End

  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = StealthUpdate ModuleTag_40700
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = GrantUpgradeCreate ModuleTag_1000
    UpgradeToGrant = Upgrade_GLACamouflage
  End

  Behavior = StealthUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_15
  End

  Behavior                = FlammableUpdate ModuleTag_16
    AflameDuration        = 5000
    AflameDamageAmount    = 5
    AflameDamageDelay     = 500
  End

  Behavior        = ModelConditionUpgrade ModuleTag_Armor01Visual
    ConditionFlag = GARRISONED
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior        = ArmorUpgrade ModuleTag_Armor01
    TriggeredBy   = Upgrade_GLAFortifiedStructure
  End

  Behavior             = RebuildHoleExposeDie ModuleTag_0968
    HoleName      = GLAHoleTunnelNetwork
    HoleMaxHealth = 500.0
  End

  Behavior        = ModelConditionUpgrade ModuleTag_CamonetVisual
    ConditionFlag = USER_1
    TriggeredBy   = Upgrade_GLACamoNetting
  End

  Behavior = StealthDetectorUpdate ModuleTag_1357
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 150   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Geometry            = CYLINDER
  GeometryMajorRadius = 36.0
  GeometryHeight      = 9.0    
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;===============================================================
Object Slth_GLATankRogue ;[Убер "Мошенник"] ; OBJECT:Rogue

  ; *** ART Parameters ***
  SelectPortrait         = TankRogue
  ButtonImage            = TankRogue

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLARadarVanScan
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle


  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = Dum_Turret 

; no crate upgrade
    ConditionState = NONE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End


    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

; crate upgrade 2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

; crate upgrade 2
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.


    LeftFrontTireBone = KOLESO05
    RightFrontTireBone = KOLESO03
    MidLeftFrontTireBone = KOLESO06
    MidRightFrontTireBone = KOLESO02
    LeftRearTireBone = KOLESO04
    RightRearTireBone = KOLESO01


    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_upi

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = KORPUS

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model               = UVRogue_P
      Turret              = ECMRRET01
      TurretPitch         = TURRET01
      WeaponFireFXBone    = SECONDARY WEAPON2
      WeaponLaunchBone    = SECONDARY WEAPON2
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model               = UVRogue_PD
      Turret              = ECMRRET01
      TurretPitch         = TURRET01
      WeaponFireFXBone    = SECONDARY WEAPON2
      WeaponLaunchBone    = SECONDARY WEAPON2
    End
  End

  Draw = W3DModelDraw ModuleMod_OverWater ;CV04C
    DefaultConditionState
      Model = NVTCrawler_W
    End
    AliasConditionState  = MOVING
    ConditionState       = OVER_WATER
      ParticleSysBone    = TreadFX05 AmphibWaveRest
      ParticleSysBone    = TreadFX06 AmphibWaveRest
    End
    ConditionState       = OVER_WATER MOVING
      ParticleSysBone    = TreadFX05 AmphibWave
      ParticleSysBone    = TreadFX06 AmphibWave
    End
  End

  Draw = W3DModelDraw ModuleTag_Dum_Turret

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Rogue ;№№№№№№№№№№№ [Убер "Мошенник"] №№№№№№№№№№№№№
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 8              ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RogueTankGun
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    Weapon = SECONDARY LeechMoneyStealingWeapon
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueMachineGunWeapon
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY RogueTankGunUpgradeOne
    Weapon = SECONDARY LeechMoneyStealingWeapon2
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueRPGWeapon
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY RogueTankGunUpgradeTwo
    Weapon = SECONDARY LeechMoneyStealingWeapon3
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueRPGWeapon2
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End

  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY RogueTankGun
    Weapon = SECONDARY LeechMoneyStealingWeapon
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueMachineGunWeapon
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE
    Weapon = PRIMARY RogueTankGunUpgradeOne
    Weapon = SECONDARY LeechMoneyStealingWeapon2
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueRPGWeapon
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO 
    Weapon = PRIMARY RogueTankGunUpgradeTwo
    Weapon = SECONDARY LeechMoneyStealingWeapon3
    PreferredAgainst = SECONDARY FS_SUPPLY_CENTER
    Weapon = TERTIARY RogueRPGWeapon2
    PreferredAgainst = TERTIARY AIRCRAFT INFANTRY
  End
  ArmorSet
    Conditions = None
    Armor      = RogueTankArmor
    DamageFX   = TankDamageFX
  End
  BuildCost = 2500 ;2800 ;3000 ;[6000]*    ;№№№№№№№ [;OBJECT:Rogue] №№№№№№№№ ВЫРЕЗАН !!!
  BuildTime = 35.0 ;40.0
 ;----------------------------------
  MaxSimultaneousOfType = 20 ;8 ;14
 ;----------------------------------
  VisionRange         = 400.0
  ShroudClearingRange = 500
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Prerequisites
;    Object = Slth_GLAArmsDealer
;    Object = Slth_GLAPalace
;    Science = SCIENCE_GLA_STEH_GENERAL
;    ;;Science = SCIENCE_Rank2
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  ExperienceValue  = 200 300 400 500 ;Experience point value at each level
  ExperienceRequired = 0 300 400 800 ;Experience points needed to gain each level
  IsTrainable = Yes                  ;Can gain experience
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLARogueCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = SaboteurVoiceSelect
  VoiceMove = SaboteurVoiceMove
  VoiceGuard = SaboteurVoiceMove
  VoiceAttack = SaboteurVoiceAttack
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  VoiceFear = SaboteurVoiceFear
  VoiceTaskComplete = NoSound
  UnitSpecificSounds
    VoiceCreate = SaboteurVoiceCreate
    VoiceSubdue = SaboteurVoiceMove
    VoiceGarrison = SaboteurVoiceMove
    VoiceEnter = SaboteurVoiceMove
    VoiceEnterHostile = SaboteurVoiceAttack
    VoiceGetHealed      = SaboteurVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS SALVAGER WEAPON_SALVAGER VEHICLE SCORE DISGUISER FS_FACTORY

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 1000.0 ;900.0
    InitialHealth   = 1000.0 ;900.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate       = 180 ;60   ; turn rate, in degrees per sec
      ControlledWeaponSlots= PRIMARY TERTIARY SECONDARY
    End
;    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS; defensive weapon
    MoodAttackCheckRate        = 250
  End

  Locomotor = SET_NORMAL Slth_GLARogueLocomotor TroopCrawlerWaterLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  Behavior = WeaponBonusUpgrade ModuleTag_170 ; Not a full weapon set switch, just a number tweak reflected in a weapon. 
    TriggeredBy = Upgrade_GLAAPBullets
  End 

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_0657
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_RogueDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = EjectPilotDie ModuleTag_st
    DeathTypes = ALL -CRUSHED -SPLATTED
    ExemptStatus = HIJACKED
    VeterancyLevels =  ALL -REGULAR ;only vet+ gives pilot
    GroundCreationList = OCL_Slth_EjectPilotOnGround
  End

  Behavior = CreateCrateDie ModuleTag_07
    CrateData = SalvageCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = ProductionUpdate ModuleTag_100
;    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = DefaultProductionExitUpdate ModuleTag_80
    UnitCreatePoint    = X: 1.025 Y: -0.157 Z: 0.00
    NaturalRallyPoint  = X: 1.025 Y: -0.157 Z: 0.00
  End

  Behavior           = OCLSpecialPower ModuleTag_0678
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    OCL                  = SUPERWEAPON_RadarVanScan
    CreateLocation       = CREATE_AT_LOCATION
    StartsPaused         = Yes ; Unpaused by upgrade module
  End

  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_0798
    SpecialPowerTemplate = SpecialPowerRadarVanScan
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  Behavior = WeaponSetUpgrade ModuleTag_2009
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = StealthDetectorUpdate ModuleTag_08AA ;+
    DetectionRate   = 900
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraForbiddenKindOf     = AIRCRAFT MINE DEMOTRAP VEHICLE TRANSPORT
  End

  Behavior = SpecialAbility ModuleTag_117
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_128
    SpecialPowerTemplate = SpecialAbilityDisguiseAsVehicle
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End
;================================================= ??? =====================
  Behavior = StealthUpdate ModuleTag_229
    StealthDelay                          = 1
    DisguisesAsTeam                       = Yes
    RevealDistanceFromTarget              = 100.0f
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    DisguiseFX                            = FX_BombTruckDisguise
    DisguiseRevealFX                      = FX_BombTruckDisguiseReveal
    InnateStealth                         = Yes
    DisguiseTransitionTime                = 100
    DisguiseRevealTransitionTime          = 100
  End
;--------------------------------------------------------;№№№№№№№№
  Behavior = StealthUpgrade ModuleTag_SUALMJ1 ;_22
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;-------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUALMJ2 ;_10
    StealthDelay               = 2500 ; msec
    StealthForbiddenConditions = MOVING ATTACKING USING_ABILITY TAKING_DAMAGE ;[НЕВИДИМ КОГДА НЕ ДВИГАЕТСЯ И НЕ СТРЕЛЯЕТ...]
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;--------------------------------------------------------;№№№№№№№№
;  Behavior = OverlordContain ModuleTag_OverlordContain
;    Slots                 = 1
;    DamagePercentToUnits  = 100%
;    AllowInsideKindOf     = PORTABLE_STRUCTURE
;    PassengersAllowedToFire = Yes
;    PayloadTemplateName        = Slth_GLARogueFireTurret
;    ExperienceSinkForRider = Yes ; I get the Exp for things my turret friend kills
;  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 14.0
  GeometryHeight = 14.0
  Scale = 1.02
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLARogueFireTurret

  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes

    AttachToBoneInAnotherModule = Dum_Turret 
    AttachToBoneInContainer = Dum_Turret 

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
;      IdleAnimation = UITech_SKL.UITech_STA 0 6
;      IdleAnimation = UITech_SKL.UITech_IDA
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
      WeaponMuzzleFlash = SECONDARY MuzzleFX01
      WeaponFireFXBone = SECONDARY Muzzle01
    End

    ConditionState = FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = PRIMARY MuzzleFX01
      WeaponFireFXBone = PRIMARY Muzzle01
      WeaponMuzzleFlash = SECONDARY MuzzleFX01
      WeaponFireFXBone = SECONDARY Muzzle01
    End

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
;      IdleAnimation = UITech_SKL.UITech_STA 0 6
;      IdleAnimation = UITech_SKL.UITech_IDA
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
      WeaponFireFXBone = SECONDARY Muzzle03
      WeaponLaunchBone = SECONDARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
      WeaponFireFXBone = SECONDARY Muzzle03
      WeaponLaunchBone = SECONDARY Muzzle03
    End

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
;      IdleAnimation = UITech_SKL.UITech_STA 0 6
;      IdleAnimation = UITech_SKL.UITech_IDA
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
      WeaponFireFXBone = SECONDARY Muzzle03
      WeaponLaunchBone = SECONDARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = PRIMARY Muzzle03
      WeaponLaunchBone = PRIMARY Muzzle03
      WeaponFireFXBone = SECONDARY Muzzle03
      WeaponLaunchBone = SECONDARY Muzzle03
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = GLA
  TransportSlotCount = 1
  
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY RogueMachineGunWeapon 
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    Weapon = SECONDARY RogueMachineGunWeaponAir
    PreferredAgainst = SECONDARY AIRCRAFT 
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY RogueRPGWeapon;TechnicalCannonWeapon
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    Weapon = SECONDARY RogueRPGWeaponAir
    PreferredAgainst = SECONDARY AIRCRAFT 
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY RogueRPGWeapon2;TechnicalCannonWeapon
    PreferredAgainst = PRIMARY VEHICLE INFANTRY
    Weapon = SECONDARY RogueRPGWeapon2Air
    PreferredAgainst = SECONDARY AIRCRAFT 
  End

  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Avenger with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
   TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CLICK_THROUGH IGNORED_IN_GUI SALVAGER WEAPON_SALVAGER
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_0579
    Turret
      TurretTurnRate = 240       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      MinIdleScanAngle = 30      ; in degrees off the natural turret angle
      MaxIdleScanAngle = 60      ; in degrees off the natural turret angle
      MinIdleScanInterval = 5000 ; in milliseconds
      MaxIdleScanInterval = 10000 ; in milliseconds
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior             = DestroyDie ModuleTag_05
    ;<No Data>
  End

  Behavior = WeaponBonusUpgrade ModuleTag_17 ; Not a full weapon set switch, just a number tweak reflected in a weapon. 
    TriggeredBy = Upgrade_GLAAPBullets
  End 

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Stlh_GLARogueFaker

  ; *** ART Parameters ***
  SelectPortrait         = TankRogue
  ButtonImage            = GLARogueFaker

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  UpgradeCameo2 = Upgrade_GLARadarVanScan

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = Dum_Turret 

    ConditionState = NONE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End


    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

; crate upgrade 2
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue
;      Animation           = UVRogue.UVRogue
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
;      Animation           = UVRogue_D.UVRogue_D
;      AnimationMode       = LOOP
      Turret = TURRET01
      TurretPitch = TURRETEL01
      HideSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2 LIGHT02
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

    ConditionState = WEAPONSET_PLAYER_UPGRADE
      Model = UVRogue
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

; crate upgrade 2
    ConditionState = WEAPONSET_PLAYER_UPGRADE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE REALLYDAMAGED WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    ConditionState = WEAPONSET_PLAYER_UPGRADE RUBBLE WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRogue_D
      Turret = TURRET01
      TurretPitch = TURRETEL01
      ShowSubObject = RADARUPGRADE RADARPIECE01 ECMRRET01 WEAPON2
      WeaponFireFXBone = PRIMARY WEAPONA01
      WeaponRecoilBone = PRIMARY BARREL
      WeaponMuzzleFlash = PRIMARY WEAPONA01
      WeaponLaunchBone = PRIMARY WEAPONA01
    End

    TrackMarks = EXTireTrack.tga
    
    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone = KOLESO05
    RightFrontTireBone = KOLESO03
    MidLeftFrontTireBone = KOLESO06
    MidRightFrontTireBone = KOLESO02
    LeftRearTireBone = KOLESO04
    RightRearTireBone = KOLESO01
    TireRotationMultiplier = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_upi

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = KORPUS

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model               = UVRogue_P
      Turret              = ECMRRET01
      TurretPitch         = TURRET01
      WeaponFireFXBone    = SECONDARY WEAPON2
      WeaponLaunchBone    = SECONDARY WEAPON2
    End

    ConditionState = REALLYDAMAGED RUBBLE
      Model               = UVRogue_PD
      Turret              = ECMRRET01
      TurretPitch         = TURRET01
      WeaponFireFXBone    = SECONDARY WEAPON2
      WeaponLaunchBone    = SECONDARY WEAPON2
    End
  End

  Draw = W3DModelDraw ModuleTag_0209

    OkToChangeModelColor        = Yes
    AttachToBoneInAnotherModule = Dum_Turret

    ; ------------------ basic technical ------------------------
    DefaultConditionState
      Model = UITech_SKN
      Turret = Dum-TurManMVR
      TurretArtAngle = 180  ; this turret has art pointed 180 degrees backward
      HideSubObject = 20Cal 50Cal RPG MuzzleFX01 MuzzleFX02 MuzzleFX03
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = MOVING
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ConditionState = TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End
    AliasConditionState = TURRET_ROTATE MOVING
    AliasConditionState = TURRET_ROTATE FIRING_A
    AliasConditionState = TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE RELOADING_A
    AliasConditionState = TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = TURRET_ROTATE MOVING RELOADING_A

    ConditionState = FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 20Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX01
      WeaponFireFXBone = TERTIARY Muzzle01
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    AliasConditionState = RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = MOVING FIRING_A
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_ONE ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX02
      WeaponFireFXBone = TERTIARY Muzzle02
      WeaponLaunchBone = TERTIARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX02
      WeaponFireFXBone = TERTIARY Muzzle02
      WeaponLaunchBone = TERTIARY Muzzle02
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_ONE
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX02
      WeaponFireFXBone = TERTIARY Muzzle02
      WeaponLaunchBone = TERTIARY Muzzle02
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX02
      WeaponFireFXBone = TERTIARY Muzzle02
      WeaponLaunchBone = TERTIARY Muzzle02
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_ONE FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = 50Cal
      WeaponMuzzleFlash = TERTIARY MuzzleFX02
      WeaponFireFXBone = TERTIARY Muzzle02
      WeaponLaunchBone = TERTIARY Muzzle02
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_ONE MOVING RELOADING_A

    ; ------------------ technical with WEAPONSET_CRATEUPGRADE_TWO ------------------------
    ConditionState = WEAPONSET_CRATEUPGRADE_TWO
      IdleAnimation = UITech_SKL.UITech_STA 0 6
      IdleAnimation = UITech_SKL.UITech_IDA
      IdleAnimation = UITech_SKL.UITech_IDB
      AnimationMode = ONCE
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO RUBBLE MOVING TURRET_ROTATE
      Animation = None
      HideSubObject = UITech-SKN
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = MOVING WEAPONSET_CRATEUPGRADE_TWO
      Animation = UITech_SKL.UITech_MVB
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE
      Animation = UITech_SKL.UITech_TNA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE RELOADING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO TURRET_ROTATE MOVING RELOADING_A

    ConditionState = WEAPONSET_CRATEUPGRADE_TWO FIRING_A 
      Animation = UITech_SKL.UITech_ATA
      AnimationMode = LOOP
      ShowSubObject = RPG
      WeaponFireFXBone = TERTIARY Muzzle03
      WeaponLaunchBone = TERTIARY Muzzle03
    End

    ; AliasConditionState is a new keyword that says,
    ; "give me another ConditionState exactly like the previous
    ; one, except with different conditions". Useful when you
    ; have several states that are the same with only different condition bits.
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO RELOADING_A

    ; these aliases handle the moving-between-shots case. (we can't actually move-and-fire at the same time.).
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING FIRING_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING BETWEEN_FIRING_SHOTS_A
    AliasConditionState = WEAPONSET_CRATEUPGRADE_TWO MOVING RELOADING_A

  End

  ; ***DESIGN parameters ***
  DisplayName           = OBJECT:Rogue
  Side                  = GLAStealthGeneral
  EditorSorting         = VEHICLE
  TransportSlotCount    = 6               ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY SuicideWeapon 
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY SuicideWeapon 
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO
    Weapon = PRIMARY SuicideWeapon 
  End
  ArmorSet
    Conditions      = None
    Armor           = Slth_TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 400
  BuildTime       = 5.0          ;in seconds
  VisionRange     = 300
  ShroudClearingRange = 400
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level
  IsTrainable = No
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet           = Slth_GLARogueFakeCommandSet

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE SALVAGER WEAPON_SALVAGER FS_FAKE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = No ATTACK_BUILDINGS
  End
  Locomotor = SET_NORMAL TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End
  Behavior = AutoHealBehavior ModuleTag_05
    HealingAmount = 2
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_0668
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 1000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_RogueDeathEffect
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_07
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_bomb1
    DeathWeapon   = BombTruckDefaultBombDamage
    StartsActive  = Yes                  
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_bomb2
    DeathWeapon   = BombTruckDefaultBombEffect
    StartsActive  = Yes                     
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = ProductionUpdate ModuleTag_100
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Behavior = WeaponSetUpgrade ModuleTag_2009
    TriggeredBy = Upgrade_GLARadarVanScan
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 14.0
  GeometryHeight = 14.0
  Scale = 1.05
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length
  ShadowTexture = fake_supply; this is not really a shadow, it's used for decal to indicate fake structure.
End


;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
Object Slth_KassadAntiTankCannon ;[Slth_GLADefenseSiteAntiTankCannon]*

  ; *** ART Parameters ***
  SelectPortrait         = SUDSAntiTank_L
  ButtonImage            = SUDSAntiTank_L

  ;UpgradeCameo1 = Upgrade_GLAToxinShells
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE

    ConditionState = RELOADING_A
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVBS1.UVBS1
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;******************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:DefenseSiteAntiTank ;№№№№№№№№ Противотанковая Пушка - СРАЗУ №№№№ ОБОРОНКА
  Side          = GLAStealthGeneral ;GLA
  EditorSorting = STRUCTURE
  Prerequisites
    Object  = Slth_GLABarracks
  End
  BuildCost = 1100 ;1050
  BuildTime = 20.0
  EnergyProduction = 0
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DefenseSiteTankGun
    PreferredAgainst = PRIMARY VEHICLE
  End
  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End
  VisionRange         = 350.0
  ShroudClearingRange = 350
  ExperienceValue     = 60 80 106 142
  ExperienceRequired  = 0 180 240 319
  IsTrainable         = Yes

  CommandSet = Slth_UpgradedDefeseSiteCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect          = StingerSiteSelect
  SoundOnDamaged       = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn       = StealthOn
  SoundStealthOff      = StealthOff
  UnitSpecificSounds
    UnderConstruction  = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
  End
;===================================================
  Behavior = RebuildHoleExposeDie ModuleTag_4568
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
;===================================================
  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior        = RebuildHoleExposeDie ModuleTag_1238
;    HoleName      = GLAHoleStingerSite
;    HoleMaxHealth = 400.0
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate = 90
      AllowsPitch    = No
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 
;========================================================================
  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;========================================================================
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Slth_GLAStingerSite 

  ; *** ART Parameters ***
  SelectPortrait         = SUDefenseSite_L
  ButtonImage            = SUDefenseSite

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02
    End
    AliasConditionState = REALLYDAMAGED NIGHT  RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02
    End
    AliasConditionState = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02
    End
    AliasConditionState = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02
    End
    AliasConditionState = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;*******************************************
    ConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSite ;№№№№№№№№№№№№№["Пустышка" - Площадка-Оборонки:2в1]№№№№№№№№№№№№№№
  Side                = GLA
  EditorSorting       = STRUCTURE
;------------------------------------
  BuildCost           = 500
  BuildTime           = 10.0
;------------------------------------
  EnergyProduction    = 0
  VisionRange         = 150.0
  ShroudClearingRange = 150
  Prerequisites
    Object  = Slth_GLABarracks
  End
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None 
  End
  ArmorSet
    Conditions  = None
    Armor       = BaseDefenseArmor
    DamageFX    = StructureDamageFXNoShake
  End
  ExperienceValue = 150 150 150 150
;--------------------------------------------
  CommandSet = Slth_GLADefenseSiteCommandSet
;--------------------------------------------

  ; *** AUDIO Parameters ***
  VoiceSelect           = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE IMMOBILE FS_BASE_DEFENSE SALVAGER CAN_ATTACK

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End
;==============================================================================
  Behavior        = RebuildHoleExposeDie ModuleTag_458 ;;№№№№№№№№№№ ОБОРОНКА
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
;==============================================================================
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = ProductionUpdate ModuleTag_15
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;============================================================================================================================
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon01
    ReplaceObject = Slth_GLADefenseSiteQuadCannon ;<======================================[Позиция ПВО]
    TriggeredBy = Upgrade_ChinaOverlordGattlingCannon;Upgrade_GLADefenseSiteQuadCannon
  End
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon02
    ReplaceObject = Slth_GLADefenseSiteAntiTankCannon ;<==================================[Противотанковая Позиция]
    TriggeredBy = Upgrade_ChinaOverlordPropagandaTower;Upgrade_GLADefenseSiteTankCannon
  End
  Behavior = ReplaceObjectUpgrade ModuleTag_Addon03
    ReplaceObject = Slth_GLADefenseSiteArtilleryCannon ;<=================================[Артиллерийская Позиция]
    TriggeredBy = Upgrade_ChinaOverlordBattleBunker;Upgrade_GLADefenseSiteArtilleryCannon
  End
;============================================================================================================================
  Behavior = AIUpdateInterface ModuleTag_AI
    AutoAcquireEnemiesWhenIdle = No
  End

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  ;Behavior = StealthUpgrade ModuleTag_20
   ; TriggeredBy = Upgrade_GLACamoNetting
 ; End
;------------------------ДОБАВИЛ------------------------
  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Slth_GLADefenseSiteQuadCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUDSQuad_L
  ButtonImage            = SUDSQuad_L

  UpgradeCameo1 = Upgrade_GLAAPBullets
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  Draw = W3DModelDraw ModuleTag_Draw04

    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED 
    AliasConditionState = REALLYDAMAGED 
    AliasConditionState = RUBBLE
    AliasConditionState = SNOW DAMAGED 
    AliasConditionState = SNOW REALLYDAMAGED 
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT DAMAGED 
    AliasConditionState = NIGHT REALLYDAMAGED 
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = NIGHT SNOW DAMAGED 
    AliasConditionState = NIGHT SNOW REALLYDAMAGED 
    AliasConditionState = NIGHT SNOW RUBBLE

    ConditionState = USING_WEAPON_B
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
    End
    AliasConditionState = USING_WEAPON_B SNOW
    AliasConditionState = USING_WEAPON_B NIGHT
    AliasConditionState = USING_WEAPON_B SNOW NIGHT
    AliasConditionState = DAMAGED USING_WEAPON_B
    AliasConditionState = REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = RUBBLE USING_WEAPON_B
    AliasConditionState = SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = SNOW RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW RUBBLE USING_WEAPON_B

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVStinger_QC
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************88
  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteQuad
  Side                = GLA
  EditorSorting       = STRUCTURE

  BuildCost           = 1300
  BuildTime           = 26.0
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions       = None 
    Weapon = PRIMARY DefenseSiteQuadCannonGun
    Weapon = SECONDARY DefenseSiteQuadCannonGunAir
    PreferredAgainst = SECONDARY AIRCRAFT
  End

  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End

  CommandSet   = Slth_UpgradedDefeseSiteCommandSet

  ExperienceValue     = 79 106 140 188
  ExperienceRequired  = 0  238 317 421
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_23428
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = WeaponBonusUpgrade ModuleTag_WP1
    TriggeredBy = Upgrade_GLAAPBullets
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_4568
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 280 ;270  ;<===============[СКОРОСТЬ ПОВОРОТА БАШНИ и ОРУДИЯ]
      TurretPitchRate     = 280 ;270
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 0
      MinPhysicalPitch    = -20
      MinIdleScanInterval = 4000
      MaxIdleScanInterval = 8000
      MinIdleScanAngle    = 0
      MaxIdleScanAngle    = 360
      RecenterTime = 25000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate     = 500
    DetectionRange   =  175
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;-------------------------------------------------------------
Object Slth_GLADefenseSiteAntiTankCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUDSAntiTank_L
  ButtonImage            = SUDSAntiTank_L

  ;UpgradeCameo1 = Upgrade_GLAToxinShells
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  ; *** ART Parameters ***
  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE

    ConditionState = RELOADING_A
      Model = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVBS1.UVBS1
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVBS1
      Turret = TURRET01
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;******************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteAntiTank
  Side                = GLAStealthGeneral ;GLA
  EditorSorting       = STRUCTURE

  BuildCost           = 1050
  BuildTime           = 21.0
  EnergyProduction    = 0
  VisionRange         = 350.0
  ShroudClearingRange = 350
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DefenseSiteTankGun
    PreferredAgainst = PRIMARY VEHICLE
  End
  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End
  CommandSet = Slth_UpgradedDefeseSiteCommandSet
  ExperienceValue    = 60 80 106 142
  ExperienceRequired = 0  180 240 319
  IsTrainable        = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect = StingerSiteSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
  End

  Behavior = RebuildHoleExposeDie ModuleTag_4568
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_1238
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = AIUpdateInterface ModuleTag_AI
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate = 90
      AllowsPitch    = No
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------
Object Slth_GLADefenseSiteArtilleryCannon

  ; *** ART Parameters ***
  SelectPortrait         = SUDSArtillery_L
  ButtonImage            = SUDSArtillery_L

 ; UpgradeCameo1 = Upgrade_GLAToxinShells
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState = RELOADING_A
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVD30.UVD30
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteArtillery
  Side                = GLAStealthGeneral ;GLA
  EditorSorting       = STRUCTURE

  BuildCost           = 1700
  BuildTime           = 34.0
  EnergyProduction    = 0
  VisionRange         = 350
  ShroudClearingRange = 350

  WeaponSet
    Conditions     = None 
    Weapon         = PRIMARY ALMajArtilCannonGun ;FireBaseHowitzerGunGla
  End

  ArmorSet
    Conditions        = None
    Armor             = BaseDefenseArmor
    DamageFX          = StructureDamageFXNoShake
  End

  CommandSet = Slth_UpgradedDefeseSiteCommandSet

  ExperienceValue     = 101 134 178 238
  ExperienceRequired  = 0 302 402 535
  IsTrainable         = Yes

  ; *** AUDIO Parameters ***
  VoiceSelect         = StingerSiteSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority        = STRUCTURE
  KindOf               = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body                 = StructureBody ModuleTag_04
    MaxHealth          = 900.0
    InitialHealth      = 900.0
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_658
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior        = RebuildHoleExposeDie ModuleTag_65658
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
  Behavior        = DestroyDie ModuleTag_09
  End
  Behavior        = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior        = FXListDie ModuleTag_11
    DeathFX       = FX_StructureSmallDeath
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 60
      AllowsPitch           = No
      ControlledWeaponSlots = PRIMARY
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End


;=======================================================================
Object Slth_GLAVehicleBikeAlQuedaElite5

  ; *** ART Parameters ***
  SelectPortrait         = fd2
  ButtonImage            = fd2

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model = None
    End
  End

;****DESIGN parameters **************************

  DisplayName   = OBJECT:Slth_BikeSquadAlQuedaElite5 ;OBJECT:BikeSquad ;№№№№№№№№№№№
  Side          = GLAStealthGeneral
  RadarPriority = NOT_ON_RADAR
  EditorSorting = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY   GLAAngryMobNexusHarmlessWeapon
    Weapon = SECONDARY GLAAngryMobNexusHarmlessWeapon
    Weapon = TERTIARY  GLAAngryMobNexusHarmlessWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = InvulnerableAllArmor
    DamageFX   = None
  End
  Prerequisites
    Object = Slth_GLASalvageStation
    Object = Slth_GLAPalace
    ;Science = SCIENCE_Rank2
  End
  BuildCost = 2000 ;2500 ;;800
  BuildTime = 20.0 ;;12.0             ;in seconds
  VisionRange         = 200.0 ;150.0  ;it can scout for the spawn
  ShroudClearingRange = 300 ;0
 ;----------------------------------
  MaxSimultaneousOfType = 4 ;20 ;8
 ;----------------------------------
  ExperienceValue = 5 5 5 5 ;Experience point value at each level
  IsTrainable = Yes
  CommandSet = Slth_GLAInfantryAngryMobCommandSet

;**** ENGINEERING Parameters ******************************

  RadarPriority = UNIT
  KindOf = PRELOAD CAN_ATTACK VEHICLE MOB_NEXUS ATTACK_NEEDS_LINE_OF_SIGHT NO_COLLIDE SELECTABLE SCORE
  Body = ImmortalBody ModuleTag_02
    MaxHealth     = 99999.0
    InitialHealth = 99999.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Locomotor = SET_NORMAL AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_WANDER AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!
  Locomotor = SET_PANIC  AngryMobNexusLocomotor ;Important! don't make the Nexus any faster!

  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End

  Behavior = SpawnBehavior ModuleTag_05
    SpawnNumber       = 5
    SpawnReplaceDelay = 9999999 ;None!
        SpawnTemplateName = Slth_GLAVehicleCombatBikeAlQuedaElite
        SpawnTemplateName = Slth_GLAVehicleCombatBikeAlQuedaElite
        SpawnTemplateName = Slth_GLAVehicleCombatBikeAlQuedaElite
        SpawnTemplateName = Slth_GLAVehicleCombatBikeAlQuedaElite
        SpawnTemplateName = Slth_GLAVehicleCombatBikeAlQuedaElite
    ExitByBudding = Yes;!

    InitialBurst = 5 ; the first set of 5 will not delay
    OneShot     = No
    AggregateHealth = Yes
    SlavesHaveFreeWill = Yes
  End

  Behavior = QueueProductionExitUpdate ModuleTag_06
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 0.0  Y:  0.0   Z:0.0
    ExitDelay     = 5000 ; 5 sec
    InitialBurst = 5 ; the first set of 5 will not delay
  End

  Behavior = DestroyDie ModuleTag_07
    DeathTypes = ALL
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 1.0
  GeometryMinorRadius = 1.0
  GeometryHeight = 1.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME

End


;-------------------------------------------------------------------------------
Object Slth_GLAVehicleCombatBikeAlQuedaElite ;[Slth_GLAVehicleCombatBikeRebel]*

  ; *** ART Parameters ***
  SelectPortrait = SUComBike2_L
  ButtonImage    = SUComBike2
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair

  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
  ;=====================================================
    ;Normal Bike
  ;=====================================================
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight

      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)

    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING
    AliasConditionState RIDER7
    AliasConditionState RIDER7 MOVING
    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED
    AliasConditionState RIDER7 REALLYDAMAGED
    AliasConditionState RIDER7 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED
    AliasConditionState RIDER7 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED
    AliasConditionState RIDER7 MOVING RIGHT_TO_CENTER REALLYDAMAGED


  ;================================================================================================
   ;Gun Bike ;[ВАРИАБИЛЬНОСТЬ АНИМАЦИЙ ОРУЖИЯ В ЗАВИСИМОСТИ ОТ ТОГО КАКОЙ ВОДИЛА СЕЛ НА МОТЫК ??]:
   ;[Нафиг: не стал ничё тут трогать, попробуем так потестить, если будет норм, то и фиг с ним...]
  ;================================================================================================
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

 ;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Draw = W3DModelDraw ModuleTag_Rider01 ;[УДАЛИЛ ВСЕХ КРОМЕ RPG-эшника]
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UITunF_SKN2 ;;;[UIWrkr_SKN]* ;<==================[Заменил Модель РАБочего на Модель RPG-шника]№№№№№
      ;WeaponFireFXBone  = PRIMARY Muzzle
      ;WeaponLaunchBone  = PRIMARY Muzzle
      WeaponMuzzleFlash = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2   ;<=================================[ Модель RPG-шника] №№№№№№№№№№
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

  ;======================================================
    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING

  End
 ;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№


  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:Slth_BikeSquadAlQuedaElite5 ;OBJECT:CombatBike ;№№№№№№№№№№№
  Side               = GLAStealthGeneral ;GLA
  EditorSorting      = VEHICLE
  TransportSlotCount = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY GLARebelBikerMachineGun
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions = None
    Armor      = CombatBikeArmor ;We can't have the game crashing because this vehicle doesn't technically have a pilot.
    DamageFX   = TankDamageFX
  End
  BuildCost    = 500
  BuildTime    = 6.0          ;in seconds    
  VisionRange         = 200.0 ;180.0
  ShroudClearingRange = 300

  ExperienceValue    = 5 5 5 5 ;[Было: 50 50 100 150]* ;Experience point value at each level
  ExperienceRequired = 0 40 60 120 ;[Было: 0 200 400 800]* ;Experience points needed to gain each level
  IsTrainable    = Yes                ;Can gain experience
  ;CrusherLevel  = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GLAVehicleCombatBikeDefaultCommandSet ;GLAVehicleCombatBikeCommandSet ;****COMMANDSET is overwritten in RiderChangeContain!

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
;=========== ВИД КРУШЕНИЯ(Оставил только RPG-шника) =============
  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER3 ;;[STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7]*
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
 ;-------------------------------------------------------------
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 1
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End

  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
;=========================================================================================================================
  Behavior = RiderChangeContain ModuleTag_16 ;№№№№№№№№№№№
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
;---------------------------------------------------------------------------------------------------------------------------
;;Rider1 = GLAInfantryWorker         RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;[Rider2 = Slth_GLAInfantryRebel     RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL]*
;---------------------------------------------------------------------------------------------------------------------------
  Rider2 = Slth_GLAInfantryAlQuedaElite RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;---------------------------------------------------------------------------------------------------------------------------
;;Rider3 = GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL 
;---------------------------------------------------------------------------------------------------------------------------
;;Rider4 = GLAInfantryJarmenKell     RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
;;Rider5 = GLAInfantryTerrorist      RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
;;Rider6 = GLAInfantryHijacker       RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
;;Rider7 = GLAInfantrySaboteur       RIDER7 WEAPON_RIDER7 STATUS_RIDER7 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
    ScuttleDelay  = 1500
    ScuttleStatus = TOPPLED
 ;-----------------------------------
   ;Standard TransportContain stuff
 ;--------------------------------------------------------------------------------------------------------------------------
    Slots                 = 2
    InitialPayload        = Slth_GLAInfantryAlQuedaElite 1 ;[Slth_GLAInfantryRebel 1]* ;№№№№№№№ [Водила мотыка] №№№№№№
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 0
    DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
    BurnedDeathToUnits    = No    ; And no Burned death.
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    DoorOpenTime = 0
  End
;=========================================================================================================================
  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = SuicideBikeBomb
    StartsActive   = Yes
    DeathTypes     = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
  End
;---------------------------------------- Стелс ----------
;  Behavior = StealthUpdate ModuleTag_19
;    UseRiderStealth             = Yes
;    ;StealthDelay               = 2000 ; msec
;    ;StealthForbiddenConditions = ATTACKING
;    ;InnateStealth              = Yes
;    ;OrderIdleEnemiesToAttackMeUponReveal  = Yes
;  End
;---------------------------------------- Стелс ----------
  Behavior = StealthUpdate ModuleTag_19 ;[_06]*
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = ATTACKING
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyJarmenKellDetected
    OwnDetectionEvaEvent        = OwnJarmenKellDetected
  End
;---------------------------------------------------------
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000     ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3    ; taking this much damage...
    AflameDamageDelay = 500   ; this often.
  End

  Behavior = FXListDie ModuleDieSoundTag_22
    DeathTypes = ALL -TOPPLED ; Not if we are "dying" by being abandoned by our human.  Nobody left to scream
    DeathFX = FX_CombatCycleDie
  End
  Behavior = FXListDie ModuleDieSoundTag_23
    DeathTypes = NONE +TOPPLED
    DeathFX = FX_CombatCycleDieNoScream
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
; This is commented out per hotlist request 10/9 ML
;------------------------------------------------------------
;№№№№№ [После крушения мотоцикла остаётся пехотинец]: №№№№№№
;------------------------------------------------------------
  Behavior = CreateObjectDie ModuleTag_24 ;[ModuleTag_15]*
    DeathTypes = ALL -CRUSHED -SPLATTED
    CreationList = Slth_OCL_GLAAlQuedaEliteDebris01 ;<====[Ссыль на Боевика Кассада появляющегося в случае крушения мотыка]
    ExemptStatus = HIJACKED
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleBattleBus

  ; *** ART Parameters ***
  SelectPortrait = БасСтелса
  ButtonImage    = БасСтелса

  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair
  UpgradeCameo3 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01
    ExtraPublicBone = BUSUP02
    ExtraPublicBone = Zapaska

    DefaultConditionState
      Model         = UVRIDER
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState  = REALLYDAMAGED
      Model         = UVRIDER_d
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState  = RUBBLE
      Model         = UVRIDER_d
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End

    ConditionState = SECOND_LIFE ; Set after our first death, natch
      Model         = UVRIDER_d1
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE
    AliasConditionState = RUBBLE SECOND_LIFE

; ------------ With big arm
     ConditionState = ARMORSET_CRATEUPGRADE_ONE
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d1
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE

; ------------ With big turret  
     ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

; ------------ With big turret and arm 
     ConditionState = ARMORSET_CRATEUPGRADE_TWO ; two crates is a turret switch
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d1
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO 
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO

; ------------ With big turret and arm 2
     ConditionState = ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO ; two crates is a turret switch
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    OkToChangeModelColor        = Yes
    TrackMarks                  = EXTireTrack.tga
    Dust                        = TechnicalDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Slth_BattleBus1 ;[Стелс-Фургон боевиков Аль-Каиды]№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
  Side          = GLAStealthGeneral
  EditorSorting = VEHICLE
  TransportSlotCount = 6  ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon     = PRIMARY  TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE 
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO 
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = BattleBusTruckArmor
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = SECOND_LIFE ; Set after our first death, natch
    Armor      = BattleBusStructureArmorTough
    DamageFX   = StructureDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_ONE
    Armor      = BattleBusTruckArmorPlusOne
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_ONE SECOND_LIFE ;Set after our first death, natch
    Armor      = BattleBusStructureArmorToughPlusOne
    DamageFX   = StructureDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_TWO
    Armor      = BattleBusTruckArmorPlusTwo
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_TWO SECOND_LIFE ;Set after our first death, natch
    Armor      = BattleBusStructureArmorToughPlusTwo
    DamageFX   = StructureDamageFX
  End
  Prerequisites
    Object = Slth_GLAArmsDealer
    Object = Slth_GLAPalace
  End
;-------------------------------------------------
  BuildCost = 1250 ;2600 ;[в PR 9.0 было: 1150]*
  BuildTime = 18.0 ;28.0 ;[в PR 9.0 было: 15.0]*
;-------------------------------------------------
  VisionRange         = 150.0 ;Used in attack move targeting
  ShroudClearingRange = 200
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAVehicleBattleBusAlQueda7CommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BattleBusVoiceSelect
  VoiceMove = BattleBusVoiceMove
  VoiceGuard = BattleBusVoiceMove
  VoiceAttack = BattleBusVoiceAttack
  SoundMoveStart = BattleBusMoveStart
  SoundMoveStartDamaged = BattleBusMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleBusVoiceCreate
    TurretMoveStart      = NoSound
    TurretMoveLoop       = NoSound
    TruckLandingSound    = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceUnload          = BattleBusVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER ARMOR_SALVAGER WEAPON_SALVAGER SCORE FS_FACTORY DISGUISER TRANSPORT
;--------------------------------------------------------------------------------------------------------------------------------------------------
 Body = ActiveBody ModuleTag_02
    MaxHealth       = 675
    InitialHealth   = 675

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 750
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
;----------------------------------------------------------------------
  IsTrainable = No
  ExperienceValue = 50 50 50 50  ;Experience point value at each level
;----------------------------------------------------------------------
  Behavior = TransportAIUpdate ModuleTag_05ty
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End
  Behavior = WeaponBonusUpgrade ModuleTag_17h6 ; Not a full weapon set switch, just a number tweak reflected in a weapon. 
    TriggeredBy = Upgrade_GLAAPBullets
  End 
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 7
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
;-------------------------------------------
  Locomotor = SET_NORMAL BattleBusLocomotor
;-------------------------------------------
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED -EXTRA_4
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BattleBusDeath
  End
  Behavior = ProductionUpdate ModuleTag_49
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = StealthUpdate ModuleTag_100112 ;[ЮНИТ НЕВИДИМЫЙ СРАЗУ ПРИ СОЗДАНИИ = НЕ ТРЕБУЕТ АПГРЕЙДА НА КАМУФЛЯЖ]
;    StealthDelay                = 3000 ;2500 ;msec(1000 = 1секунда,соответственно 3000 = 3секунды);<===[Время входа в режим невидимости]
;    StealthForbiddenConditions  = RIDERS_ATTACKING USING_ABILITY TAKING_DAMAGE
;    MoveThresholdSpeed          = 3
;    InnateStealth               = Yes ;doesnt Require upgrade first
;    OrderIdleEnemiesToAttackMeUponReveal  = Yes
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;========================================================================================================================================
  Behavior = StealthUpdate ModuleTag_SUFBA1 ;[ЭТОТ ВИД СТЕЛСА ДАЕТСЯ ПОСЛЕ АПГРЕЙДА]
    StealthDelay               = 3000 ;2500 ;msec(1000 = 1 секунда, соответственно 3000 = 3 секунды);<===[Время входа в режим невидимости]
    StealthForbiddenConditions = RIDERS_ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed         = 3
    InnateStealth              = No ;Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End
;------------------------------------------------
  Behavior = StealthUpgrade ModuleTag_SUFBA2
    TriggeredBy = Upgrade_GLACamouflageVehicle
  End
;========================================================================================================================================
  Behavior = TransportContain  ModuleTag_10 ;[ПУСТОЙ ФУРГОН ВМЕЩАЮЩИЙ ДО 7 ПЕХОТИНЦЕВ]
    PassengersAllowedToFire = Yes
    Slots = 7 ;6 ;[в PR9.0 было: 7]* ;<================[Сколько может вместить пехоты]
    DamagePercentToUnits = 100%
    AllowInsideKindOf  = INFANTRY
    ExitDelay = 250
    NumberOfExitPaths = 5 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    WeaponBonusPassedToPassengers = Yes
    DelayExitInAir = Yes
    ArmedRidersUpgradeMyWeaponSet = Yes
  End
;=============================================================================================================
  ;A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
  End
  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000      ;If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3     ;taking this much damage...
    AflameDamageDelay = 500    ;this often.
  End
  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior ModuleTag_30 ;Empty Hulk sinking away
    DeathTypes = NONE +EXTRA_4
    SinkDelay = 1
    SinkRate = 2.5
    DestructionDelay = 5000
  End
  Behavior = TransitionDamageFX ModuleTag_31
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Scale = 1.03
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_GLAVehicleBattleBus2 ;[Slth_GLAVehicleBattleBus]*

  ; *** ART Parameters ***
  SelectPortrait = БасСтелса
  ButtonImage    = БасСтелса

  UpgradeCameo1 = Upgrade_GLAAPBullets
  UpgradeCameo2 = Upgrade_GLAJunkRepair

  Draw = W3DTruckDraw ModuleTag_01
    ExtraPublicBone = BUSUP02
    ExtraPublicBone = Zapaska

    DefaultConditionState
      Model         = UVRIDER
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState  = REALLYDAMAGED
      Model         = UVRIDER_d
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    ConditionState  = RUBBLE
      Model         = UVRIDER_d
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End

    ConditionState = SECOND_LIFE ; Set after our first death, natch
      Model         = UVRIDER_d1
      ShowSubObject = BARREL01
      HideSubObject = TURRETELUPH BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelFX
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE
    AliasConditionState = RUBBLE SECOND_LIFE

; ------------ With big arm
     ConditionState = ARMORSET_CRATEUPGRADE_ONE
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d1
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_ONE

; ------------ With big turret  
     ConditionState = WEAPONSET_CRATEUPGRADE_ONE
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = TURRETELUPH
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE WEAPONSET_CRATEUPGRADE_ONE
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH
      HideSubObject = BARREL01 BARRELFX01 BUSUP02 Zapaska
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

; ------------ With big turret and arm 
     ConditionState = ARMORSET_CRATEUPGRADE_TWO ; two crates is a turret switch
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d1
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End
    AliasConditionState = REALLYDAMAGED SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO 
    AliasConditionState = RUBBLE SECOND_LIFE ARMORSET_CRATEUPGRADE_TWO

; ------------ With big turret and arm 2
     ConditionState = ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO ; two crates is a turret switch
      Model         = UVRIDER
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = REALLYDAMAGED ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    ConditionState = RUBBLE ARMORSET_CRATEUPGRADE_TWO WEAPONSET_CRATEUPGRADE_TWO
      Model = UVRIDER_d
      ShowSubObject = TURRETELUPH Zapaska BUSUP02
      HideSubObject = BARREL01 BARRELFX01
      Turret            = Turret01
      WeaponFireFXBone  = PRIMARY BarrelMS
      WeaponMuzzleFlash = PRIMARY BarrelMS
    End

    OkToChangeModelColor        = Yes
    TrackMarks                  = EXTireTrack.tga
    Dust                        = TechnicalDust
    DirtSpray                   = RocketBuggyDirtSpray
    PowerslideSpray             = RocketBuggyDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    LeftRearTireBone            = Tire03
    RightRearTireBone           = Tire04
    TireRotationMultiplier      = 0.2        ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5    ; This speed is added to the rotation speed when powersliding.
  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Slth_BattleBus2 ;№№№№№№ Фургон Боевиков Кассада №№№№№
  Side          = GLAStealthGeneral
  EditorSorting = VEHICLE
  TransportSlotCount = 6  ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_ONE 
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = CRATEUPGRADE_TWO 
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon     = PRIMARY  TechnicalMachineGunWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_ONE 
    Weapon = PRIMARY TechnicalCannonWeapon
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE CRATEUPGRADE_TWO 
    Weapon = PRIMARY TechnicalRPGWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = BattleBusTruckArmor
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = SECOND_LIFE ; Set after our first death, natch
    Armor      = BattleBusStructureArmorTough
    DamageFX   = StructureDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_ONE
    Armor      = BattleBusTruckArmorPlusOne
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_ONE SECOND_LIFE ; Set after our first death, natch
    Armor      = BattleBusStructureArmorToughPlusOne
    DamageFX   = StructureDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_TWO
    Armor      = BattleBusTruckArmorPlusTwo
    DamageFX   = TruckDamageFX
  End
  ArmorSet
    Conditions = CRATE_UPGRADE_TWO SECOND_LIFE ; Set after our first death, natch
    Armor      = BattleBusStructureArmorToughPlusTwo
    DamageFX   = StructureDamageFX
  End
 ;---------------------------------------№№№№№№№№№№№[ OBJECT:Slth_BattleBus2 ] ФУРГОН БОЕВИКОВ КАССАДА №№№№№№№№№№№№№№№№
  Prerequisites
    Object = Slth_GLASalvageStation
    Science = SCIENCE_Rank3
    ;;Object = Slth_GLAPalace
  End
  BuildCost = 5000 ;[PR9.1.18: 6000] ;[PR9.1.1: 4500]
  BuildTime = 30.0 ;[PR9.1.18: 40.0] ;[PR9.1.1: 50.0]
 ;-----------------------------------------------------------
  MaxSimultaneousOfType = 12 ;[в PR9.1.18 было: 20] ;[12]**
 ;-----------------------------------------------------------
  VisionRange         = 150.0 ;Used in attack move targeting
  ShroudClearingRange = 200
  CrusherLevel   = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = HGLAVehicleTechnicalCommandSet


  ; *** AUDIO Parameters ***
  VoiceSelect = BattleBusVoiceSelect
  VoiceMove = BattleBusVoiceMove
  VoiceGuard = BattleBusVoiceMove
  VoiceAttack = BattleBusVoiceAttack
  SoundMoveStart = BattleBusMoveStart
  SoundMoveStartDamaged = BattleBusMoveStart
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = BattleBusVoiceCreate
    TurretMoveStart      = NoSound
    TurretMoveLoop       = NoSound
    TruckLandingSound    = RocketBuggyLand
    TruckPowerslideSound = RocketBuggyPowerslide
    VoiceUnload          = BattleBusVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SALVAGER ARMOR_SALVAGER WEAPON_SALVAGER SCORE FS_FACTORY DISGUISER TRANSPORT
 ;----------------------------------
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 675
    InitialHealth   = 675

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 750
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
 ;------------------------------
  IsTrainable = No
 ;------------------------------
  ExperienceValue = 50 50 50 50  ; Experience point value at each level
;---------------------------------------------------------------------------------
  Behavior = TransportAIUpdate ModuleTag_05ty
    Turret
      TurretTurnRate = 180
      RecenterTime = 5000   ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 40.0
  End
  Behavior = WeaponBonusUpgrade ModuleTag_17h6 ; Not a full weapon set switch, just a number tweak reflected in a weapon. 
    TriggeredBy = Upgrade_GLAAPBullets
  End 
  Behavior = AutoHealBehavior ModuleTag_06
    HealingAmount = 7
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
;-----------------------------------------------------
  Locomotor = SET_NORMAL BattleBusLocomotor
;-----------------------------------------------------
   Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED -EXTRA_4
    FX = FINAL FX_BuggyNewDeathExplosion
    OCL = FINAL OCL_BattleBusDeath
  End
  Behavior = ProductionUpdate ModuleTag_49
  End
;=============================================================================================================
  Behavior = StealthUpdate ModuleTag_100112
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = RIDERS_ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;=============================================================================================================
;  Behavior = TransportContain  ModuleTag_10
;    PassengersAllowedToFire = Yes
;    Slots                   = 6 ;[7]*
;    DamagePercentToUnits    = 100%
;    AllowInsideKindOf       = INFANTRY
;    ExitDelay               = 250
;  ;-----------------------------------------------------------------------------------------------------------
;    NumberOfExitPaths = 5
;   ;[Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn]
;  ;-----------------------------------------------------------------------------------------------------------
;    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
;    WeaponBonusPassedToPassengers = Yes
;    DelayExitInAir = Yes
;    ArmedRidersUpgradeMyWeaponSet = Yes
;  End
;=============================================================================================================
  Behavior = TransportContain ModuleTag_SBBTCAQE
    PassengersAllowedToFire = Yes ;<=======[Может ли пехота стрелять из окна]№№№№№№№№№
    Slots                = 6
    InitialPayload       = Slth_GLAInfantryAlQuedaElite 6
    ScatterNearbyOnExit  = Yes  ;<=======[Рассейтесь поблизости на выходе]№№№№№№№№№
    HealthRegen%PerSec   = 10   ;<=======[Восстановление здоровья % в секунду]№№№№№№№№№
    DamagePercentToUnits = 100% ;<=======[Процент повреждения получаемое пехотинцами сидящими внутри Фургона ??]
    AllowInsideKindOf    = INFANTRY
    ExitDelay            = 250 ;<========[Время выхода пехоты]№№№№№№№№№
  ;-----------------------------------------------------------------------------------------------------------
    NumberOfExitPaths = 5 ;3 ;<==========[Количество выходных путей]№№№№№№№№№
   ;[Defaults to 1. Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn]
  ;-----------------------------------------------------------------------------------------------------------
    GoAggressiveOnExit = Yes ;[Пехота начинает вести себя агрессивно сразу после выхода из Фургона ??]№№№№№№№№№
  ;AI Will tell people to set their mood to Aggressive on exiting
  ;---------------------------------------------------------
    WeaponBonusPassedToPassengers = Yes ;№№№№№№№№№[ВПИЛ-ТЭСТ][WeaponBonus Засчитан Пассажирам = Да]№№№№№№№№№
    DelayExitInAir = Yes                ;№№№№№№№№№[ВПИЛ-ТЭСТ][Задержка выхода из воздуха ??? Шо за хрень ? =|]№№№№№№№№№
  ;---------------------------------------------------------
    ArmedRidersUpgradeMyWeaponSet = Yes ;<=====[Вооруженные наездники модернизируют мой набор оружия]№№№№№№№№№
  End
;=============================================================================================================
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_24
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_25
    CrateData = SalvageCrateData
  End
  Behavior = FlammableUpdate ModuleTag_28
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior = DestroyDie ModuleTag_29
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = SlowDeathBehavior ModuleTag_30 ;Empty Hulk sinking away
    DeathTypes = NONE +EXTRA_4
    SinkDelay = 1
    SinkRate = 2.5
    DestructionDelay = 5000
  End
  Behavior = TransitionDamageFX ModuleTag_31
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 19.0
  GeometryMinorRadius = 8.0
  GeometryHeight = 11.5     
  GeometryIsSmall = No    
  Scale = 1.04 ;№№№№№№№№№ [1.03]* №№№№№№№№№
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End

;------------------------------------------------------------------------------
Object Slth_KassadDefenseSiteQuadCannon ;[Slth_GLADefenseSiteQuadCannon]*

  ; *** ART Parameters ***
  SelectPortrait = SUDefenseSiteQuadCannon ;SUDSQuad_L
  ButtonImage    = SUDefenseSiteQuadCannon ;SUDSQuad_L

  UpgradeCameo1 = Upgrade_GLAAPBullets
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  Draw = W3DModelDraw ModuleTag_Draw04

    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED 
    AliasConditionState = REALLYDAMAGED 
    AliasConditionState = RUBBLE
    AliasConditionState = SNOW DAMAGED 
    AliasConditionState = SNOW REALLYDAMAGED 
    AliasConditionState = SNOW RUBBLE
    AliasConditionState = NIGHT DAMAGED 
    AliasConditionState = NIGHT REALLYDAMAGED 
    AliasConditionState = NIGHT RUBBLE
    AliasConditionState = NIGHT SNOW DAMAGED 
    AliasConditionState = NIGHT SNOW REALLYDAMAGED 
    AliasConditionState = NIGHT SNOW RUBBLE

    ConditionState = USING_WEAPON_B
      Model = UVStinger_QC
      Turret = TURRET
      TurretPitch = TURRETEL
      WeaponFireFXBone  = SECONDARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
      WeaponMuzzleFlash = SECONDARY BarrelFX
      WeaponRecoilBone  = SECONDARY Barrel
    End
    AliasConditionState = USING_WEAPON_B SNOW
    AliasConditionState = USING_WEAPON_B NIGHT
    AliasConditionState = USING_WEAPON_B SNOW NIGHT
    AliasConditionState = DAMAGED USING_WEAPON_B
    AliasConditionState = REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = RUBBLE USING_WEAPON_B
    AliasConditionState = SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = SNOW RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT RUBBLE USING_WEAPON_B
    AliasConditionState = NIGHT SNOW DAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW REALLYDAMAGED USING_WEAPON_B
    AliasConditionState = NIGHT SNOW RUBBLE USING_WEAPON_B

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UVStinger_QC
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
      WeaponFireFXBone  = PRIMARY   Muzzle
      WeaponLaunchBone  = PRIMARY   Muzzle
      WeaponMuzzleFlash = PRIMARY   BarrelFX
      WeaponRecoilBone  = PRIMARY   Barrel
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************88
  Draw = W3DModelDraw ModuleTag_Draw01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE02
    End
    AliasConditionState = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE02
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_Draw02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_Draw03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:DefenseSiteQuad  ;Орудие ПВО - СРАЗУ ;№№№№№№№№№№ ОБОРОНКА
  Side                = GLAStealthGeneral ;GLA
  EditorSorting       = STRUCTURE
;=============================================================
  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY   DefenseSiteQuadCannonGun
    Weapon           = SECONDARY DefenseSiteQuadCannonGunAir
    PreferredAgainst = SECONDARY AIRCRAFT
  End
;=============================================================
  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End
  Prerequisites
    Object = Slth_GLAPalace
  End
  BuildCost = 1700
  BuildTime = 26.0
  EnergyProduction = 0
  VisionRange         = 350.0
  ShroudClearingRange = 350
  ExperienceValue    = 79 106 140 188
  ExperienceRequired = 0  238 317 421
  IsTrainable = Yes
  CommandSet = Slth_UpgradedDefeseSiteCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = StingerSiteSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
  End
;===================================================
  Behavior = RebuildHoleExposeDie ModuleTag_23428
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
;===================================================
  Behavior = WeaponBonusUpgrade ModuleTag_WP1
    TriggeredBy = Upgrade_GLAAPBullets
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = RebuildHoleExposeDie ModuleTag_4568
;    HoleName      = GLAHoleStingerSite
;    HoleMaxHealth = 400.0
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

  Behavior = DestroyDie ModuleTag_09
  End
  Behavior = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior = FXListDie ModuleTag_11
    DeathFX = FX_StructureSmallDeath
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000
    AflameDamageAmount = 1
    AflameDamageDelay = 500
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 280 ;270  ;<===============[СКОРОСТЬ ПОВОРОТА БАШНИ и ОРУДИЯ]
      TurretPitchRate     = 280 ;270
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 0
      MinPhysicalPitch    = -20
      MinIdleScanInterval = 4000
      MaxIdleScanInterval = 8000
      MinIdleScanAngle    = 0
      MaxIdleScanAngle    = 360
      RecenterTime = 25000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthDetectorUpdate ModuleTag_Detector ;+
    DetectionRate  = 500
    DetectionRange =  175
    CanDetectWhileGarrisoned  = No
    CanDetectWhileContained   = No
    ExtraRequiredKindOf = AIRCRAFT
  End

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;------------------------------------------------------------------------------------
Object Slth_KassadDefenseSiteArtilleryCannon ;[Slth_GLADefenseSiteArtilleryCannon]*

  ; *** ART Parameters ***
  SelectPortrait = SUDefenseSiteArtilleryCannon ;SUDSArtillery_L
  ButtonImage    = SUDefenseSiteArtilleryCannon ;SUDSArtillery_L

 ; UpgradeCameo1 = Upgrade_GLAToxinShells
  ;UpgradeCameo2 = Upgrade_GLACamoNetting

  Draw                    = W3DModelDraw ModuleTag_Draw04
    OkToChangeModelColor  = Yes

    ConditionState = NONE
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
    End
    AliasConditionState = SNOW
    AliasConditionState = NIGHT
    AliasConditionState = SNOW NIGHT
    AliasConditionState = DAMAGED
    AliasConditionState = DAMAGED SNOW
    AliasConditionState = DAMAGED NIGHT
    AliasConditionState = DAMAGED SNOW NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState = RELOADING_A
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Animation = UVD30.UVD30
      AnimationMode = ONCE
    End
    AliasConditionState = RELOADING_A SNOW
    AliasConditionState = RELOADING_A NIGHT
    AliasConditionState = RELOADING_A SNOW NIGHT
    AliasConditionState = RELOADING_A DAMAGED
    AliasConditionState = RELOADING_A DAMAGED SNOW
    AliasConditionState = RELOADING_A DAMAGED NIGHT
    AliasConditionState = RELOADING_A DAMAGED SNOW NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE NIGHT
    AliasConditionState = RELOADING_A REALLYDAMAGED RUBBLE SNOW NIGHT

    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model = UVD30
      Turret = TURRET
      WeaponFireFXBone = PRIMARY FIREFX
      WeaponMuzzleFlash = PRIMARY MUZZLEFX
      WeaponLaunchBone = PRIMARY FIREFX
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ;*****************************************************
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = OILTANK01
    
    ; day ************************************
    ConditionState = NONE
      Model = UBStingerS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = NIGHT 
    ConditionState = DAMAGED
      Model = UBStingerS_D
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = DAMAGED NIGHT 
    ConditionState = REALLYDAMAGED RUBBLE
      Model = UBStingerS_E
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState = REALLYDAMAGED NIGHT RUBBLE

    ; day snow ************************************
    ConditionState = SNOW
      Model = UBStingerS_S
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = NIGHT SNOW
    ConditionState = DAMAGED SNOW
      Model = UBStingerS_DS
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = DAMAGED NIGHT SNOW
    ConditionState = REALLYDAMAGED SNOW RUBBLE
      Model = UBStingerS_ES
      HideSubObject = TURRETUP02 PLANE01
    End
    AliasConditionState       = REALLYDAMAGED NIGHT SNOW RUBBLE

    ;**********************************************
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = UBStingerS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = UBStingerS_D
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = UBStingerS_E
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = UBStingerS_S
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = UBStingerS_DS
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = UBStingerS_ES
      HideSubObject      = TURRETUP02 PLANE01
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A4
      Animation       = UBStingerS_A4.UBStingerS_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4N
      Animation       = UBStingerS_A4N.UBStingerS_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A4S
      Animation       = UBStingerS_A4S.UBStingerS_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A4SN
      Animation       = UBStingerS_A4SN.UBStingerS_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmoke
      ParticleSysBone = Smoke02 BuildUpSmoke
      ParticleSysBone = Smoke03 BuildUpSmoke
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = UBStingerS_A6
      Animation       = UBStingerS_A6.UBStingerS_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6N
      Animation       = UBStingerS_A6N.UBStingerS_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = UBStingerS_A6S
      Animation       = UBStingerS_A6S.UBStingerS_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = UBStingerS_A6SN
      Animation       = UBStingerS_A6SN.UBStingerS_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
 
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:DefenseSiteArtillery ;№№№№№№№№№ Укреплённая Площадка с Арт-Орудием СРАЗУ №№№№№№№№№ ОБОРОНКА
  Side          = GLAStealthGeneral ;GLA
  EditorSorting = STRUCTURE
  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY ALMajArtilCannonGun ;FireBaseHowitzerGunGla
  End
  ArmorSet
    Conditions = None
    Armor      = BaseDefenseArmor
    DamageFX   = StructureDamageFXNoShake
  End
  Prerequisites
    Object = Slth_GLAPalace
  End
  BuildCost = 1000
  BuildTime = 22.0
  EnergyProduction = 0
  VisionRange         = 350.0
  ShroudClearingRange = 350
  ExperienceValue     = 101 134 178 238
  ExperienceRequired  = 0 302 402 535
  IsTrainable = Yes
  CommandSet = Slth_UpgradedDefeseSiteCommandSet


  ; *** AUDIO Parameters ***
  VoiceSelect = StingerSiteSelect
  SoundOnDamaged = BuildingDamagedStateLight
  SoundOnReallyDamaged = BuildingDestroy
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    UnderConstruction = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters *** 
  RadarPriority  = STRUCTURE
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMUNE_TO_CAPTURE SCORE_CREATE CAN_ATTACK IMMOBILE FS_BASE_DEFENSE SALVAGER

  Body = StructureBody ModuleTag_04
    MaxHealth     = 900.0
    InitialHealth = 900.0
  End
;================================================
  Behavior = RebuildHoleExposeDie ModuleTag_658
    HoleName      = GLAHoleStingerSite
    HoleMaxHealth = 400.0
  End
;================================================
  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 8000     ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5    ; taking this much damage...
    AflameDamageDelay = 500   ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = RebuildHoleExposeDie ModuleTag_65658
;    HoleName      = GLAHoleStingerSite
;    HoleMaxHealth = 400.0
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = DestroyDie ModuleTag_09
  End
  Behavior = CreateObjectDie ModuleTag_10
    CreationList  = OCL_ABStingerSiteDebris
  End
  Behavior = FXListDie ModuleTag_11
    DeathFX = FX_StructureSmallDeath
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      TurretTurnRate        = 60
      AllowsPitch           = No
      ControlledWeaponSlots = PRIMARY
      RecenterTime   = 1000000
    End
    AutoAcquireEnemiesWhenIdle = Yes Stealthed ATTACK_BUILDINGS
    MoodAttackCheckRate        = 250
  End

  Behavior = BaseRegenerateUpdate ModuleTag_Regen
  End 

  Behavior = StealthUpdate ModuleTag_174534
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = ATTACKING USING_ABILITY TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;Require the upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_13A
    TriggeredBy = Upgrade_GLACamoNetting
  End

  Behavior = ProductionUpdate ModuleTag_Production
  End

  Geometry            = BOX
  GeometryMajorRadius = 20.0
  GeometryMinorRadius = 20.0
  GeometryHeight = 10.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER
End

;=================================================================
Object Slth_KassadVehicleBikeWorkers

  ; *** ART Parameters ***
  SelectPortrait = SUComBike_L ;Bike1
  ButtonImage    = SUComBike   ;Bike1
  
  UpgradeCameo1 = Upgrade_GLAJunkRepair
  ;;UpgradeCameo2 = Upgrade_GLACamouflageVehicle

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;Normal Bike
    ;------------------------------
    DefaultConditionState
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight

      HideSubObject = BOMBBIKE ; Hide from all states except terrorist (rider 5)


    End
    AliasConditionState RIDER1
    AliasConditionState RIDER1 MOVING
    AliasConditionState RIDER6
    AliasConditionState RIDER6 MOVING

    ConditionState = REALLYDAMAGED
      Model = UVComBike_d
    End
    AliasConditionState RIDER1 REALLYDAMAGED
    AliasConditionState RIDER1 MOVING REALLYDAMAGED
    AliasConditionState RIDER6 REALLYDAMAGED
    AliasConditionState RIDER6 MOVING REALLYDAMAGED

  
    ConditionState = TOPPLED
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
    End
    ConditionState = TOPPLED REALLYDAMAGED
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
    End

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT

    ConditionState = RIDER1 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING CENTER_TO_LEFT REALLYDAMAGED


    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER

    ConditionState = RIDER1 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING LEFT_TO_CENTER REALLYDAMAGED


    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT
    AliasConditionState  RIDER7 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState  RIDER6 MOVING CENTER_TO_RIGHT REALLYDAMAGED


    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER

    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER6 MOVING RIGHT_TO_CENTER REALLYDAMAGED


    ;Terror Bike
    ;------------------------------
    ConditionState  RIDER5
      Model = UVComBike
      WeaponFireFXBone    = PRIMARY Muzzle_B
      WeaponLaunchBone    = PRIMARY RocketFX03
      WeaponMuzzleFlash   = PRIMARY MuzzleFX_B
      ParticleSysBone     = SMOKE CombatBikeSmokeLight
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING

    ConditionState = REALLYDAMAGED RIDER5
      Model = UVComBike_d
      ShowSubObject = BOMBBIKE
    End
    AliasConditionState RIDER5 MOVING REALLYDAMAGED
  
    ConditionState = TOPPLED RIDER5
      Model = UVComBike_F
      Animation           = UVComBike_F.UVComBike_F
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End
    ConditionState = TOPPLED REALLYDAMAGED RIDER5
      Model = UVComBike_dF
      Animation           = UVComBike_DF.UVComBike_DF
      AnimationMode       = ONCE
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UVComBike_A1
      Animation           = UVComBike_A1.UVComBike_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A1d
      Animation           = UVComBike_A1D.UVComBike_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UVComBike_A2
      Animation           = UVComBike_A2.UVComBike_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End

    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBike_A2d
      Animation           = UVComBike_A2D.UVComBike_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
      ShowSubObject = BOMBBIKE
    End


    ;Gun Bike
    ;------------------------------
    ConditionState = RIDER2
      Model = UVComBikeG
    End
    AliasConditionState RIDER2 MOVING
    AliasConditionState RIDER4
    AliasConditionState RIDER4 MOVING
    ConditionState = RIDER2 REALLYDAMAGED
      Model = UVComBikeG_d
    End
    AliasConditionState RIDER2 MOVING REALLYDAMAGED
    AliasConditionState RIDER4 REALLYDAMAGED
    AliasConditionState RIDER4 MOVING REALLYDAMAGED
   
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_LEFT REALLYDAMAGED

    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A1.UVComBikeG_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING LEFT_TO_CENTER REALLYDAMAGED

    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING CENTER_TO_RIGHT REALLYDAMAGED

    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UVComBikeG
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeG_d
      Animation           = UVComBikeG_A2.UVComBikeG_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    AliasConditionState RIDER4 MOVING RIGHT_TO_CENTER REALLYDAMAGED


    ;Missile Bike
    ;------------------------------
    ConditionState = RIDER3
      Model = UVComBikeTN
    End
    AliasConditionState RIDER3 MOVING
    ConditionState = RIDER3 REALLYDAMAGED
      Model = UVComBikeTN_d
    End
    AliasConditionState RIDER3 MOVING REALLYDAMAGED
  
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UVComBikeTN_A1
      Animation           = UVComBikeTN_A1.UVComBikeTN_A1
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A1d
      Animation           = UVComBikeTN_A1D.UVComBikeTN_A1D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UVComBikeTN_A2
      Animation           = UVComBikeTN_A2.UVComBikeTN_A2
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER REALLYDAMAGED
      Model = UVComBikeTN_A2d
      Animation           = UVComBikeTN_A2D.UVComBikeTN_A2D
      AnimationMode       = ONCE_BACKWARDS
      ParticleSysBone     = SMOKE CombatBikeSmokeHeavy
    End

    TrackMarks = EXTireTrack03.tga

    Dust                        = CombatBikeDust
    DirtSpray                   = CombatBikeDirtSpray
    PowerslideSpray             = CombatBikeDirtPowerSlide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone           = Tire01
    LeftRearTireBone            = Tire00
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

  End

  Draw = W3DModelDraw ModuleTag_Rider01
    OkToChangeModelColor = Yes

    DefaultConditionState
      ;**************************************************
      ;*** Must have a default model in order to see
      ;*** house color!!!
      ;**************************************************
      Model = UIWrkr_SKN
      ;WeaponFireFXBone    = PRIMARY Muzzle
      ;WeaponLaunchBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
    End
    AliasConditionState MOVING

    ;Worker animations
    ;-----------------------
    ConditionState = RIDER1 
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER1 MOVING CENTER_TO_LEFT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING LEFT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER1 MOVING CENTER_TO_RIGHT
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER1 MOVING RIGHT_TO_CENTER
      Model = UIWrkr_SKN
      Animation           = UIWrkr_SKL.UIWrkr_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End


    ;Rebel animations
    ;-----------------------
    ConditionState = RIDER2 
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER2 MOVING CENTER_TO_LEFT
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING LEFT_TO_CENTER
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER2 MOVING CENTER_TO_RIGHT
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER2 MOVING RIGHT_TO_CENTER
      Model = UIPalGuard
      Animation           = UIRGrd_SKL.UIRGrd_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;RPG Trooper animations
    ;-----------------------
    ConditionState = RIDER3 
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER3 MOVING CENTER_TO_LEFT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING LEFT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER3 MOVING CENTER_TO_RIGHT
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER3 MOVING RIGHT_TO_CENTER
      Model = UITunF_SKN2
      Animation           = UITunF_SKL.UITunF_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Jarmen Kell animations
    ;-----------------------
    ConditionState = RIDER4 
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER4 MOVING CENTER_TO_LEFT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING LEFT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER4 MOVING CENTER_TO_RIGHT
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER4 MOVING RIGHT_TO_CENTER
      Model = UIHERO_SKN
      Animation           = UIHERO_SKL.UIHERO_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Terrorist animations
    ;-----------------------
    ConditionState = RIDER5 
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER5 MOVING CENTER_TO_LEFT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING LEFT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER5 MOVING CENTER_TO_RIGHT
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER5 MOVING RIGHT_TO_CENTER
      Model = UITer_Local_SKN
      Animation           = UITer_Local_SKL.UITER_Local_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;Hijacker animations
    ;-----------------------
    ConditionState = RIDER6 
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A5
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A4
      AnimationMode = LOOP
    End
    ConditionState = RIDER6 MOVING CENTER_TO_LEFT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING LEFT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A1
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER6 MOVING CENTER_TO_RIGHT
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE
    End
    ConditionState = RIDER6 MOVING RIGHT_TO_CENTER
      Model = UIHJCK_SKN
      Animation           = UIHJCK_SKL.UIHJACK_CmBk_A2
      AnimationMode       = ONCE_BACKWARDS
    End

    ;ai veda animations
    ;-----------------------
    ConditionState = RIDER7
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_IDD1
      AnimationMode = ONCE
    End
    ConditionState = RIDER7 MOVING
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_IDD2
      AnimationMode = LOOP
    End
    ConditionState = RIDER7 MOVING CENTER_TO_LEFT
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_CHD
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING LEFT_TO_CENTER
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_STD
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = RIDER7 MOVING CENTER_TO_RIGHT
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_STD
      AnimationMode       = ONCE
    End
    ConditionState = RIDER7 MOVING RIGHT_TO_CENTER
      Model = Alqueda
      Animation           = UIMOB01_SKL.UIMOB01_STD
      AnimationMode       = ONCE_BACKWARDS
    End
    ConditionState = TOPPLED
      Model = None
    End
    AliasConditionState TOPPLED MOVING
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Slth_CombatBike ;<===================[РАБОЧИЙ-МОТОЦИКЛИСТ]№№№№№№№№№
  Side                = GLAStealthGeneral ;[GLADemolitionGeneral]*
  EditorSorting       = VEHICLE
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None
    Weapon = PRIMARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER2
    Weapon = PRIMARY SovietS47Weapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER3
    Weapon = PRIMARY DEMO_TunnelDefenderBikerRocketWeapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER4
    Weapon = PRIMARY GLABikerKellSniperRifle
    Weapon = SECONDARY GLAJarmenKellVehiclePilotSniperRifle
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = WEAPON_RIDER7
    Weapon = PRIMARY AlQuedaAK47Weapon
  End
  WeaponSet
    Conditions = WEAPON_RIDER7 PLAYER_UPGRADE
    Weapon = PRIMARY AlQuedaAK47Weapon
  End
  WeaponSet
    ;Kill himself so we can use FireWeaponWhenDead to fire the real weapon -- and use UNRESISTABLE
    ;damage to do ini logic for type of death to play -- unresistable for success.
    Conditions = WEAPON_RIDER5
    Weapon = PRIMARY TerroristSuicideWeapon 
  End
  ArmorSet
    Conditions = None
    Armor      = CombatBikeArmor ;We can't have the game crashing because this vehicle doesn't technically have a pilot.
    DamageFX   = TankDamageFX
  End
 ;----------------------------------------------------------------------
  Prerequisites
    Object = Slth_GLAPalace
    ;Object = Slth_GLASupplyStash Slth_GLASalvageStation
  End
  BuildCost = 800 ;350
  BuildTime = 8.0 ;10.0 ;5.0 ;in seconds
 ;----------------------------------------------------------------------
  VisionRange         = 180.0
  ShroudClearingRange = 300
  ExperienceValue     = 15 15 30 40  ;[Было: 50 50 100 150]*    ;Experience point value at each level
  ExperienceRequired  = 0 40 60 120 ;[Было: 0 200 400 800]* ;Experience points needed to gain each level
  IsTrainable = Yes                   ;Can gain experience
  ;;;;;CrusherLevel = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
 ;----------------------------------------------------------
  CommandSet = Demo_GLAVehicleCombatBikeDefaultCommandSet
 ;----------------------------------------------------------

  ; *** AUDIO Parameters ***
  VoiceSelect = CombatCycleVoiceSelect
  VoiceMove = CombatCycleVoiceMove
  VoiceAttack = CombatCycleVoiceAttack
  SoundMoveStart = CombatBikeMoveStart
  SoundMoveStartDamaged = CombatBikeMoveStart
  VoiceGuard = CombatCycleVoiceMove
  SoundEnter = CombatCycleSwitchRider
 ;-----------------------------
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
 ;-----------------------------
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate          = CombatCycleVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop  
  ; Required for the W3DTruckDraw module
    TruckLandingSound = RocketBuggyLand
    TruckPowerslideSound = CombatBikeMoveStart
    VoiceCrush      = CombatCycleVoiceMove
    VoiceEnter = CombatCycleVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK DONT_AUTO_CRUSH_INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SALVAGER SCORE CLIFF_JUMPER

  Body = ActiveBody ModuleTag_02
    MaxHealth     = 100.0
    InitialHealth = 100.0
    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 0       ; turn rate, in degrees per sec
      NaturalTurretAngle = 0
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL CombatBikeGroundLocomotor CombatBikeCliffLocomotor
  Locomotor = SET_SLUGGISH CombatBikeTerroristGroundLocomotor CombatBikeTerroristCliffLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 15.0
  End

  Behavior = SlowDeathBehavior DeathTag_04
    ExemptStatus = STATUS_RIDER1 STATUS_RIDER2 STATUS_RIDER3 STATUS_RIDER4 STATUS_RIDER5 STATUS_RIDER6 STATUS_RIDER7
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_05
    RequiredStatus = STATUS_RIDER1
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_BuggyNewDeathExplosion
    OCL = INITIAL OCL_WorkerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_06
    RequiredStatus = STATUS_RIDER2
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_RebelFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_07
    RequiredStatus = STATUS_RIDER3
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_TunnelDefenderFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_08
    RequiredStatus = STATUS_RIDER4
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_JarmenKellFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_09
    RequiredStatus = STATUS_RIDER5
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_TerroristFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End
  Behavior = SlowDeathBehavior DeathTag_10
    RequiredStatus = STATUS_RIDER6
    DeathTypes = ALL -CRUSHED -SPLATTED -TOPPLED
    DestructionDelay = 0
    FX = INITIAL FX_DEMOBuggyNewDeathExplosion
    OCL = INITIAL OCL_HijackerFlyingOffBikeDeathStart
    OCL = FINAL OCL_CombatBikeAirDeathStart
  End

  Behavior = AutoHealBehavior ModuleTag_08
    HealingAmount = 1
    HealingDelay = 1000 ; msec
    TriggeredBy = Upgrade_GLAJunkRepair
  End
  ;Create the hulk after the toppling is complete (not killed until topple anim finished).
  Behavior = CreateObjectDie ModuleTag_10
    DeathTypes = NONE +TOPPLED
    CreationList = OCL_CombatBike_ToppledHulk
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED +TOPPLED
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_12
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_13
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_RocketBuggy_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_14
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
;===========================================================================================================================
 Behavior = RiderChangeContain ModuleTag_16
    ;A list of each valid rider that is allowed to ride this object. Each rider is
    ;assigned a modelcondition state, a weaponset flag, an object status bit, and
    ;a commandset override. The actual object is hidden inside the container so the 
    ;visible rider is fluff. Also riders are deleted (not killed) when the bike is
    ;destroyed, so all deaths must be OCLs on the bike.
  Rider1 = Slth_GLAInfantryWorker     RIDER1 WEAPON_RIDER1 STATUS_RIDER1 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
  Rider2 = Slth_GLAInfantryRebel      RIDER2 WEAPON_RIDER2 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
  Rider3 = Slth_GLAInfantryAlQuedaElite RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
  Rider4 = Slth_GLAInfantryJarmenKell RIDER4 WEAPON_RIDER4 STATUS_RIDER4 GLAVehicleCombatBikeJarmenKellCommandSet SET_NORMAL
  Rider5 = Slth_GLAInfantryTerrorist  RIDER5 WEAPON_RIDER5 STATUS_RIDER5 GLAVehicleCombatBikeDefaultCommandSet SET_SLUGGISH
  Rider6 = Slth_GLAInfantryHijacker   RIDER6 WEAPON_RIDER6 STATUS_RIDER6 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
  Rider7 = Slth_GLAInfantryAlQueda RIDER7 WEAPON_RIDER7 STATUS_RIDER2 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
;Rider3 = Slth_GLAInfantryTunnelDefender RIDER3 WEAPON_RIDER3 STATUS_RIDER3 GLAVehicleCombatBikeDefaultCommandSet SET_NORMAL
 ;--------------------------------------------------------------------------------------------------------------------------
   ScuttleDelay  = 1500
   ScuttleStatus = TOPPLED
 ;---------------------------;№№№№№[Slth_GLAInfantryAlQuedaElite + Slth_GLAInfantryWorker = Вдвоём веселее гадить))]№№№№№
 ;Standard TransportContain stuff
   Slots                 = 2
   InitialPayload        = Slth_GLAInfantryAlQuedaElite 1 ;Slth_GLAInfantryWorker 1 ;;[Demo_GLAInfantryTerrorist 1]*
   ScatterNearbyOnExit   = No
   HealthRegen%PerSec    = 0
   DamagePercentToUnits  = 100%  ; This module will Delete the rider on death, but we need to kill him as well so he doesn't pick up the bike's salvage crate.
   BurnedDeathToUnits    = No    ; And no Burned death.
   AllowInsideKindOf     = INFANTRY
   ExitDelay         = 250
   NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
   GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
 End
;==========================================================================================================================
  Behavior = AnimationSteeringUpdate ModuleTag_17
    MinTransitionTime = 300
  End
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000    ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3   ; taking this much damage...
    AflameDamageDelay = 500  ; this often.
  End
  ;Terrorist without suicide bomb upgrade
  Behavior = FireWeaponWhenDeadBehavior ModuleTag_Death18
    RequiredStatus  = STATUS_RIDER5
    DeathWeapon     = SuicideBikeBomb
    StartsActive    = Yes
    DeathTypes      = NONE +SUICIDED +CRUSHED +SPLATTED +LASERED +BURNED +EXPLODED
    ConflictsWith = Demo_Upgrade_SuicideBomb
  End

  ;Non-terrorist with suicide bomb upgrade (fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTag999
    ExemptStatus  = STATUS_RIDER5
    DeathWeapon   = Demo_SuicideDynamitePackPlusFire
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes = ALL -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
  End;

  ;Non-terrorist with suicide bomb upgrade (no fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTag998
    ExemptStatus  = STATUS_RIDER5
    DeathWeapon   = Demo_SuicideDynamitePack
    StartsActive  = No
    TriggeredBy   = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes = NONE +SUICIDED
  End;

  ;Terrorist with suicide bomb upgrade (fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTag997
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = Demo_TerroristOnCombatBikeSuicideDynamitePackPlusFire
    StartsActive   = No
    TriggeredBy    = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes     = ALL -SUICIDED -POISONED -POISONED_BETA -POISONED_GAMMA
  End;

  ;Terrorist with suicide bomb upgrade (no fire)
  Behavior = FireWeaponWhenDeadBehavior ModuleTag996
    RequiredStatus = STATUS_RIDER5
    DeathWeapon    = Demo_TerroristOnCombatBikeSuicideDynamitePack
    StartsActive   = No
    TriggeredBy    = Demo_Upgrade_SuicideBomb
    RequiresAllTriggers = Yes; 
    DeathTypes     = NONE +SUICIDED +POISONED +POISONED_BETA
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№
; This is commented out per hotlist request 10/9 ML
;------------------------------------------------------------
;№№№№№ [После крушения мотоцикла остаётся Рабочий-невидимка]: №№№№№№
;------------------------------------------------------------
  Behavior = CreateObjectDie ModuleTag_KVBWD
    DeathTypes = ALL -CRUSHED -SPLATTED
    CreationList = Slth_OCL_KassadBikeWorkersDebris01 ;<==========[Ссыль на РАБочего появляющегося после крушения мотыка]
    ExemptStatus = HIJACKED
  End
;====================================================== СТЭЛС-ГРЕЙД =======================
;  Behavior = StealthUpgrade ModuleTag_SUVBWD1
;    TriggeredBy = Upgrade_GLACamouflageVehicle
;  End
;====================================================== СТЕЛС-СРАЗУ =======================
  Behavior = StealthUpdate ModuleTag_SUVBWD ;_SUVBWD2
    StealthDelay               = 2500 ; msec
    StealthForbiddenConditions = ATTACKING USING_ABILITY TAKING_DAMAGE ;[...]
    MoveThresholdSpeed         = 3
    InnateStealth              = Yes ;[No]* ;Doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№№

  Geometry = BOX
  GeometryMajorRadius = 11.0
  GeometryMinorRadius = 2.5
  GeometryHeight = 7.5     
  GeometryIsSmall = Yes    
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45

End

;------------------------------------------------------------------------------
Object Slth_GLAInfantryBikeWorker

  ; *** ART Parameters ***
  SelectPortrait = StlthWorker
  ButtonImage    = StlthWorker
  
  UpgradeCameo1 = Upgrade_GLACamouflage

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model         = UIWRKR_SKN
      IdleAnimation = UIWRKR_SKL.UIWRKR_STA 0 9
      IdleAnimation = UIWRKR_SKL.UIWRKR_IDA
      AnimationMode = ONCE
      TransitionKey = TRANS_Stand
    End
    ConditionState  = MOVING
      Animation     = UIWRKR_SKL.UIWRKR_RNA 16
      AnimationMode = LOOP
      Flags         = RANDOMSTART
      TransitionKey = TRANS_Moving
      ParticleSysBone = None InfantryDustTrails
    End

    ;it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ;since we flip the bit once we get pretty close to the target. but it looks
    ;funky to do the construction animation while moving. 
    ;so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING
    ConditionState = ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MS
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Standing
    End

    ConditionState = MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation = UIWRKR_SKL.UIWRKR_MSW 50
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_MetalDetector_Moving
      ParticleSysBone = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING CARRYING

    TransitionState = TRANS_Stand TRANS_MetalDetector_Standing    ;STANDING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Stand    ;ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_MetalDetector_Standing    ;CARRYING -> ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Carry    ;ATTACKING -> CARRYING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Carry TRANS_MetalDetector_Moving      ;CARRYING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_MetalDetector_Moving TRANS_Stand      ;MOVING ATTACKING -> STANDING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB2;put away moving
      AnimationMode = ONCE
    End
    TransitionState = TRANS_Stand TRANS_MetalDetector_Moving      ;STANDING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Standing   ;MOVING -> ATTACKING [STANDING]
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRB1;take out standing
      AnimationMode = ONCE
    End
    TransitionState = TRANS_MetalDetector_Standing TRANS_Moving   ;ATTACKING [STANDING] -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    TransitionState = TRANS_Moving TRANS_MetalDetector_Moving     ;MOVING -> MOVING ATTACKING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC1;take out moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End
    TransitionState = TRANS_MetalDetector_Moving TRANS_Moving     ;MOVING ATTACKING -> MOVING
      ShowSubObject = MINED_SKIN
      Animation     = UIWRKR_SKL.UIWRKR_TRC2;put away moving [NEW NON-SKATING ANIMATION]
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 2.0 2.0
    End

    ConditionState = MOVING CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARY 12
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
      ParticleSysBone = None InfantryDustTrails
    End
    ; it is legal to be ACTIVELY_CONSTRUCTING and MOVING at the same time,
    ; since we flip the bit once we get pretty close to the target. but it looks
    ; funky to do the construction animation while moving. 
    ; so just use the normal move animation in that case.
    AliasConditionState = ACTIVELY_CONSTRUCTING MOVING CARRYING

    ConditionState = CARRYING
      ShowSubObject = BOX
      Animation = UIWRKR_SKL.UIWRKR_CARST 30 
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = TRANS_Carry
    End

    ConditionState = DYING
      Animation = UIWRKR_SKL.UIWRKR_DTA
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End
    AliasConditionState = DYING CARRYING

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = UIWRKR_SKL.UIWRKR_ADTE1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = UIWRKR_SKL.UIWRKR_ADTE2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = UIWRKR_SKL.UIWRKR_ADTE3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState  = SPECIAL_CHEERING
      Animation     = UIWRKR_SKL.UIWRKR_CHA
      AnimationMode = ONCE
    End
    
    ConditionState  = ACTIVELY_CONSTRUCTING
      Animation     = UIWRKR_SKL.UIWRKR_BDA
      AnimationMode = LOOP
      TransitionKey = TRANS_Constructing
    End
    AliasConditionState = ACTIVELY_CONSTRUCTING CARRYING

   ;--------------------
    TransitionState = TRANS_Stand TRANS_Carry
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Carry TRANS_Stand
      ShowSubObject = BOX
      Animation     = UIWRKR_SKL.UIWRKR_PIK
      AnimationMode = ONCE_BACKWARDS
      Flags         = START_FRAME_LAST
    End
    
    TransitionState = TRANS_Stand TRANS_Constructing
      Animation     = UIWRKR_SKL.UIWRKR_TRA1
      AnimationMode = ONCE
    End

    TransitionState = TRANS_Constructing TRANS_Stand
      Animation     = UIWRKR_SKL.UIWRKR_TRA2
      AnimationMode = ONCE
    End
  End

  ; ***DESIGN parameters ***
  DisplayName   = OBJECT:Worker
  Side          = GLAStealthGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End
  WeaponSet
    Conditions = MINE_CLEARING_DETAIL 
    Weapon = PRIMARY WorkerMineDisarmingWeapon
  End
  ArmorSet
    Conditions = None
    Armor      = HumanArmor
    DamageFX   = InfantryDamageFX
  End
  VisionRange = 100.0
  ShroudClearingRange = 200
 ;Prerequisites
 ;  Object = Slth_GLABarracks GLASupplyStash ;commented out, or else you can't build from Con Yard as Dozer.
 ;End
  BuildCost = 0   ;200
  BuildTime = 0.0 ;4.0 ;in seconds    
  CrushableLevel = 0  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Slth_GLAWorkerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = WorkerVoiceSelect
  VoiceMove = WorkerVoiceMove
  VoiceAttack = WorkerVoiceMove
  VoiceGuard = WorkerVoiceMove
  VoiceFear = WorkerVoiceFear
  VoiceTaskComplete = WorkerVoiceBuildComplete
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceEnter        = WorkerVoiceMoveUpgraded
    VoiceEnterHostile = WorkerVoiceMoveUpgraded
    VoiceGarrison     = WorkerVoiceGarrison
    VoiceCreate       = WorkerVoiceCreate
    VoiceSupply       = WorkerVoiceSupply
    VoiceNoBuild      = WorkerVoiceBuildNot
    VoiceRepair       = WorkerVoiceRepair
    VoiceDisarm       = WorkerVoiceClearMine
    VoiceBuildResponse = WorkerVoiceBuild
    VoiceGetHealed    = WorkerVoiceMoveUpgraded
    VoiceMoveUpgraded = WorkerVoiceMoveUpgraded
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE DISGUISER CAN_CAST_REFLECTIONS INFANTRY SALVAGER DOZER HARVESTER SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = WorkerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond  = 2%    ; % of max health to repair each second
    BoredTime                     = 5000  ; in milliseconds
    BoredRange                    = 150   ; when bored, we look this far away to do something 
    MaxBoxes                      = 1
    UpgradedSupplyBoost           = 8 ; gives this much more cash for every box collected
    SupplyCenterActionDelay       = 150 ;400 ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay    = 150 ;400 ;ms per box (many small transactions)
    SupplyWarehouseScanDistance   = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = WorkerVoiceSuppliesDepleted
    ; the only "enemies" that workers can acquire are mines, to be disarmed...
    AutoAcquireEnemiesWhenIdle    = Yes
  End
  Locomotor = SET_NORMAL WorkerShoesLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End
 
  Behavior = SquishCollide ModuleTag_06
    ;nothing
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 6000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_WorkerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireGLA
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = StealthDetectorUpdate ModuleTag_12
    DetectionRate         = 500    ;How often to rescan for stealthed things in my sight (msec)
    ;DetectionRange       = ???    ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf = MINE     ;We can only detect MINES, not other stealthed things
  End

  Behavior = PoisonedBehavior ModuleTag_13
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = CommandSetUpgrade ModuleTag_14
    TriggeredBy = Upgrade_GLAWorkerFakeCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerRealCommandSet
    CommandSet = Slth_GLAWorkerFakeBuildingsCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_15
    TriggeredBy = Upgrade_GLAWorkerRealCommandSet
    RemovesUpgrades = Upgrade_GLAWorkerFakeCommandSet Upgrade_GLAWorkerRealCommandSet
    CommandSet = Slth_GLAWorkerCommandSet
  End
 
  Behavior = CommandSetUpgrade ModuleTag_1400
    TriggeredBy = Upgrade_ChinaWarFactoryupCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAWorkerCommandSetTech
  End

  Behavior = CommandSetUpgrade ModuleTag_1700
    TriggeredBy = Upgrade_ChinaWarFactorydownCommandSet
    RemovesUpgrades = Upgrade_ChinaWarFactoryupCommandSet Upgrade_ChinaWarFactorydownCommandSet
    CommandSet = Slth_GLAWorkerCommandSet
  End

  Behavior = ProductionUpdate ModuleTag_18
  End

  Behavior = SpecialAbility ModuleTag_20678
    SpecialPowerTemplate = SpecialAbilityDisguiseAsInfantry
    UpdateModuleStartsAttack = Yes
    InitiateSound = BombTruckVoiceDisguise
  End
  Behavior = SpecialAbilityUpdate ModuleTag_21568
    SpecialPowerTemplate = SpecialAbilityDisguiseAsInfantry
    StartAbilityRange = 1000000.0
    ApproachRequiresLOS = No
  End
;================================================================================
  Behavior = StealthUpdate ModuleTag_STUBW1 ;_407
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = MOVING USING_ABILITY ;ATTACKING TAKING_DAMAGE
    MoveThresholdSpeed          = 3
    InnateStealth               = No ;Requires upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
  Behavior = StealthUpgrade ModuleTag_STUBW2 ;_10
    TriggeredBy = Upgrade_GLACamouflage
  End
;================================================================================

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Scale = 0.9
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14
  ShadowSizeY = 14
  ShadowTexture = ShadowI
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;===================================================================================
Object Slth_GLAVehicleFighterPlane  ;[2016-PROJECT RAPTOR 9.1];;[2010-TheRampage@]*

  SelectPortrait = T6_L
  ButtonImage = T6

  UpgradeCameo1 = Upgrade_GLAJunkRepair
  ;;UpgradeCameo2 = Upgrade_GLAAPBullets

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = UVFitrPln
      Animation           = UVFitrPln.UVFitrPln
      AnimationMode       = LOOP
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponMuzzleFlash = PRIMARY TurretFX
      ParticleSysBone = SMOKE01 JetBlackTrailThin
      ParticleSysBone = SMOKE02 JetBlackTrailThin
      ParticleSysBone = SMOKE01 JetContrailThin
      ParticleSysBone = SMOKE02 JetContrailThin
    End

    ConditionState = REALLYDAMAGED
      Model = UVFitrPln_D
      Animation           = UVFitrPln_D.UVFitrPln_D
      AnimationMode       = LOOP
      ParticleSysBone = SMOKE01 JetBlackTrailThin
      ParticleSysBone = SMOKE02 JetBlackTrailThin
      ParticleSysBone = SMOKE01 JetContrailThin
      ParticleSysBone = SMOKE02 JetContrailThin
    End

    ConditionState = RUBBLE
      Model = UVFitrPln_D
    End
  End

  DisplayName         = OBJECT:Fighter ;OBJECT:VehicleAttackPlane
  EditorSorting       = VEHICLE
  Side                = GLAStealthGeneral
  TransportSlotCount  = 0
  VisionRange         = 200.0
  ShroudClearingRange = 300 ;[200]*
  WeaponSet
    Conditions = None
    Weapon = PRIMARY FighterPlaneGun ;(Бъёт тока по воздуху)
  End
  ArmorSet
    Conditions = None
    Armor = AirplaneArmor
    DamageFX = None
  End
  Prerequisites
    Object = Slth_GLAAirfield
    Object = Slth_GLAPalace
  End
  BuildCost = 2000 ;1600
  BuildTime = 25.0
  ExperienceValue    = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes                   ;Can gain experience
  CrusherLevel   = 1 ;[2]*  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet


  ; *** AUDIO Parameters *** ;№№№№№№№[ОЗВУЧКА СТАРОГО СПИСАНОГО ДетройТом ИСТРЕБИТЕЛЯ Кассада]№№№№№№№№№
  VoiceSelect            = SaboteurVoiceSelect
  VoiceMove              = SaboteurVoiceMove
  VoiceAttack            = SaboteurVoiceAttack
  VoiceGuard             = SaboteurVoiceSelect
  SoundAmbient           = RaptorAmbientLoop
  SoundAmbientRubble     = NoSound
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
  UnitSpecificSounds
    VoiceCreate          = SaboteurVoiceCreate
    Afterburner          = RaptorAfterburner
    VoiceLowFuel         = RaptorVoiceLowFuel
    VoiceGarrison        = RaptorVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT
  Body = ActiveBody ModuleTag_02
    MaxHealth     = 180.0
    InitialHealth = 180.0
  End
  Behavior = JetSlowDeathBehavior ModuleTag_05
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_RaptorDeathFinalBlowUp
    DestructionDelay                = 99999999; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_JetDeathInitial
    OCLInitialDeath                 = None
    DelaySecondaryFromInitialDeath  = 500  ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = None
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_A10DeathHitGround
    DelayFinalBlowUpFromHitGround   = 200 ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_A10DeathFinalBlowUp
;   DeathLoopSound                  = MICAL NEEDS TO MAKE ME
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 500.0
  End
  Behavior = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior = JetAIUpdate ModuleTag_09
    OutOfAmmoDamagePerSecond  = 10%  ; amount of damage to take per SEC (not per frame) when out of ammo
  ; note that it's expressed as a percent of max health, not an absolute
    TakeoffPause              = 500
    MinHeight                 = 5
    ParkingOffset             = 3             ; scooch it a little forward so the tail doesn't hit the doors
    ReturnToBaseIdleTime      = 10000         ; if idle for this long, return to base, even if not out of ammo
  End
  Locomotor = SET_NORMAL FighterPlaneLocomotor ;(Speed = 120 ;130)
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;  Behavior = WeaponBonusUpgrade ModuleTag_12
;    TriggeredBy = Upgrade_GLAAPBullets
;  End
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000
    AflameDamageAmount = 3
    AflameDamageDelay = 500
  End
;---------------------------------------------------------------------
  Behavior = AutoHealBehavior ModuleTag_1200
    HealingAmount = 2
    HealingDelay  = 1000 ; msec
    TriggeredBy   = Upgrade_GLAJunkRepair ;["Само-лечилка"]№№№№№№№№№
  End
;-------------------------------------------------------------------------------------------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUFGR ;[_40700]*
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY MOVING ATTACKING TAKING_DAMAGE ;<===[Невидим когда не двигается(*сидит на Аэродроме)]
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End
;-------------------------------------------------------------------------------------------------------------------------------------

  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
  Shadow                   = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length.

End

;---------------------------------------------------------------------------------------------------------------
Object Slth_GLAJetAirplaneAC-1

  ; *** ART Parameters ***
  SelectPortrait = SUTerrorRockt
  ButtonImage    = SUTerrorRockt

  UpgradeCameo1 = Upgrade_GLAJunkRepair

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ParticlesAttachedToAnimatedBones = Yes 

    ConditionState = NONE
      Model = UVL29
      HideSubObject = BurnerFX03
    End
    ConditionState = REALLYDAMAGED
      Model = UVL29_D
      HideSubObject = BurnerFX03
    End
    ConditionState        = RUBBLE
      Model               = UVL29_D
      HideSubObject       = None 
      ShowSubObject       = None
    End
    ConditionState = JETEXHAUST
      Model = UVL29
      HideSubObject = BurnerFX03
      ParticleSysBone = WingTip01 JetContrailThin
      ParticleSysBone = WingTip02 JetContrailThin
      ParticleSysBone = ENGINE01 MissileExhaust
    End
    ConditionState = JETEXHAUST REALLYDAMAGED
      Model = UVL29_D
      HideSubObject = BurnerFX03
      ParticleSysBone = WingTip01 JetContrailThin
      ParticleSysBone = WingTip02 JetContrailThin
      ParticleSysBone = ENGINE01 MissileExhaust
    End
    ConditionState  = JETEXHAUST JETAFTERBURNER
      Model = UVL29
      ParticleSysBone     = WingTip01 JetContrailThin
      ParticleSysBone     = WingTip02 JetContrailThin
      ParticleSysBone     = Engine01 JetLenzflare
      ShowSubObject       = BurnerFX03
    End
    ConditionState  = JETEXHAUST JETAFTERBURNER REALLYDAMAGED
      Model = UVL29_D
      ParticleSysBone     = WingTip01 JetContrailThin
      ParticleSysBone     = WingTip02 JetContrailThin
      ParticleSysBone     = Engine01 JetLenzflare
      ShowSubObject       = BurnerFX03
    End
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:JetAirplaneAC-1
  EditorSorting      = VEHICLE
  Side               = GLAStealthGeneral ;GLA ;[Militia]*
  TransportSlotCount = 0
  VisionRange = 200.0
  ShroudClearingRange = 300
  WeaponSet
    Conditions = None 
    Weapon     = PRIMARY MilitiaJetAC1CannonWeapon ;[На основен: AirF_AC130CannonWeapon]
  End
  ArmorSet
    Conditions = None
    Armor = AirplaneArmor
    DamageFX = None
  End
  Prerequisites
    Object = Slth_GLAAirfield
    Object = Slth_GLAPalace
  End
  BuildCost = 1800 ;2000 ;[В PR 9.1.7: 1000]*
  BuildTime = 25.0 ;[В PR 9.1.7: 15.0]* ;10.0
  ExperienceValue    = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable  = Yes                  ;Can gain experience
  CrusherLevel   = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel = 2  ;What am I?: 0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = GenericCommandSet


    ; *** AUDIO Parameters ***
  VoiceSelect           = BalloonVoiceSelect
  VoiceMove             = BalloonVoiceMove
  VoiceGuard            = BalloonVoiceMove
  VoiceAttack           = BalloonVoiceAttack
  SoundAmbient          = RaptorAmbientLoop
  SoundEnter            = HumveeEnter
  SoundExit             = HumveeExit
 ;-----------------------------
  SoundStealthOn  = StealthOn
  SoundStealthOff = StealthOff
 ;-----------------------------
  UnitSpecificSounds ;(These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs)
    VoiceCreate         = BalloonVoiceCreate
    Afterburner         = RaptorAfterburner
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT SALVAGER
;----------------------------------------------------------------------------------------------
  Body = ActiveBody ModuleTag_02 ;_03
    MaxHealth       = 300.0 ;[В PR 9.1.7: 600.0]* ;;180.0
    InitialHealth   = 300.0 ;[В PR 9.1.7: 600.0]* ;;180.0
    SubdualDamageCap = 1000
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = PhysicsBehavior ModuleTag_03 ;_04
    Mass = 500.0
  End
  Behavior = JetAIUpdate ModuleTag_05 ;_09
    OutOfAmmoDamagePerSecond = 0%
    TakeoffDistForMaxLift    = 0%
    TakeoffPause             = 500
    MinHeight                = 5
    ReturnToBaseIdleTime     = 10000 ;[100]* ;<=============№№№№№№№[Время свободного полёта до возвращения на Базу(1000 = 1секунде)]№№№№№№№№№№№№№
    AutoAcquireEnemiesWhenIdle = Yes ;<=====================№№№№№№№[Автомобиль приобретает врагов когда неработающий = Да]№№№№№№
    KeepsParkingSpaceWhenAirborne = Yes ;No* ;<=============№№№№№№№[Сохраняет место для стоянки когда в воздухе = Да ;Нет]№№№№№№
    MoodAttackCheckRate = 100
  End
;================================================================================================
  Locomotor = SET_NORMAL  MilitiaAirplaneAC-1JetLocomotor ;[На основе: AirF_AC-130JetLocomotor]*
  Locomotor = SET_TAXIING AirF_AC-130BasicJetTaxiLocomotor
;================================================================================================
;---------------[ Вид крушения самолёта ]-----------------------------------
  Behavior = JetSlowDeathBehavior ModuleTag_06
    FXOnGroundDeath                = FX_JetOnGroundDeath
    OCLOnGroundDeath               = OCL_RaptorDeathFinalBlowUp
    DestructionDelay               = 99999999; destruction will happen when we
    RollRate                       = 0.2
    RollRateDelta                  = 100% ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                      = 0.0
    FallHowFast                    = 110.0%  ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                 = FX_RaptorDeathInitial
    OCLInitialDeath                = OCL_RaptorDeathInitial
    DelaySecondaryFromInitialDeath = 500  ; in milliseconds
    FXSecondary                    = FX_JetDeathSecondary
    OCLSecondary                   = OCL_RaptorDeathSecondary
    FXHitGround                    = FX_JetDeathHitGround
    OCLHitGround                   = OCL_RaptorDeathHitGround
    DelayFinalBlowUpFromHitGround  = 200 ; in milliseconds
    FXFinalBlowUp                  = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                 = OCL_WingedMissileDeathEffectSimple ;<==========[ЗАМЕНА]
;   DeathLoopSound                 = MICAL NEEDS TO MAKE ME
  End
  Behavior = FlammableUpdate ModuleTag_13
    AflameDuration = 5000    ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3   ; taking this much damage...
    AflameDamageDelay = 500  ; this often.
  End
;===============================================================================
  Behavior = TransitionDamageFX ModuleTag_17
    DamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
  End
;---------------------------------------------------------------------
  Behavior = AutoHealBehavior ModuleTag_1200
    HealingAmount = 3
    HealingDelay  = 1000 ; msec
    TriggeredBy   = Upgrade_GLAJunkRepair ;["Само-лечилка"]№№№№№№№№№
  End
;------------------------------------------------------------------------------------------------------------------------------------------------
  Behavior = StealthUpdate ModuleTag_SUFGR
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY MOVING ATTACKING TAKING_DAMAGE ;<========[Невидим когда не двигается(когда сидит на Аэродроме)]
    MoveThresholdSpeed          = 3
    InnateStealth               = Yes ;doesnt Require upgrade first
    OrderIdleEnemiesToAttackMeUponReveal = Yes
  End
;------------------------------------------------------------------------------------------------------------------------------------------------

  Geometry            = Box
  GeometryIsSmall     = Yes
  GeometryMajorRadius = 12.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 6.0
  Scale = 1.2
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45

End
